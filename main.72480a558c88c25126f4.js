(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+7AZ":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return d}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return E});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):d(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},2:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),s=n("os0x"),a=n("x7I3"),u=i.SDK_VERSION,c=new o.Logger("@firebase/firestore"),l=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function h(){return c.logLevel===o.LogLevel.DEBUG?l.DEBUG:c.logLevel===o.LogLevel.SILENT?l.SILENT:l.ERROR}function f(t){switch(t){case l.DEBUG:c.logLevel=o.LogLevel.DEBUG;break;case l.ERROR:c.logLevel=o.LogLevel.ERROR;break;case l.SILENT:c.logLevel=o.LogLevel.SILENT;break;default:c.error("Firestore ("+u+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=o.LogLevel.DEBUG){var i=n.map(y);c.debug.apply(c,["Firestore ("+u+") ["+t+"]: "+e].concat(i))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(c.logLevel<=o.LogLevel.ERROR){var r=e.map(y);c.error.apply(c,["Firestore ("+u+"): "+t].concat(r))}}function y(t){if("string"==typeof t)return t;var e=v.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function m(t){var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function g(t,e){t||m(e)}var v=function(){function t(){}return t.setPlatform=function(e){t.platform&&m("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||m("Platform not set"),t.platform},t}();function b(){return v.getPlatform().emptyByteString}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s.__extends(e,t),e}(Error);function E(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new _(w.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){return void 0!==t?t:e}function S(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function I(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x(t){for(var e in g(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function k(t,e,n){if(e.length!==n)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires "+z(n,"argument")+", but was called with "+z(e.length,"argument")+".")}function A(t,e,n){if(e.length<n)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires at least "+z(n,"argument")+", but was called with "+z(e.length,"argument")+".")}function D(t,e,n,r){if(e.length<n||e.length>r)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+z(e.length,"argument")+".")}function N(t,e,n,r){L(t,e,U(n)+" argument",r)}function O(t,e,n,r){void 0!==r&&N(t,e,n,r)}function P(t,e,n,r){L(t,e,n+" option",r)}function R(t,e,n,r){void 0!==r&&P(t,e,n,r)}function M(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(j(u))}var c=j(r);throw new _(w.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function L(t,e,n,r){if(!("object"===e?F(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=j(r);throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function F(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function j(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m("Unknown wrong type: "+typeof t)}function V(t,e,n){if(void 0===n)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+U(e)+" argument, but it was undefined.")}function q(t,e,n){I(e,function(e,r){if(n.indexOf(e)<0)throw new _(w.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function B(t,e,n,r){var i=j(r);return new _(w.INVALID_ARGUMENT,"Function "+t+"() requires its "+U(n)+" argument to be a "+e+", but it was: "+i)}function U(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function z(t,e){return t+" "+e+(1===t?"":"s")}var H=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return g(20===e.length,"Invalid auto ID: "+e),e},t}();function Q(t,e){return t<e?-1:t>e?1:0}function K(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function W(){if("undefined"==typeof Uint8Array)throw new _(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function G(){if(!v.getPlatform().base64Available)throw new _(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Y=function(){function t(t){G(),this._binaryString=t}return t.fromBase64String=function(e){k("Blob.fromBase64String",arguments,1),N("Blob.fromBase64String","string",1,e),G();try{return new t(v.getPlatform().atob(e))}catch(t){throw new _(w.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(k("Blob.fromUint8Array",arguments,1),W(),!(e instanceof Uint8Array))throw B("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return k("Blob.toBase64",arguments,0),G(),v.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){k("Blob.toUint8Array",arguments,0),W();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Q(this._binaryString,t._binaryString)},t}(),X=E(Y,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),J=function(){function t(t,e){if(k("GeoPoint",arguments,2),N("GeoPoint","number",1,t),N("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new _(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Q(this._lat,t._lat)||Q(this._long,t._long)},t}(),Z=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Q(this.nanoseconds,t.nanoseconds):Q(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),$="(default)",tt=function(){function t(t,e){this.projectId=t,this.database=e||$}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===$},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Q(this.projectId,t.projectId)||Q(this.database,t.database)},t}(),et=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&m("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&m("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):m("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return g(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return g(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return g(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return g(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return g(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(et),rt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.isValidIdentifier=function(t){return rt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new _(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new _(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new _(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(et),ot=function(){function t(e){this.path=e,g(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===nt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return nt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new nt(e.slice()))},t.fromPathString=function(e){return new t(nt.fromString(e))},t.EMPTY=new t(new nt([])),t}(),st=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ot.comparator(t.key,e.key)},t}(),at=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.data=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return s.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):m("Trying to compare documents on fields that don't exist")},e}(st),ut=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return s.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(st),ct=function(t){function e(e,n){return t.call(this,e,n)||this}return s.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(st),lt=function(){function t(t,e){this.comparator=t,this.root=e||ft.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ht(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ht(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ht(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ht(this.root,t,this.comparator,!0)},t}(),ht=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){g(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw m("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw m("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw m("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}();ft.EMPTY=new(function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ft(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var dt=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),pt=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),yt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(pt.Estimate,n);case"previous":return new t(pt.Previous,n);case"none":case void 0:return new t(pt.Default,n);default:return m("fromSnapshotOptions() called with invalid options.")}},t}(),mt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return g(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,t.typeOrder)},t}(),gt=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=dt.NullValue,e.internalValue=null,e}return s.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(mt),vt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.BooleanValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(mt),bt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.NumberValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(mt);function wt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var _t=function(t){function e(e){return t.call(this,e)||this}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&wt(this.internalValue,t.internalValue)},e}(bt),Et=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return s.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&wt(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(bt),Tt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.StringValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Q(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(mt),Ct=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.TimestampValue,n}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof St?-1:this.defaultCompareTo(t)},e}(mt),St=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=dt.TimestampValue,r}return s.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===pt.Estimate?new Ct(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===pt.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Ct?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(mt),It=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.BlobValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(mt),xt=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=dt.RefValue,r}return s.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ot.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(mt),kt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.GeoPointValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(mt),At=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.ObjectValue,n}return s.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=Q(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(g(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(g(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){g(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new lt(Q)),e}(mt),Dt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=dt.ArrayValue,n}return s.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Q(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(mt),Nt=Number,Ot=Nt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Pt=Nt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Rt=Nt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Mt(t){return null===t||void 0===t}function Lt(t){return Rt(t)&&t<=Pt&&t>=Ot}var Ft=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Kt]:[new Qt(t),Kt];else{g(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:zt.ASCENDING)===zt.ASCENDING?Kt:Wt)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){g(null==this.getInequalityFilterField()||!(e instanceof qt)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),g(!ot.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){g(!ot.isDocumentKey(this.path),"No ordering allowed for document query"),g(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";Mt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Mt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return g(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Mt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof qt&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof qt&&t.op===Vt.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return ot.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return ot.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){g(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),jt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(gt.INSTANCE)){if(e!==Vt.EQUAL)throw new _(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Bt(t)}if(n.isEqual(Et.NAN)){if(e!==Vt.EQUAL)throw new _(w.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Ut(t)}return new qt(t,e,n)},t}(),Vt=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return m("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),qt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return s.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){g(this.value instanceof xt,"Comparing on key, but filter value not a RefValue"),g(this.op!==Vt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=ot.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},e.prototype.matchesValue=function(t){var e=this;return this.op===Vt.ARRAY_CONTAINS?t instanceof Dt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Vt.LESS_THAN:return t<0;case Vt.LESS_THAN_OR_EQUAL:return t<=0;case Vt.EQUAL:return 0===t;case Vt.GREATER_THAN:return t>0;case Vt.GREATER_THAN_OR_EQUAL:return t>=0;default:return m("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==Vt.EQUAL&&this.op!==Vt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(jt),Bt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(jt),Ut=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return s.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(jt),zt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ht=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){g(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())g(o instanceof xt,"Bound has a non-key value where the key path is being used."),n=ot.comparator(o.key,e.key);else{var s=e.field(i.field);g(void 0!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===zt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Qt=function(){function t(t,e){this.field=t,void 0===e&&(e=zt.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?at.compareByKey(t,e):at.compareByField(this.field,t,e);switch(this.dir){case zt.ASCENDING:return n;case zt.DESCENDING:return-1*n;default:return m("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Kt=new Qt(it.keyField(),zt.ASCENDING),Wt=new Qt(it.keyField(),zt.DESCENDING),Gt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Z(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Z(0,0)),t}(),Yt=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Xt=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Gt.MIN),void 0===o&&(o=b()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Jt=function(){function t(t){this.fields=t}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return K(this.fields,t.fields)},t}(),Zt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),$t=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),te=function(){function t(t,e){this.updateTime=t,this.exists=e,g(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof at&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof at:(g(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!==(e=this.updateTime)&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),ee=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&g(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof at?t.version:Gt.MIN},t}(),ne=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=$t.Set,i}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by SetMutation."),new at(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ee.getPostMutationVersion(t);return new at(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ee),re=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=$t.Patch,o}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new ct(this.key,e.version);var n=this.patchDocument(t);return new at(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ee.getPostMutationVersion(t),i=this.patchDocument(t);return new at(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof at?t.data:At.EMPTY)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e];if(!r.isEmpty()){var i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}}return t},e}(ee),ie=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=$t.Transform,r.precondition=te.exists(!0),r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),g(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new ct(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new at(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new at(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&K(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){g(t instanceof at,"Unknown MaybeDocument type "+t);var e=t;return g(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];g(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof at&&(s=t.field(i.field)||null),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],s=o.transform,a=null;e instanceof at&&(a=e.field(o.field)||null),n.push(s.applyToLocalView(a,t))}return n},e.prototype.transformObject=function(t,e){g(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(ee),oe=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=$t.Delete,r}return s.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),g(null==e.transformResults,"Transform results received by DeleteMutation."),new ut(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&g(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ut(this.key,Gt.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ee),se=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new St(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ae=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ce(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Dt(e)},t.prototype.isEqual=function(e){return e instanceof t&&K(e.elements,this.elements)},t}(),ue=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ce(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Dt(e)},t.prototype.isEqual=function(e){return e instanceof t&&K(e.elements,this.elements)},t}();function ce(t){return t instanceof Dt?t.internalValue.slice():[]}var le=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),he=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function fe(t){switch(t){case w.OK:return m("Treated status OK as error");case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return m("Unknown status code: "+t)}}function de(t){if(void 0===t)return p("GRPC error has no .code"),w.UNKNOWN;switch(t){case he.OK:return w.OK;case he.CANCELLED:return w.CANCELLED;case he.UNKNOWN:return w.UNKNOWN;case he.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case he.INTERNAL:return w.INTERNAL;case he.UNAVAILABLE:return w.UNAVAILABLE;case he.UNAUTHENTICATED:return w.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case he.NOT_FOUND:return w.NOT_FOUND;case he.ALREADY_EXISTS:return w.ALREADY_EXISTS;case he.PERMISSION_DENIED:return w.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case he.ABORTED:return w.ABORTED;case he.OUT_OF_RANGE:return w.OUT_OF_RANGE;case he.UNIMPLEMENTED:return w.UNIMPLEMENTED;case he.DATA_LOSS:return w.DATA_LOSS;default:return m("Unknown status code: "+t)}}var pe=function(){function t(t){this.comparator=t,this.data=new lt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ye=new lt(ot.comparator);function me(){return ye}var ge=new lt(ot.comparator);function ve(){return ge}var be=new lt(ot.comparator);function we(){return be}var _e=new pe(ot.comparator);function Ee(){return _e}var Te=new pe(Q);function Ce(){return Te}var Se=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ot.comparator(e.key,n.key)}:function(t,e){return ot.comparator(t.key,e.key)},this.keyedMap=ve(),this.sortedSet=new lt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ie=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),xe=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),ke=function(){function t(){this.changeMap=new lt(ot.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Ie.Added&&n.type===Ie.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Ie.Metadata&&n.type!==Ie.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Ie.Modified&&n.type===Ie.Modified?this.changeMap=this.changeMap.insert(e,{type:Ie.Modified,doc:t.doc}):t.type===Ie.Modified&&n.type===Ie.Added?this.changeMap=this.changeMap.insert(e,{type:Ie.Added,doc:t.doc}):t.type===Ie.Removed&&n.type===Ie.Added?this.changeMap=this.changeMap.remove(e):t.type===Ie.Removed&&n.type===Ie.Modified?this.changeMap=this.changeMap.insert(e,{type:Ie.Removed,doc:n.doc}):t.type===Ie.Added&&n.type===Ie.Removed?this.changeMap=this.changeMap.insert(e,{type:Ie.Modified,doc:t.doc}):m("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ae=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Ie.Added,doc:t})}),new t(e,n,Se.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),De=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Ne.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Gt.MIN,i,Ce(),me(),Ee())},t}(),Ne=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(b(),n,Ee(),Ee(),Ee())},t}(),Oe=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Pe=function(t,e){this.targetId=t,this.existenceFilter=e},Re=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Me=function(){return function(t,e,n,r){void 0===n&&(n=b()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Le=function(){function t(){this.pendingResponses=0,this.documentChanges=Ve(),this._resumeToken=b(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Ee(),e=Ee(),n=Ee();return this.documentChanges.forEach(function(r,i){switch(i){case Ie.Added:t=t.add(r);break;case Ie.Modified:e=e.add(r);break;case Ie.Removed:n=n.add(r);break;default:m("Encountered invalid change type: "+i)}}),new Ne(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Ve()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Fe=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=me(),this.pendingDocumentTargetMapping=je(),this.pendingTargetResets=new pe(Q)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof at?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ut&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Re.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Re.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Re.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),g(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Re.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Re.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:m("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):S(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ot(i.path);this.removeDocumentFromTarget(e,o,new ut(o,Gt.forDeletedDoc()))}else g(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};S(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new ot(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new ut(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Ee();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Yt.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new De(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=me(),this.pendingDocumentTargetMapping=je(),this.pendingTargetResets=new pe(Q),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Ie.Modified:Ie.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Ie.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Le),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new pe(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;g(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Le,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function je(){return new lt(ot.comparator)}function Ve(){return new lt(ot.comparator)}var qe,Be,Ue=((qe={})[zt.ASCENDING.name]="ASCENDING",qe[zt.DESCENDING.name]="DESCENDING",qe),ze=((Be={})[Vt.LESS_THAN.name]="LESS_THAN",Be[Vt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Be[Vt.GREATER_THAN.name]="GREATER_THAN",Be[Vt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Be[Vt.EQUAL.name]="EQUAL",Be[Vt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Be),He=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qe(t,e){g(!Mt(t),e+" is missing")}function Ke(t){return"number"==typeof t?t:"string"==typeof t?Number(t):m("can't parse "+t)}var We=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?w.UNKNOWN:de(t.code);return new _(e,t.message||"")},t.prototype.toInt32Value=function(t){return Mt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Mt(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);g(!!t,"Cannot deserialize null or undefined timestamp.");var e=Ke(t.seconds||"0");return new Z(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=He.exec(t);if(g(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Z(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(g(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y.fromBase64String(t)):(g(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Y.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return g(!!t,"Trying to deserialize version that isn't set"),Gt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=nt.fromString(t);return g(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return g(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),g(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ot(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?nt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new nt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new nt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return g(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof gt)return{nullValue:"NULL_VALUE"};if(t instanceof vt)return{booleanValue:t.value()};if(t instanceof _t)return{integerValue:""+t.value()};if(t instanceof Et){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Tt?{stringValue:t.value()}:t instanceof At?{mapValue:this.toMapValue(t)}:t instanceof Dt?{arrayValue:this.toArrayValue(t)}:t instanceof Ct?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof kt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof It?{bytesValue:this.toBytes(t.value())}:t instanceof xt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:m("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(Ge(t,n,"nullValue"))return gt.INSTANCE;if(Ge(t,n,"booleanValue"))return vt.of(t.booleanValue);if(Ge(t,n,"integerValue"))return new _t(Ke(t.integerValue));if(Ge(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Et.NAN;if("Infinity"===t.doubleValue)return Et.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Et.NEGATIVE_INFINITY}return new Et(t.doubleValue)}if(Ge(t,n,"stringValue"))return new Tt(t.stringValue);if(Ge(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(Ge(t,n,"arrayValue"))return Qe(t.arrayValue,"arrayValue"),new Dt((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(Ge(t,n,"timestampValue"))return Qe(t.timestampValue,"timestampValue"),new Ct(this.fromTimestamp(t.timestampValue));if(Ge(t,n,"geoPointValue"))return Qe(t.geoPointValue,"geoPointValue"),new kt(new J(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(Ge(t,n,"bytesValue")){Qe(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new It(r)}if(Ge(t,n,"referenceValue")){Qe(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new tt(i.get(1),i.get(3)),s=new ot(this.extractLocalPathFromResourceName(i));return new xt(o,s)}return m("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return g(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new at(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=At.EMPTY;return I(t,function(t,r){n=n.set(new it([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){g(!!t.found,"Tried to deserialize a found document from a missing document."),Qe(t.found.name,"doc.found.name"),Qe(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new at(e,n,r,{})},t.prototype.fromMissing=function(t){g(!!t.missing,"Tried to deserialize a missing document from a found document."),g(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ut(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return Ge(t,e,"found")?this.fromFound(t):Ge(t,e,"missing")?this.fromMissing(t):m("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Re.Added:return"ADD";case Re.Current:return"CURRENT";case Re.NoChange:return"NO_CHANGE";case Re.Removed:return"REMOVE";case Re.Reset:return"RESET";default:return m("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Pe)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Oe){var e;if(t.newDoc instanceof at)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof ut)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Me){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return he.OK;switch(t){case w.OK:return he.OK;case w.CANCELLED:return he.CANCELLED;case w.UNKNOWN:return he.UNKNOWN;case w.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case w.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case w.INTERNAL:return he.INTERNAL;case w.UNAVAILABLE:return he.UNAVAILABLE;case w.UNAUTHENTICATED:return he.UNAUTHENTICATED;case w.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case w.NOT_FOUND:return he.NOT_FOUND;case w.ALREADY_EXISTS:return he.ALREADY_EXISTS;case w.PERMISSION_DENIED:return he.PERMISSION_DENIED;case w.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case w.ABORTED:return he.ABORTED;case w.OUT_OF_RANGE:return he.OUT_OF_RANGE;case w.UNIMPLEMENTED:return he.UNIMPLEMENTED;case w.DATA_LOSS:return he.DATA_LOSS;default:return m("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return m("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(Ge(t,n,"targetChange")){Qe(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new Me(r,i,o,a||null)}else if(Ge(t,n,"documentChange")){Qe(t.documentChange,"documentChange"),Qe(t.documentChange.document,"documentChange.name"),Qe(t.documentChange.document.name,"documentChange.document.name"),Qe(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new at(c,l,h,{});e=new Oe(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if(Ge(t,n,"documentDelete")){Qe(t.documentDelete,"documentDelete"),Qe(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Gt.forDeletedDoc(),f=new ut(c,l),e=new Oe([],d.removedTargetIds||[],f.key,f)}else if(Ge(t,n,"documentRemove")){Qe(t.documentRemove,"documentRemove"),Qe(t.documentRemove.document,"documentRemove");var p=t.documentRemove;c=this.fromName(p.document),e=new Oe([],p.removedTargetIds||[],c,null)}else{if(!Ge(t,n,"filter"))return m("Unknown change type "+JSON.stringify(t));Qe(t.filter,"filter"),Qe(t.filter.targetId,"filter.targetId");var y=t.filter,g=new le(y.count||0);e=new Pe(y.targetId,g)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Re.NoChange:"ADD"===t?Re.Added:"REMOVE"===t?Re.Removed:"CURRENT"===t?Re.Current:"RESET"===t?Re.Reset:m("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!Ge(t,t.response_type,"targetChange"))return Gt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gt.MIN:e.readTime?this.fromVersion(e.readTime):Gt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ne)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof oe)e={delete:this.toName(t.key)};else if(t instanceof re)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof ie))return m("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):te.NONE;if(t.update){Qe(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new re(r,i,o,n)}return new ne(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new oe(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return g(!0===n.exists,'Transforms only support precondition "exists == true"'),new ie(r,s)}return m("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return g(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:m("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?te.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?te.exists(t.exists):te.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(g(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof se)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ae)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ue)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw m("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;Ge(t,n,"setToServerValue")?(g("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=se.instance):Ge(t,n,"appendMissingElements")?r=new ae((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)})):Ge(t,n,"removeAllFromArray")?r=new ue((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)})):m("Unknown transform proto: "+JSON.stringify(t));var i=it.fromServerFormat(t.fieldPath);return new Zt(i,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return g(1===e,"DocumentsTarget contained other than 1 document: "+e),Ft.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(nt.EMPTY_PATH);else{var n=t.path;g(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(g(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var a=null;n.startAt&&(a=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new Ft(e,o,i,s,a,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Yt.Listen:return null;case Yt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Yt.LimboResolution:return"limbo-document";default:return m("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof qt?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):m("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Ht(r,n)},t.prototype.toDirection=function(t){return Ue[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return zt.ASCENDING;case"DESCENDING":return zt.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return ze[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Vt.EQUAL;case"GREATER_THAN":return Vt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Vt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Vt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Vt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Vt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return m("Unspecified relation");default:return m("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return it.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Qt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof qt?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:m("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new qt(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Ut?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Bt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:m("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Ut(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Bt(n);case"OPERATOR_UNSPECIFIED":return m("Unspecified filter");default:return m("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return it.fromServerFormat(t)});return new Jt(e)},t}();function Ge(t,e,n){return e===n||!e&&n in t}var Ye=Error.captureStackTrace,Xe=function(){return function(t,e){if(this.code=t,this.message=e,Ye)Ye(this,Je.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();Xe.prototype=Object.create(Error.prototype),Xe.prototype.constructor=Xe,Xe.prototype.name="FirebaseError";var Je=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var o=new Xe(i,n=this.serviceName+": "+n+" ("+i+").");for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}(),Ze=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){g(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){g(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){g(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){g(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){g(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){g(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),$e="Connection",tn={BatchGetDocuments:"batchGet",Commit:"commit"},en="gl-js/ fire/"+u,nn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new a.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=en},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,s){r.pool.getObject(function(u){u.listenOnce(a.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case a.ErrorCode.NO_ERROR:var e=u.getResponseJson();d($e,"XHR received:",JSON.stringify(e)),o(e);break;case a.ErrorCode.TIMEOUT:d($e,'RPC "'+t+'" timed out'),s(new _(w.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:var n=u.getStatus();d($e,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0?s(new _(function(t){switch(t){case 200:return w.OK;case 400:return w.INVALID_ARGUMENT;case 401:return w.UNAUTHENTICATED;case 403:return w.PERMISSION_DENIED;case 404:return w.NOT_FOUND;case 409:return w.ABORTED;case 416:return w.OUT_OF_RANGE;case 429:return w.RESOURCE_EXHAUSTED;case 499:return w.CANCELLED;case 500:return w.UNKNOWN;case 501:return w.UNIMPLEMENTED;case 503:return w.UNAVAILABLE;case 504:return w.DEADLINE_EXCEEDED;default:return t>=200&&t<300?w.OK:t>=400&&t<500?w.FAILED_PRECONDITION:t>=500&&t<600?w.INTERNAL:w.UNKNOWN}}(n),"Server responded with status "+u.getStatusText())):(d($e,'RPC "'+t+'" failed'),s(new _(w.UNAVAILABLE,"Connection failed.")));break;default:m('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{d($e,'RPC "'+t+'" completed.'),r.pool.releaseObject(u)}});var c=JSON.stringify(e);d($e,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),u.send(i,"POST",c,l,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=a.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d($e,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new Ze({sendFn:function(t){c?d($e,"Not sending because WebChannel is closed:",t):(u||(d($e,"Opening WebChannel transport."),s.open(),u=!0),d($e,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),h=function(t,e){s.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a.WebChannel.EventType.OPEN,function(){c||d($e,"WebChannel transport opened.")}),h(a.WebChannel.EventType.CLOSE,function(){c||(c=!0,d($e,"WebChannel transport closed"),l.callOnClose())}),h(a.WebChannel.EventType.ERROR,function(t){c||(c=!0,d($e,"WebChannel transport errored:",t),l.callOnClose(new _(w.UNAVAILABLE,"The operation could not be completed")))}),h(a.WebChannel.EventType.MESSAGE,function(t){if(!c){var e=t.data[0];g(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){d($e,"WebChannel received error:",n);var r=n.status,i=function(t){var e=he[r];if(void 0!==e)return de(e)}(),o=n.message;void 0===i&&(i=w.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),c=!0,l.callOnClose(new _(i,o)),s.close()}else d($e,"WebChannel received:",e),l.callOnMessage(e)}}),setTimeout(function(){l.callOnOpen()},0),l},t.prototype.makeUrl=function(t){var e=tn[t];g(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();v.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new nn(t))},t.prototype.newSerializer=function(t){return new We(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var rn,on=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),sn=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh"}(rn||(rn={}));var an=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),un=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw p("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),g(e>=0,"Attempted to schedule an operation with a negative delay of "+e),g(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=an.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&m("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){g(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){g(t===rn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==rn.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);g(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),cn="\x01",ln="\x01",hn="\x10",fn="\x11";function dn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=yn(e)),e=pn(t.get(n),e);return yn(e)}function pn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=cn+hn;break;case cn:n+=cn+fn;break;default:n+=o}}return n}function yn(t){return t+cn+ln}function mn(t){var e=t.length;if(g(e>=2,"Invalid path "+t),2===e)return g(t.charAt(0)===cn&&t.charAt(1)===ln,"Non-empty path "+t+" had length 2"),nt.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(cn,o);switch((s<0||s>n)&&m('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case ln:var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case hn:i+=t.substring(o,s),i+="\0";break;case fn:i+=t.substring(o,s+1);break;default:m('Invalid encoded resource path: "'+t+'"')}o=s+2}return new nt(r)}var gn=-1,vn=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n,g(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&g(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;g(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&g(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=Ee(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&K(this.mutations,t.mutations)},t}(),bn=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){g(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=we(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),wn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&m("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),_n=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){I(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return x(this.inner)},t}(),En=function(){function t(){this.changes=me(),this.documentSizes=new _n(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?wn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return g(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Tn=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return g(t.isAvailable(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",e),new wn(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new _(w.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){o(t.target.error)},s.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Sn(s.transaction);r.createOrUpgrade(n,i,t.oldVersion,Ln).next(function(){d("SimpleDb","Database upgrade to version "+Ln+" complete")})}}).toPromise()},t.delete=function(t){return d("SimpleDb","Removing database:",t),xn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=Sn.open(this.db,t,e),i=n(r).catch(function(t){r.abort(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Cn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return xn(this.dbCursor.delete())},t}(),Sn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new sn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return g(!!e,"Object store not part of transaction: "+t),new In(e)},t}(),In=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),xn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),xn(this.store.add(t))},t.prototype.get=function(t){var e=this;return xn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),xn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),xn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new wn(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new wn(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Cn(i),s=e(i.primaryKey,i.value,o);if(s instanceof wn){var a=s.catch(function(t){return o.done(),wn.reject(t)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return wn.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(g(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function xn(t){return new wn(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var kn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",An=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Tn.getStore(t,Gn.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=On(t),o=Ee(),s=0,a=e;s<a.length;s++){var u=a[s],c=u.key,l=u.doc;r.push(i.put(Rn(c),l)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(Pn(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return wn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=On(t),r=Rn(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return Mn(t)}):wn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return On(t).get(Rn(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return On(t).get(Rn(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:Mn(t)}:null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=ve(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return On(t).iterate({range:o},function(t,i,o){var s=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(s.key.path)?s instanceof at&&e.matches(s)&&(r=r.insert(s.key,s)):o.done()}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;g(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Ee(),r=me(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,s=Pn(t);return s.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(s).next(function(){return wn.reject(new _(w.DATA_LOSS,kn))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new ut(n,Gt.forDeletedDoc());r=r.insert(n,e)}))}),wn.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Pn(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new Nn(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Dn(t).get(zn.key).next(function(t){return g(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Dn(t).put(zn.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function Dn(t){return _r.getStore(t,zn.store)}var Nn=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentCache.serializer.toDbRemoteDocument(i),s=e.documentSizes.get(t);g(void 0!==s,"Attempting to change document "+t.toString()+" without having read it first");var a=Mn(o);n+=a-s,r.push({key:t,doc:o})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e}(En);function On(t){return _r.getStore(t,Un.store)}function Pn(t){return _r.getStore(t,Gn.store)}function Rn(t){return t.path.toArray()}function Mn(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Ln=6,Fn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=Ln,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(jn.store)}(t),function(t){t.createObjectStore(Vn.store,{keyPath:Vn.keyPath}),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Bn.store)}(t),Wn(t),function(t){t.createObjectStore(Un.store)}(t));var o=wn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qn.store),t.deleteObjectStore(Hn.store),t.deleteObjectStore(Kn.store)}(t),Wn(t)),o=o.next(function(){return function(t){var e=t.store(Kn.store),n=new Kn(0,0,Gt.MIN.toTimestamp(),0);return e.put(Kn.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(qn.store).loadAll().next(function(n){t.deleteObjectStore(qn.store),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var r=e.store(qn.store),i=n.map(function(t){return r.put(t)});return wn.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(t),function(t){t.createObjectStore(Gn.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(zn.store)}(t),i.addDocumentGlobal(e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Un.store).iterate(function(t,n){e+=Mn(n)}).next(function(){var n=new zn(e);return t.store(zn.store).put(zn.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Vn.store),r=t.store(qn.store);return n.loadAll().next(function(n){return wn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,gn],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(qn.userMutationsIndex,i).next(function(r){return wn.forEach(r,function(r){g(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return $n(t,n.userId,i).next(function(){})})})})})},t}(),jn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Vn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),qn=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Bn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,dn(e)]},t.key=function(t,e,n){return[t,dn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Un=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),zn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Hn=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Qn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,g(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Kn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function Wn(t){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath}).createIndex(Qn.documentTargetsIndex,Qn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.queryTargetsIndexName,Hn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Kn.store)}var Gn=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),Yn=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),Xn=[Vn.store,qn.store,Bn.store,Un.store,Hn.store,jn.store,Kn.store,Qn.store].concat([Yn.store,Gn.store]).concat([zn.store]),Jn=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r){return g(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return er(t).iterate({index:qn.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(r){var i=e.batchId;return g(i>r.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),r.lastAcknowledgedBatchId=i,r.lastStreamToken=tr(n),rr(t).put(r)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=tr(e),rr(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=nr(t),o=er(t);return o.add({}).next(function(t){g("number"==typeof t,"Auto-generated key is not a number");var s=new vn(t,e,n),a=r.serializer.toDbMutationBatch(r.userId,s);r.documentKeysByBatchId[t]=s.keys();for(var u=[],c=0,l=n;c<l.length;c++){var h=Bn.key(r.userId,l[c].key.path,t);u.push(o.put(a)),u.push(i.put(h,Bn.PLACEHOLDER))}return wn.waitFor(u).next(function(){return s})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return er(t).get(e).next(function(t){return t?(g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?wn.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=Math.max(e,r.lastAcknowledgedBatchId)+1,o=IDBKeyRange.lowerBound([n.userId,i]),s=null;return er(t).iterate({index:qn.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(g(e.batchId>=i,"Should have found mutation after "+i),s=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return s})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,gn],[this.userId,Number.POSITIVE_INFINITY]);return er(t).loadAll(qn.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Bn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nr(t).iterate({range:i},function(r,i,s){var a=r[0],u=r[2],c=mn(r[1]);if(a===n.userId&&e.path.isEqual(c))return er(t).get(u).next(function(t){if(!t)throw m("Dangling document-mutation reference found: "+r+" which points to "+u);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pe(Q),i=[];return e.forEach(function(e){var o=Bn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=nr(t).iterate({range:s},function(t,i,o){var s=t[0],a=t[2],u=mn(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),wn.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;g(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=Bn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new pe(Q);return nr(t).iterate({range:s},function(t,e,o){var s=t[0],u=t[2],c=mn(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(er(t).get(e).next(function(t){if(null===t)throw m("Dangling document-mutation reference found, which points to "+e);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),wn.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return $n(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),wn.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return wn.resolve();var r=IDBKeyRange.lowerBound(Bn.prefixForUser(e.userId)),i=[];return nr(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=mn(t[1]);i.push(o)}else r.done()}).next(function(){g(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Zn(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return rr(t).get(this.userId).next(function(t){return t||new Vn(e.userId,gn,"")})},t}();function Zn(t,e,n){var r=Bn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return nr(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function $n(t,e,n){var r=t.store(qn.store),i=t.store(Bn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){g(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Bn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return wn.waitFor(o).next(function(){return c})}function tr(t){return t instanceof Uint8Array?(g("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function er(t){return _r.getStore(t,qn.store)}function nr(t){return _r.getStore(t,Bn.store)}function rr(t){return _r.getStore(t,Vn.store)}var ir=1,or=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),sr=function(){function t(t,e){this.generatorId=t,g((t&ir)===t,"Generator ID "+t+" contains more than "+ir+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<ir,t},t.prototype.after=function(t){return this.seek(t+(1<<ir)),this.next()},t.prototype.seek=function(t){g((t&ir)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(or.QueryCache,2)},t.forSyncEngine=function(){return new t(or.SyncEngine)},t}(),ar=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=sr.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Gt.fromTimestamp(new Z(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return lr(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ur(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return g(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ur(t).iterate(function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return wn.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return ur(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return cr(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,_r.getStore(n,Kn.store)).put(Kn.key,e);var n},t.prototype.saveQueryData=function(t,e){return ur(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ur(t).iterate({range:i,index:Hn.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=hr(t);return e.forEach(function(e){var s=dn(e.path);i.push(o.put(new Qn(n,s))),i.push(r.referenceDelegate.addReference(t,e))}),wn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=hr(t);return wn.forEach(e,function(e){var o=dn(e.path);return wn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=hr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hr(t),i=Ee();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=mn(t[1]),o=new ot(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n,r=dn(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return hr(t).iterate({index:Qn.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){0!==t[0]&&(o++,n.done())}).next(function(){return o>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return ur(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function ur(t){return _r.getStore(t,Hn.store)}function cr(t){return Tn.getStore(t,Kn.store).get(Kn.key).next(function(t){return g(null!==t,"Missing metadata row."),t})}function lr(t){return cr(t).next(function(t){return t.highestListenSequenceNumber})}function hr(t){return _r.getStore(t,Qn.store)}var fr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ot.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ut(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ot.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new ct(e,n)):m("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof at){var e=this.remoteSerializer.toDocument(t);return new Un(null,null,e,i=t.hasCommittedMutations)}if(t instanceof ut){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new Un(null,new function(t,e){this.path=t,this.readTime=e}(n,r),null,i)}return t instanceof ct?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new Un(new function(t,e){this.path=t,this.version=e}(n,r),null,null,!0)):m("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new function(t,e){this.seconds=t,this.nanoseconds=e}(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Z(t.seconds,t.nanoseconds);return Gt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new qn(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=Z.fromMillis(t.localWriteTimeMs);return new vn(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(dn(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Ee(),n=0,r=t;n<r.length;n++)e=e.add(new ot(mn(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Xt(e,t.targetId,Yt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){g(Yt.Listen===t.purpose,"Only queries with purpose "+Yt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(g("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new Hn(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function dr(t,e){var n=t[1],r=e[1],i=Q(t[0],e[0]);return 0===i?Q(n,r):i}var pr=function(){function t(t){this.maxElements=t,this.buffer=new pe(dr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();dr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),yr=function(){function t(t){this.delegate=t}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getTargetCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return wn.resolve(on.INVALID);var r=new pr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t}(),mr="IndexedDbPersistence",gr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",br="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",wr=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return s.__extends(e,t),e}(function(){}),_r=function(){function t(e,n,r,i,o,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new _(w.UNIMPLEMENTED,br);if(this.referenceDelegate=new Sr(this),this.dbName=e+t.MAIN_DATABASE,this.serializer=new fr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new ar(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new An(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new _(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof wr)return Tn.getStore(t.simpleDbTransaction,e);throw m("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o){return s.__awaiter(this,void 0,void 0,function(){var a;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(a=new t(e,n,r,i,o)).start()];case 1:return s.sent(),[2,a]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,a){return s.__awaiter(this,void 0,void 0,function(){var u;return s.__generator(this,function(s){switch(s.label){case 0:return[4,(u=new t(e,n,r,i,o,a)).start()];case 1:return s.sent(),[2,u]}})})},t.prototype.start=function(){var t=this;return g(!this.started,"IndexedDbPersistence double-started!"),g(null!==this.window,"Expected 'window' to be defined"),Tn.openOrCreate(this.dbName,Ln,new Fn(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[Kn.store],function(e){return lr(e).next(function(e){t.listenSequence=new on(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",Xn,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",Xn,function(e){return Cr(e).put(new Yn(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return Tr(t).get(jn.key).next(function(t){return wn.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return Cr(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return s.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return s.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,Yn.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return wn.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(rn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Tr(t).get(jn.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,vr);return!1}}return!(!e.networkEnabled||!e.inForeground)||Cr(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&d(mr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[jn.store,Yn.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,Tn.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[Yn.store],function(e){return Cr(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return g(this.started,"Cannot initialize MutationQueue before persistence is started."),Jn.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return g(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return g(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;return d(mr,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",Xn,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw p("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new _(w.FAILED_PRECONDITION,gr);return n(new wr(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new wr(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Tr(t).get(jn.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,vr)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new jn(this.clientId,this.allowTabSynchronization,Date.now());return Tr(t).put(jn.key,e)},t.isAvailable=function(){return Tn.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Tr(t);return n.get(jn.key).next(function(t){return e.isLocalClient(t)?(d(mr,"Releasing primary lease."),n.delete(jn.key)):wn.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(g(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(g("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return d(mr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return p(mr,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Er(t){return t.code===w.FAILED_PRECONDITION&&t.message===gr}function Tr(t){return t.store(jn.store)}function Cr(t){return t.store(Yn.store)}var Sr=function(){function t(t){this.db=t,this.garbageCollector=new yr(this)}return t.prototype.getTargetCount=function(t){return this.db.getQueryCache().getQueryCount(t)},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Ir(t,e)},t.prototype.removeReference=function(t,e){return Ir(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Ir(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?wn.resolve(!0):function(t,e){var n=!1;return rr(t).iterateSerial(function(r){return Zn(t,r,e).next(function(t){return t&&(n=!0),wn.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(s,a){if(a<=e){var u=n.isPinned(t,s).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,s).next(function(t){i+=t})});o.push(u)}}).next(function(){return wn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return wn.waitFor([hr(t).delete((n=e,[0,dn(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ir(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=hr(t),i=on.INVALID;return r.iterate({index:Qn.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==on.INVALID&&e(new ot(mn(n)),i),i=s,n=o):i=on.INVALID}).next(function(){i!==on.INVALID&&e(new ot(mn(n)),i)})},t}();function Ir(t,e){return hr(t).put(function(t,e){return new Qn(0,dn(t.path),e)}(e,t.currentSequenceNumber))}var xr=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.getDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=[],o=me();return e.forEach(function(e){i.push(n.getDocumentInternal(t,e,r).next(function(t){t||(t=new ut(e,Gt.forDeletedDoc())),o=o.insert(e,t)}))}),wn.waitFor(i).next(function(){return o})})},t.prototype.getDocumentsMatchingQuery=function(t,e){return ot.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ot(e)).next(function(t){var e=ve();return t instanceof at&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key;if(e.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof at?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),kr=function(){function t(){this.refsByKey=new pe(Ar.compareByKey),this.refsByTarget=new pe(Ar.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ar(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Ar(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ot.EMPTY,r=new Ar(n,t),i=new Ar(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ot.EMPTY,n=new Ar(e,t),r=new Ar(e,t+1),i=Ee();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ar(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ar=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ot.comparator(t.key,e.key)||Q(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Q(t.targetOrBatchId,e.targetOrBatchId)||ot.comparator(t.key,e.key)},t}(),Dr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new kr,this.queryDataByTarget={},g(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new xr(this.remoteDocuments,this.mutationQueue)}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new xr(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],s=Ee(),a=0,u=r;a<u.length;a++){i.push((d=u[a]).batchId);for(var c=0,l=d.mutations;c<l.length;c++)s=s.add(l[c].key)}for(var h=0,f=t;h<f.length;h++){var d;o.push((d=f[h]).batchId);for(var p=0,y=d.mutations;p<y.length;p++)s=s.add(y[p].key)}return e.localDocuments.getDocuments(n,s).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=Z.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):wn.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return g(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],s=Ee();S(e.targetChanges,function(r,a){var u=n.queryDataByTarget[r];if(u){a.addedDocuments.forEach(function(t){s=s.add(t)}),a.modifiedDocuments.forEach(function(t){s=s.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,a.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,a.addedDocuments,r)}));var c=a.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(l,u,a)&&o.push(n.queryCache.updateQueryData(i,u))}}});var a=Ee();e.documentUpdates.forEach(function(t,u){a=a.add(t),o.push(r.getEntry(i,t).next(function(e){null==e||u.version.isEqual(Gt.MIN)||s.has(u.key)&&!e.hasPendingWrites||u.version.compareTo(e.version)>=0?r.addEntry(u):d("LocalStore","Ignoring outdated watch update for ",t,". Current version:",e.version," Watch version:",u.version)})),e.resolvedLimboDocuments.has(t)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,t))});var u=e.snapshotVersion;if(!u.isEqual(Gt.MIN)){var c=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return g(u.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,u)});o.push(c)}return wn.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getDocuments(i,a)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return wn.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),wn.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=gn),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,wn.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Xt(t,i,Yt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return g(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){g(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,s=n.queryDataByTarget[o],a=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?wn.resolve():wn.forEach(a,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,s)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=wn.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,s=e.docVersions.get(r);g(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):g(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Nr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=gn,this.lastStreamToken=b(),this.batchesByDocumentKey=new pe(Ar.compareByKey)}return t.prototype.checkEmpty=function(t){return wn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;g(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged");g(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return g(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,wn.resolve()},t.prototype.getLastStreamToken=function(t){return wn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,wn.resolve()},t.prototype.addMutationBatch=function(t,e,n){g(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&g(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new vn(r,e,n);this.mutationQueue.push(i);for(var o=0,s=n;o<s.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ar(s[o].key,r));return wn.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return wn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return g(null!=n,"Failed to find local mutation batch."),wn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=Math.max(e,this.highestAcknowledgedBatchId)+1,r=this.indexOfBatchId(n),i=r<0?0:r;return wn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return wn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ar(e,0),i=new Ar(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){g(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);g(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),wn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pe(Q);return e.forEach(function(t){var e=new Ar(t,0),i=new Ar(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){g(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),wn.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ot.isDocumentKey(i)||(i=i.child(""));var o=new Ar(new ot(i),0),s=new pe(Q);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),wn.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;g(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wn.forEach(e.mutations,function(i){var o=new Ar(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Ar(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&g(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return g(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return g(n.batchId===t,"If found batch must match"),n},t}(),Or=function(){function t(t){this.persistence=t,this.queries=new _n(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Gt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new kr,this.targetCount=0,this.targetIdGenerator=sr.forQueryCache()}return t.prototype.getTargetCount=function(t){return wn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),wn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return wn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return wn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,wn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),wn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return g(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,wn.resolve()},t.prototype.updateQueryData=function(t,e){return g(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),wn.resolve()},t.prototype.removeQueryData=function(t,e){return g(this.targetCount>0,"Removing a target from an empty cache"),g(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,wn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&!n[a.targetId]&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),wn.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return wn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return wn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return m("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),wn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),wn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),wn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return wn.resolve(n)},t.prototype.containsKey=function(t,e){return wn.resolve(this.references.containsKey(e))},t}(),Pr=function(){function t(t){this.sizer=t,this.docs=new lt(ot.comparator),this.newDocumentChanges=Ee(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],s=o.maybeDocument.key;this.docs=this.docs.insert(s,o),this.newDocumentChanges=this.newDocumentChanges.add(s)}return this.size+=n,wn.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,wn.resolve(n.size)):wn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return wn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return wn.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=ve(),r=new ot(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),s=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;s instanceof at&&e.matches(s)&&(n=n.insert(s.key,s))}return wn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return wn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=me();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new ut(t,Gt.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=Ee(),wn.resolve(n)},t.prototype.newChangeBuffer=function(){return new Rr(this.sizer,this)},t.prototype.getSize=function(t){return wn.resolve(this.size)},t}(),Rr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return s.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentSizes.get(t);g(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var s=e.sizer(i);n+=s-o,r.push({maybeDocument:i,size:s})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e}(En),Mr=function(){function t(t,e,n){var r=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new on(0),this._started=!1,this._started=!0,this.referenceDelegate=e?new Fr(this):new jr(this,new fr(n)),this.queryCache=new Or(this),this.remoteDocumentCache=new Pr(function(t){return r.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n){return new t(e,!1,n)},t.createEagerPersistence=function(e,n){return new t(e,!0,n)},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Nr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new Lr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return wn.or((n=this.mutationQueues,r=[],I(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),Lr=function(t){this.currentSequenceNumber=t},Fr=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),wn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),wn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),wn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return wn.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?wn.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return wn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return wn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),jr=function(){function t(t,e){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new _n(function(t){return dn(t.path)}),this.garbageCollector=new yr(this)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return wn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getTargetCount=function(t){return this.persistence.getQueryCache().getTargetCount(t)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return wn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?wn.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?wn.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),wn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),wn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),wn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),wn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw m("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return wn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return wn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return wn.resolve(void 0!==t&&t>n)}])},t}(),Vr=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),qr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),Br=1e3,Ur=6e4,zr=1.5,Hr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=qr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Vr(t,e,Br,zr,Ur)}return t.prototype.isStarted=function(){return this.state===qr.Starting||this.state===qr.Open||this.state===qr.Backoff},t.prototype.isOpen=function(){return this.state===qr.Open},t.prototype.start=function(){this.state!==qr.Error?(g(this.state===qr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(qr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){g(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=qr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.isOpen()?[2,this.close(qr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(n){switch(n.label){case 0:return g(this.isStarted(),"Only started streams should be closed."),g(t===qr.Error||Mt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==qr.Error?this.backoff.reset():e&&e.code===w.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===w.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;g(this.state===qr.Initial,"Must be in initial state to auth"),this.state=qr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new _(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;g(this.state===qr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return g(e.state===qr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=qr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;g(this.state===qr.Error,"Should only perform backoff when in Error state"),this.state=qr.Backoff,this.backoff.backoffAndRun(function(){return s.__awaiter(t,void 0,void 0,function(){return s.__generator(this,function(t){return g(this.state===qr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=qr.Initial,this.start(),g(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return g(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(qr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Qr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,rn.ListenStreamConnectionBackoff,rn.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return s.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Hr),Kr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,rn.WriteStreamConnectionBackoff,rn.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s}return s.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return g(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){g(this.isOpen(),"Writing handshake requires an opened stream"),g(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;g(this.isOpen(),"Writing mutations requires an opened stream"),g(this.handshakeComplete_,"Handshake must be complete before writing mutations"),g(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Hr),Wr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Kr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Qr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=me();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);g(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===w.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),Gr=function(){function t(t){this.datastore=t,this.readVersions=we(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof at)e=t.version;else{if(!(t instanceof ut))throw m("Document in a transaction was a "+t.constructor.name);e=Gt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new _(w.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof ut||t instanceof at?e.recordVersion(t):m("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new _(w.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?te.updateTime(e):te.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Gt.forDeletedDoc()))throw new _(w.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?te.updateTime(e):te.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new oe(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Gt.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),Yr=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),Xr=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),Jr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=Yr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Yr.Unknown),g(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(rn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,g(t.state===Yr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(Yr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===Yr.Online?(this.setAndBroadcast(Yr.Unknown),g(0===this.watchStreamFailures,"watchStreamFailures must be 0"),g(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(Yr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===Yr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(p(e),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),Zr=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new Jr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Yr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Yr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(d("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Yr.Unknown),[2]}})})},t.prototype.listen=function(t){g(!T(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){g(T(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),x(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Yr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){g(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Fe(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!x(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){var t=this;return s.__generator(this,function(e){return S(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return void 0===t&&g(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Yr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n;return s.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Yr.Online),t instanceof Me&&t.state===Re.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Oe?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Pe?this.watchChangeAggregator.handleExistenceFilter(t):(g(t instanceof Me,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Gt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;g(!t.isEqual(Gt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return S(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:b()}),e.sendUnwatchRequest(t);var r=new Xt(n.query,t,Yt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;g(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){return T(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return s.__awaiter(this,void 0,void 0,function(){var t;return s.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:gn)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){g(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){g(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){if(!Er(t))throw t;d("RemoteStore","Unexpectedly lost primary lease")},t.prototype.onMutationResult=function(t,e){var n=this;g(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=bn.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return void 0===t&&g(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e=this;return s.__generator(this,function(n){return fe(t.code)||t.code===w.ABORTED?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=b(),[2,this.localStore.setLastStreamToken(b()).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})]):[2]})})},t.prototype.handleWriteError=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){return fe(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new Gr(this.datastore)},t.prototype.handleCredentialChange=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(d("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(Yr.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Yr.Unknown),e.label=4;case 4:return[2]}})})},t}(),$r=function(){function t(t){this.syncEngine=t,this.queries=new _n(function(t){return t.canonicalId()}),this.onlineState=Yr.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return s.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,s=i.listeners;o<s.length;o++)s[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),ti=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=Yr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(g(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Ie.Metadata&&e.push(i)}t=new Ae(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return g(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==Yr.Offline?(g(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===Yr.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){g(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ae.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),ei=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=Ee(),i=Ee(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Ie.Added:r=r.add(a.doc.key);break;case Ie.Removed:i=i.add(a.doc.key)}}return new t(e,r,i)},t}(),ni=function(t){this.key=t},ri=function(t){this.key=t},ii=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Ee(),this.mutatedKeys=Ee(),this.documentSet=new Se(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new ke,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof at?e:null;l&&(g(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:Ie.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Ie.Modified,doc:l}),d=!0,u&&n.query.docComparator(l,u)>0&&(a=!0)):!c&&l?(r.track({type:Ie.Added,doc:l}),d=!0):c&&!l&&(r.track({type:Ie.Removed,doc:c}),d=!0,u&&(a=!0)),d&&(l?(s=s.add(l),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var c=s.last();s=s.delete(c.key),o=o.delete(c.key),r.track({type:Ie.Removed,doc:c})}return g(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;g(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Ie.Added:return 1;case Ie.Modified:case Ie.Metadata:return 2;case Ie.Removed:return 0;default:return m("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?xe.Synced:xe.Local,u=a!==this.syncState;return this.syncState=a,0!==o.length||u?{snapshot:new Ae(this.query,t.documentSet,i,o,t.mutatedKeys,a===xe.Local,u,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===Yr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ke,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return g(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Ee(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new ri(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new ni(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Ee();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Ae.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===xe.Local)},t}(),oi=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new _n(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new lt(ot.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new kr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=sr.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Yr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){g(null!==t,"SyncEngine listener cannot be null"),g(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var s=new ii(r,o),a=s.computeDocChanges(i),u=Ne.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==Yr.Offline),c=s.applyChanges(a,!0===n.isPrimary,u);g(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),g(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new function(t,e,n){this.query=t,this.targetId=e,this.view=n}(r,t.targetId,s);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[t.targetId]=l,c.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return s.__awaiter(e,void 0,void 0,function(){var e;return s.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n=this;return s.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),g(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),g(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!Mt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return I(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(g(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?g(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(g(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===Xr.RemoteStore||!this.isPrimary&&e===Xr.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);g(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new lt(ot.comparator)).insert(r,new ut(r,Gt.forDeletedDoc())),o=Ee().add(r),a=new De(Gt.MIN,{},new pe(Q),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return g(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return c.removeAndCleanupQuery(u)}).catch(function(t){return c.ignoreIfPrimaryLeaseLoss(t)})];case 2:s.sent(),this.syncEngineListener.onWatchError(u.query,e),s.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):m("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new lt(Q)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(g(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ni?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof ri?(d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):m("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Ft.atPath(e.path);this.limboResolutionsByTarget[n]=new function(t){this.key=t}(e),this.remoteStore.listen(new Xt(r,n,Yt.LimboResolution,on.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return s.__generator(this,function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(s,a){i.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query).then(function(t){return a.view.computeDocChanges(t,e)}):e}).then(function(t){var i=a.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[a.targetId]);if(o.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var s=ei.fromSnapshot(a.targetId,i.snapshot);r.push(s)}}))}),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}})})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){if(!Er(t))throw t;return d("SyncEngine","Unexpectedly lost primary lease"),[2]})})},t.prototype.assertSubscribed=function(t){g(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n;return s.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return s.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,u=this;return s.__generator(this,function(s){switch(s.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return s.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=s.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],a=Promise.resolve(),S(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):a=a.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return s.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return s.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:s.sent(),s.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;S(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new lt(ot.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,o,a;return s.__generator(this,function(s){switch(s.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=s.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return g(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return g(!!(a=s.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return e=s.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(e),[2]}})})})},a=0,u=t;a<u.length;a++)o(u[a]);return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return s.__awaiter(this,void 0,void 0,function(){var r,i=this;return s.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return s.__awaiter(i,void 0,void 0,function(){var r;return s.__generator(this,function(i){switch(i.label){case 0:return r=De.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return s.__awaiter(i,void 0,void 0,function(){var e;return s.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===w.DATA_LOSS&&t.message===kn}(t)?(e=[],S(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:m("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return s.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,u,c,l,h,f=this;return s.__generator(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,d.label=1;case 1:return n<r.length?(g(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return g(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return s.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){f.remoteStore.unlisten(t),f.removeAndCleanupQuery(e)}).catch(function(t){return f.ignoreIfPrimaryLeaseLoss(t)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,c=0,l=e,d.label=7;case 7:return c<l.length?[5,a(h=l[c])]:[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Ee().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Ee()},t}(),si=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),ai="SharedClientState",ui="firestore_clients",ci="firestore_mutations",li="firestore_targets",hi="firestore_online_state",fi="firestore_sequence_number",di=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,g(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new _(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(p(ai,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,g(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new _(r.error.code,r.error.message)),i?new t(e,r.state,o):(p(ai,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ce(),s=0;i&&s<r.activeTargetIds.length;++s)i=Lt(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(p(ai,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),mi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==Yr[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,Yr[n.onlineState]):(p(ai,"Failed to parse online state: "+e),null)},t}(),gi=function(){function t(){this.activeTargetIds=Ce()}return t.prototype.addQueryTarget=function(t){g(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),vi=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new _(w.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=fi+"_"+r,this.activeClients[this.localClientId]=new gi,this.clientStateKeyRe=new RegExp("^"+ui+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+ci+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+li+"_"+s+"_(\\d+)$"),this.onlineStateKey=hi+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return s.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,a,u,c,l,h=this;return s.__generator(this,function(s){switch(s.label){case 0:return g(!this.started,"WebStorageSharedClientState already started"),g(null!==this.syncEngine,"syncEngine property must be set before calling start()"),g(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=s.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=yi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ce();return I(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=pi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d(ai,"READ",t,e),e},t.prototype.setItem=function(t,e){d(ai,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d(ai,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(d(ai,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return s.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,a;return s.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(g(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=on.INVALID;if(null!=t)try{var n=JSON.parse(t);g("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){p(ai,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==on.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new di(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:Yr[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new pi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return g(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),ui+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return li+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=ci+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return g(null!==n,"Cannot parse client state key '"+t+"'"),yi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);g(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return di.fromWebStorageEntry(new si(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);g(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return pi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return mi.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(d(ai,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),bi=function(){function t(){this.localState=new gi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new gi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),wi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=H.newId()}return t.prototype.start=function(t){var e=this,n=new sn,r=new sn,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t.enabled?this.startIndexedDbPersistence(n,t).then(e.resolve).catch(function(t){return e.reject(t),r.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof _?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code},t.prototype.startIndexedDbPersistence=function(t,e){var n=this;g(e.enabled,"Should only start IndexedDb persitence with offline persistence enabled.");var r=_r.buildStoragePrefix(this.databaseInfo),i=new We(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return s.__awaiter(n,void 0,void 0,function(){var n,o;return s.__generator(this,function(s){switch(s.label){case 0:if(e.experimentalTabSynchronization&&!vi.isAvailable(this.platform))throw new _(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e.experimentalTabSynchronization?(this.sharedClientState=new vi(this.asyncQueue,this.platform,r,this.clientId,t),n=this,[4,_r.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n.persistence=s.sent(),[3,4];case 2:return this.sharedClientState=new bi,o=this,[4,_r.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i)];case 3:o.persistence=s.sent(),s.label=4;case 4:return[2]}})})})},t.prototype.startMemoryPersistence=function(){var t=new We(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=Mr.createEagerPersistence(this.clientId,t),this.sharedClientState=new bi,Promise.resolve()},t.prototype.initializeRest=function(t){var e=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(n){return s.__awaiter(e,void 0,void 0,function(){var e,r,i,o=this;return s.__generator(this,function(s){switch(s.label){case 0:return this.localStore=new Dr(this.persistence,t),e=this.platform.newSerializer(this.databaseInfo.databaseId),r=new Wr(this.asyncQueue,n,this.credentials,e),i=function(t){return o.syncEngine.applyOnlineStateChange(t,Xr.SharedClientState)},this.remoteStore=new Zr(this.localStore,r,this.asyncQueue,function(t){return o.syncEngine.applyOnlineStateChange(t,Xr.RemoteStore)}),this.syncEngine=new oi(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=i,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new $r(this.syncEngine),[4,this.sharedClientState.start()];case 1:return s.sent(),[4,this.remoteStore.start()];case 2:return s.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return o.syncEngine.applyPrimaryState(t)})];case 3:return s.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(e){switch(e.label){case 0:return[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new ti(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof at)return t;if(t instanceof ut)return null;throw new _(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=Ee(),r=new ii(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new sn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return s.__awaiter(e,void 0,void 0,function(){return s.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),_i=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ei=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new _(w.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+z(1,"element")+".")}();for(var n=0;n<t.length;++n)if(N("FieldPath","string",n,t[n]),0===t[n].length)throw new _(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(it.keyField().canonicalString()),t}(),Ti=new RegExp("[~\\*/\\[\\]]"),Ci=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){g(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(si.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){g(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Si=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;g(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new _(w.ABORTED,"getToken aborted due to token change.");return n?(g("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){g(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){g(null!=this.tokenListener,"removeChangeListener() called twice"),g(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return g(null===t||"string"==typeof t,"Received invalid UID: "+t),new si(t)},t}(),Ii=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=si.FIRST_PARTY,g(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,g(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new Ii(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(si.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ki(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ai=function(){function t(t){this._methodName=t}return t.delete=function(){return Di.instance},t.serverTimestamp=function(){return Ni.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return A("FieldValue.arrayUnion",arguments,1),new Oi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return A("FieldValue.arrayRemove",arguments,1),new Pi(t)},t.prototype.isEqual=function(t){return this===t},t}(),Di=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return s.__extends(e,t),e.instance=new e,e}(Ai),Ni=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return s.__extends(e,t),e.instance=new e,e}(Ai),Oi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return s.__extends(e,t),e}(Ai),Pi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return s.__extends(e,t),e}(Ai),Ri=E(Ai,"Use FieldValue.<field>() instead."),Mi=/^__.*__$/,Li=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new re(t,this.data,this.fieldMask,e):new ne(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ie(t,this.fieldTransforms)),n},t}(),Fi=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new re(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new ie(t,this.fieldTransforms)),n},t}(),ji=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function Vi(t){switch(t){case ji.Set:case ji.MergeSet:case ji.Update:return!0;case ji.Argument:return!1;default:throw m("Unexpected case for UserDataSource: "+t)}}var qi=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new _(w.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(Vi(this.dataSource)&&Mi.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),Bi=function(t,e){this.databaseId=t,this.key=e},Ui=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new qi(ji.Set,t,it.EMPTY_PATH);Hi("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new Li(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new qi(ji.MergeSet,t,it.EMPTY_PATH);Hi("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=[],u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ei)h=l._internalPath;else{if("string"!=typeof l)throw m("Expected stringOrFieldPath to be a string or a FieldPath");h=Ki(t,l)}if(!r.contains(h))throw new _(w.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a.push(h)}i=new Jt(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=new Jt(r.fieldMask),o=r.fieldTransforms;return new Li(s,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new qi(ji.Update,t,it.EMPTY_PATH);Hi("Data must be an object, but it was:",r,e);var i=[],o=At.EMPTY;I(e,function(e,s){var a=Ki(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof Di)i.push(a);else{var c=n.parseData(s,u);null!=c&&(i.push(a),o=o.set(a,c))}});var s=new Jt(i);return new Fi(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new qi(ji.Update,t,it.EMPTY_PATH),o=[Qi(t,e)],s=[n];if(r.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Qi(t,r[a])),s.push(r[a+1]);var u=[],c=At.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.childContextForFieldPath(l),f=this.runPreConverter(s[a],h);if(f instanceof Di)u.push(l);else{var d=this.parseData(f,h);null!=d&&(u.push(l),c=c.set(l,d))}}var p=new Jt(u);return new Fi(c,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new qi(ji.Argument,t,it.EMPTY_PATH),r=this.parseData(e,n);return g(null!=r,"Parsed data should not be null."),g(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Wi(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(zi(t=this.runPreConverter(t,e)))return Hi("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Ai)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new lt(Q);return x(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):I(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new At(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=gt.INSTANCE),n.push(s),r++}return new Dt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!Vi(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Di){if(e.dataSource!==ji.MergeSet)throw e.dataSource===ji.Update?(g(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Ni)e.fieldTransforms.push(new Zt(e.path,se.instance));else if(t instanceof Oi){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ae(n);e.fieldTransforms.push(new Zt(e.path,r))}else if(t instanceof Pi){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ue(n);e.fieldTransforms.push(new Zt(e.path,i))}else m("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return gt.INSTANCE;if("number"==typeof t)return Lt(t)?new _t(t):new Et(t);if("boolean"==typeof t)return vt.of(t);if("string"==typeof t)return new Tt(t);if(t instanceof Date)return new Ct(Z.fromDate(t));if(t instanceof Z)return new Ct(new Z(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof J)return new kt(t);if(t instanceof Y)return new It(t);if(t instanceof Bi)return new xt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+j(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new qi(ji.Argument,t,it.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function zi(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Z||t instanceof J||t instanceof Y||t instanceof Bi||t instanceof Ai)}function Hi(t,e,n){if(!zi(n)||!F(n)){var r=j(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function Qi(t,e){if(e instanceof Ei)return e._internalPath;if("string"==typeof e)return Ki(t,e);throw new _(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ki(t,e){try{return function(t){if(t.search(Ti)>=0)throw new _(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ei.bind.apply(Ei,[void 0].concat(t.split("."))))}catch(e){throw new _(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Wi(e);throw new _(w.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Wi(t){return t instanceof Error?t.message:t.toString()}var Gi="firestore.googleapis.com",Yi=!0,Xi=!1,Ji=!1,Zi=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new _(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gi,this.ssl=Yi}else P("settings","non-empty string","host",t.host),this.host=t.host,R("settings","boolean","ssl",t.ssl),this.ssl=C(t.ssl,Yi);q("settings",t,["host","ssl","credentials","timestampsInSnapshots"]),R("settings","object","credentials",t.credentials),this.credentials=t.credentials,R("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=C(t.timestampsInSnapshots,Xi)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials},t}(),$i=function(){},to=function(){function t(t,e){this.enabled=t,g(t||!e,"Can only provide PersistenceSettings with persistence enabled"),this.experimentalTabSynchronization=C((e=e||{}).experimentalTabSynchronization,Ji)}return t.prototype.isEqual=function(t){return this.enabled===t.enabled&&this.experimentalTabSynchronization===t.experimentalTabSynchronization},t}(),eo=function(){function t(e){var n=this;this._queue=new un,this.INTERNAL={delete:function(t){return s.__awaiter(n,void 0,void 0,function(){return s.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new $i;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Si(i)}else{var o=e;if(!o.projectId)throw new _(w.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new tt(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Ci}r.settings=new Zi({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(k("Firestore.settings",arguments,1),N("Firestore.settings","object",1,t),T(t,"persistence"))throw new _(w.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Zi(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Ci;switch(t.type){case"gapi":return new xi(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new _(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new to(!0,t))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new to(!1)),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;g(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||p("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),g(!this._firestoreClient,"configureClient() called multiple times");var n=new function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new Ui(function(t){if(t instanceof io){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new _(w.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Bi(e._config.databaseId,t._key)}return t}),this._firestoreClient=new wi(v.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!T(e,"projectId"))throw new _(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new _(w.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new tt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(k("Firestore.collection",arguments,1),N("Firestore.collection","non-empty string",1,t),!t)throw new _(w.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new lo(nt.fromString(t),this)},t.prototype.doc=function(t){if(k("Firestore.doc",arguments,1),N("Firestore.doc","non-empty string",1,t),!t)throw new _(w.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),io.forPath(nt.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return k("Firestore.runTransaction",arguments,1),N("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new no(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new ro(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(h()){case l.DEBUG:return"debug";case l.ERROR:return"error";case l.SILENT:return"silent";default:return m("Unknown log level: "+h())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(k("Firestore.setLogLevel",arguments,1),N("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(l.DEBUG);break;case"error":f(l.ERROR);break;case"silent":f(l.SILENT);break;default:throw new _(w.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),no=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;k("Transaction.get",arguments,1);var n=yo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return m("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ut)return new so(e._firestore,n._key,null,!1,!1);if(r instanceof at)return new so(e._firestore,n._key,r,!1,!1);throw m("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){D("Transaction.set",arguments,2,3);var r=yo("Transaction.set",t,this._firestore),i=(n=ho("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Ei?(A("Transaction.update",arguments,3),r=yo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(k("Transaction.update",arguments,2),r=yo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){k("Transaction.delete",arguments,1);var e=yo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),ro=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){D("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=yo("WriteBatch.set",t,this._firestore),i=(n=ho("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,te.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Ei?(A("WriteBatch.update",arguments,3),r=yo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(k("WriteBatch.update",arguments,2),r=yo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,te.exists(!0))),this},t.prototype.delete=function(t){k("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=yo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new oe(e._key,te.NONE)),this},t.prototype.commit=function(){return s.__awaiter(this,void 0,void 0,function(){return s.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new _(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),io=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ot(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(k("DocumentReference.collection",arguments,1),N("DocumentReference.collection","non-empty string",1,t),!t)throw new _(w.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=nt.fromString(t);return new lo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){D("DocumentReference.set",arguments,1,2);var n=(e=ho("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,te.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ei?(A("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(k("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,te.exists(!0)))},t.prototype.delete=function(){return k("DocumentReference.delete",arguments,0),this._firestoreClient.write([new oe(this._key,te.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||ki(t[i])||(q("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),R("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ki(t[i])?n=t[i]:(N("DocumentReference.onSnapshot","function",i,t[i]),O("DocumentReference.onSnapshot","function",i+1,t[i+1]),O("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new _i({next:function(t){if(e.next){g(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new so(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Ft.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return D("DocumentReference.get",arguments,0,1),po("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new so(e.firestore,e._key,t,!0,t instanceof at&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new _(w.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new _(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),oo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),so=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return D("DocumentSnapshot.data",arguments,0,1),t=fo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,yt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(D("DocumentSnapshot.get",arguments,1,2),e=fo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(Qi("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,yt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new io(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new oo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof At)return this.convertObject(t,e);if(t instanceof Dt)return this.convertArray(t,e);if(t instanceof xt){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||p("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new io(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),ao=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return s.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return g("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(so),uo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;k("Query.where",arguments,3),N("Query.where","non-empty string",2,n),V("Query.where",3,r);var o=Qi("Query.where",e),s=Vt.fromString(n);if(o.isKeyField()){if(s===Vt.ARRAY_CONTAINS)throw new _(w.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new _(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new nt([r]));g(a.length%2==0,"Path should be a document key"),i=new xt(this.firestore._databaseId,new ot(a))}else{if(!(r instanceof io))throw new _(w.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");i=new xt(this.firestore._databaseId,r._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var u=jt.create(o,s,i);return this.validateNewFilter(u),new t(this._query.addFilter(u),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(D("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=zt.ASCENDING;else{if("desc"!==n)throw new _(w.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=zt.DESCENDING}if(null!==this._query.startAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Qi("Query.orderBy",e),o=new Qt(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(k("Query.limit",arguments,1),N("Query.limit","number",1,e),e<=0)throw new _(w.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(V(t,1,e),e instanceof so){if(n.length>0)throw new _(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new _(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new xt(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(void 0===a){var u=s.field.canonicalString();throw new _(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ht(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new _(w.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new _(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(-1!==s.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. Document ID '"+s+"' contains a slash in "+t+"()");var a=new ot(this._query.path.child(s));i.push(new xt(this.firestore._databaseId,a))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new Ht(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||ki(t[i])||(q("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),R("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ki(t[i])?n=t[i]:(N("Query.onSnapshot","function",i,t[i]),O("Query.onSnapshot","function",i+1,t[i+1]),O("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new _i({next:function(t){e.next&&e.next(new co(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return D("Query.get",arguments,0,1),po("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new co(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new _(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof qt)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new _(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===Vt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new _(w.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new _(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),co=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new oo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;D("QuerySnapshot.forEach",arguments,1,2),N("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new uo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(q("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),R("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new _(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new ao(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return g(e.type===Ie.Added,"Invalid event type for first snapshot"),g(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Ie.Metadata}).map(function(e){var r=new ao(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,s=-1;return e.type!==Ie.Added&&(g((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Ie.Removed&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case Ie.Added:return"added";case Ie.Modified:case Ie.Metadata:return"modified";case Ie.Removed:return"removed";default:return m("Unknown change type: "+t)}}(e.type),doc:r,oldIndex:i,newIndex:s}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw B("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new ao(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(co.prototype.docChanges,t,{get:function(){return function(){throw new _(w.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var lo=function(t){function e(e,n){var r=t.call(this,Ft.atPath(e),n)||this;if(e.length%2!=1)throw new _(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return s.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new io(new ot(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=H.newId()),N("CollectionReference.doc","non-empty string",1,t),""===t)throw new _(w.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=nt.fromString(t);return io.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){k("CollectionReference.add",arguments,1),N("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(uo);function ho(t,e){if(void 0===e)return{merge:!1};if(q(t,e,["merge","mergeFields"]),R(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!("string"==typeof(s=r[o])||s instanceof Ei))throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(r[o]));var s}(t,0,0,n),void 0!==e.mergeFields&&void 0!==e.merge)throw new _(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function fo(t,e){return void 0===e?{}:(q(t,e,["serverTimestamps"]),M(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function po(t,e){O(t,"object",1,e),e&&(q(t,e,["source"]),M(t,0,"source",e.source,["default","server","cache"]))}function yo(t,e,n){if(e instanceof io){if(e.firestore!==n)throw new _(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw B(t,"DocumentReference",1,e)}var mo=E(eo,"Use firebase.firestore() instead."),go=E(no,"Use firebase.firestore().runTransaction() instead."),vo=E(ro,"Use firebase.firestore().batch() instead."),bo=E(io,"Use firebase.firestore().doc() instead."),wo=E(so),_o=E(ao),Eo=E(uo),To=E(co),Co=E(lo,"Use firebase.firestore().collection() instead."),So={Firestore:mo,GeoPoint:J,Timestamp:Z,Blob:X,Transaction:go,WriteBatch:vo,DocumentReference:bo,DocumentSnapshot:wo,Query:Eo,QueryDocumentSnapshot:_o,QuerySnapshot:To,CollectionReference:Co,FieldPath:Ei,FieldValue:Ri,setLogLevel:eo.setLogLevel};function Io(t){t.INTERNAL.registerService("firestore",function(t){return new eo(t)},function(t){g(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(So))}Io(i),e.registerFirestore=Io},LiCP:function(t,e,n){"use strict";(function(t){n.d(e,"f",function(){return r}),n.d(e,"h",function(){return o}),n.d(e,"g",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"e",function(){return h});var r="undefined"!=typeof window?window:void 0!==t&&t.exports&&"undefined"!=typeof global?global:{},i=function(t,e){var n={},r=t.document,i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(i.TweenLite)return i.TweenLite;var o,s,a,u,c,l,h,f=function(t){var e,n=t.split("."),r=i;for(e=0;e<n.length;e++)r[n[e]]=r=r[n[e]]||{};return r},d=f("com.greensock"),p=function(t){var e,n=[],r=t.length;for(e=0;e!==r;n.push(t[e++]));return n},y=function(){},m=(l=Object.prototype.toString,h=l.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&l.call(t)===h)}),g={},v=function(t,e,r,o){this.sc=g[t]?g[t].sc:[],g[t]=this,this.gsClass=null,this.func=r;var s=[];this.check=function(a){for(var u,c,l,h,d=e.length,p=d;--d>-1;)(u=g[e[d]]||new v(e[d],[])).gsClass?(s[d]=u.gsClass,p--):a&&u.sc.push(this);if(0===p&&r)for(l=(c=("com.greensock."+t).split(".")).pop(),h=f(c.join("."))[l]=this.gsClass=r.apply(r,s),o&&(i[l]=n[l]=h),d=0;d<this.sc.length;d++)this.sc[d].check()},this.check(!0)},b=t._gsDefine=function(t,e,n,r){return new v(t,e,n,r)},w=d._class=function(t,e,n){return e=e||function(){},b(t,[],function(){return e},n),e};b.globals=i;var _=[0,0,1,1],E=w("easing.Ease",function(t,e,n,r){this._func=t,this._type=n||0,this._power=r||0,this._params=e?_.concat(e):_},!0),T=E.map={},C=E.register=function(t,e,n,r){for(var i,o,s,a,u=e.split(","),c=u.length,l=(n||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(o=u[c],i=r?w("easing."+o,null,!0):d.easing[o]||{},s=l.length;--s>-1;)T[o+"."+(a=l[s])]=T[a+o]=i[a]=t.getRatio?t:t[a]||new t};for((a=E.prototype)._calcEnd=!1,a.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,r=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===n?r*=r:2===n?r*=r*r:3===n?r*=r*r*r:4===n&&(r*=r*r*r*r),1===e?1-r:2===e?r:t<.5?r/2:1-r/2},s=(o=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--s>-1;)a=o[s]+",Power"+s,C(new E(null,null,1,s),a,"easeOut",!0),C(new E(null,null,2,s),a,"easeIn"+(0===s?",easeNone":"")),C(new E(null,null,3,s),a,"easeInOut");T.linear=d.easing.Linear.easeIn,T.swing=d.easing.Quad.easeInOut;var S=w("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(a=S.prototype).addEventListener=function(t,e,n,r,i){i=i||0;var o,s,a=this._listeners[t],l=0;for(this!==u||c||u.wake(),null==a&&(this._listeners[t]=a=[]),s=a.length;--s>-1;)(o=a[s]).c===e&&o.s===n?a.splice(s,1):0===l&&o.pr<i&&(l=s+1);a.splice(l,0,{c:e,s:n,up:r,pr:i})},a.removeEventListener=function(t,e){var n,r=this._listeners[t];if(r)for(n=r.length;--n>-1;)if(r[n].c===e)return void r.splice(n,1)},a.dispatchEvent=function(t){var e,n,r,i=this._listeners[t];if(i)for((e=i.length)>1&&(i=i.slice(0)),n=this._eventTarget;--e>-1;)(r=i[e])&&(r.up?r.c.call(r.s||n,{type:t,target:n}):r.c.call(r.s||n))};var I=t.requestAnimationFrame,x=t.cancelAnimationFrame,k=Date.now||function(){return(new Date).getTime()},A=k();for(s=(o=["ms","moz","webkit","o"]).length;--s>-1&&!I;)I=t[o[s]+"RequestAnimationFrame"],x=t[o[s]+"CancelAnimationFrame"]||t[o[s]+"CancelRequestAnimationFrame"];w("Ticker",function(t,e){var n,i,o,s,a,l=this,h=k(),f=!(!1===e||!I)&&"auto",d=500,p=33,m=function(t){var e,r,u=k()-A;u>d&&(h+=u-p),l.time=((A+=u)-h)/1e3,e=l.time-a,(!n||e>0||!0===t)&&(l.frame++,a+=e+(e>=s?.004:s-e),r=!0),!0!==t&&(o=i(m)),r&&l.dispatchEvent("tick")};S.call(l),l.time=l.frame=0,l.tick=function(){m(!0)},l.lagSmoothing=function(t,e){if(!arguments.length)return d<1e10;d=t||1e10,p=Math.min(e,d,0)},l.sleep=function(){null!=o&&(f&&x?x(o):clearTimeout(o),i=y,o=null,l===u&&(c=!1))},l.wake=function(t){null!==o?l.sleep():t?h+=-A+(A=k()):l.frame>10&&(A=k()-d+5),i=0===n?y:f&&I?I:function(t){return setTimeout(t,1e3*(a-l.time)+1|0)},l===u&&(c=!0),m(2)},l.fps=function(t){if(!arguments.length)return n;a=this.time+(s=1/((n=t)||60)),l.wake()},l.useRAF=function(t){if(!arguments.length)return f;l.sleep(),f=t,l.fps(n)},l.fps(t),setTimeout(function(){"auto"===f&&l.frame<5&&"hidden"!==(r||{}).visibilityState&&l.useRAF(!1)},1500)}),(a=d.Ticker.prototype=new d.events.EventDispatcher).constructor=d.Ticker;var D=w("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,Y){c||u.wake();var n=this.vars.useFrames?G:Y;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});u=D.ticker=new d.Ticker,(a=D.prototype)._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;var N=function(){c&&k()-A>2e3&&("hidden"!==(r||{}).visibilityState||!u.lagSmoothing())&&u.wake();var t=setTimeout(N,2e3);t.unref&&t.unref()};N(),a.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},a.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},a.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},a.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},a.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},a.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},a.render=function(t,e,n){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},a.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale-1e-7},a._enabled=function(t,e){return c||u.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(t,e){return this._enabled(!1,!1)},a.kill=function(t,e){return this._kill(t,e),this},a._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},a._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();--e>-1;)"{self}"===t[e]&&(n[e]=this);return n},a._callback=function(t){var e=this.vars,n=e[t],r=e[t+"Params"],i=e[t+"Scope"]||e.callbackScope||this;switch(r?r.length:0){case 0:n.call(i);break;case 1:n.call(i,r[0]);break;case 2:n.call(i,r[0],r[1]);break;default:n.apply(i,r)}},a.eventCallback=function(t,e,n,r){if("on"===(t||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[t];null==e?delete i[t]:(i[t]=e,i[t+"Params"]=m(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,i[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},a.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},a.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},a.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},a.totalTime=function(t,e,n){if(c||u.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;if(t>r&&!n&&(t=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-t:t)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(M.length&&J(),this.render(t,e,!1),M.length&&J())}return this},a.progress=a.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},a.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},a.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,n;for(t=t||1e-10,this._timeline&&this._timeline.smoothChildTiming&&(n=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/t),this._timeScale=t,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},a.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(t){if(!arguments.length)return this._paused;var e,n,r=this._timeline;return t!=this._paused&&r&&(c||t||u.wake(),n=(e=r.rawTime())-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(e=r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,e===this._totalTime,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var O=w("core.SimpleTimeline",function(t){D.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(a=O.prototype=new D).constructor=O,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(t,e,n,r){var i,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(o=t._startTime;i&&i._startTime>o;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},a._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(t,e,n){var r,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;i;)r=i._next,(i._active||t>=i._startTime&&!i._paused&&!i._gc)&&i.render(i._reversed?(i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale:(t-i._startTime)*i._timeScale,e,n),i=r},a.rawTime=function(){return c||u.wake(),this._totalTime};var P=w("TweenLite",function(e,n,r){if(D.call(this,n,r),this.render=P.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:P.selector(e)||e;var i,o,s,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?W[P.defaultOverwrite]:"number"==typeof u?u>>0:W[u],(a||e instanceof Array||e.push&&m(e))&&"number"!=typeof e[0])for(this._targets=s=p(e),this._propLookup=[],this._siblings=[],i=0;i<s.length;i++)(o=s[i])?"string"!=typeof o?o.length&&o!==t&&o[0]&&(o[0]===t||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(i--,1),this._targets=s=s.concat(p(o))):(this._siblings[i]=Z(o,this,!1),1===u&&this._siblings[i].length>1&&tt(o,this,null,1,this._siblings[i])):"string"==typeof(o=s[i--]=P.selector(o))&&s.splice(i+1,1):s.splice(i--,1);else this._propLookup={},this._siblings=Z(e,this,!1),1===u&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),R=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(a=P.prototype=new D).constructor=P,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,P.version="2.0.2",P.defaultEase=a._ease=new E(null,null,1,1),P.defaultOverwrite="auto",P.ticker=u,P.autoSleep=120,P.lagSmoothing=function(t,e){u.lagSmoothing(t,e)},P.selector=t.$||t.jQuery||function(e){var n=t.$||t.jQuery;return n?(P.selector=n,n(e)):(r||(r=t.document),r?r.querySelectorAll?r.querySelectorAll(e):r.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var M=[],L={},F=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,j=/[\+-]=-?[\.\d]/,V=function(t){for(var e,n=this._firstPT;n;)e=n.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m.call(this._tween,e,this._target||n.t,this._tween):e<1e-6&&e>-1e-6&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next},q=function(t,e,n,r){var i,o,s,a,u,c,l,h=[],f=0,d="",p=0;for(h.start=t,h.end=e,t=h[0]=t+"",e=h[1]=e+"",n&&(n(h),t=h[0],e=h[1]),h.length=0,i=t.match(F)||[],o=e.match(F)||[],r&&(r._next=null,r.blob=1,h._firstPT=h._applyPT=r),u=o.length,a=0;a<u;a++)d+=(c=e.substr(f,e.indexOf(l=o[a],f)-f))||!a?c:",",f+=c.length,p?p=(p+1)%5:"rgba("===c.substr(-5)&&(p=1),l===i[a]||i.length<=a?d+=l:(d&&(h.push(d),d=""),s=parseFloat(i[a]),h.push(s),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:s,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-s)||0,f:0,m:p&&p<4?Math.round:0}),f+=l.length;return(d+=e.substr(f))&&h.push(d),h.setRatio=V,j.test(e)&&(h.end=null),h},B=function(t,e,n,r,i,o,s,a,u){"function"==typeof r&&(r=r(u||0,t));var c=typeof t[e],l="function"!==c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),h="get"!==n?n:l?s?t[l](s):t[l]():t[e],f="string"==typeof r&&"="===r.charAt(1),d={t:t,p:e,s:h,f:"function"===c,pg:0,n:i||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-h||0};if(("number"!=typeof h||"number"!=typeof r&&!f)&&(s||isNaN(h)||!f&&isNaN(r)||"boolean"==typeof h||"boolean"==typeof r?(d.fp=s,d={t:q(h,f?parseFloat(d.s)+d.c+(d.s+"").replace(/[0-9\-\.]/g,""):r,a||P.defaultStringFilter,d),p:"setRatio",s:0,c:1,f:2,pg:0,n:i||e,pr:0,m:0}):(d.s=parseFloat(h),f||(d.c=parseFloat(r)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},U=P._internals={isArray:m,isSelector:R,lazyTweens:M,blobDif:q},z=P._plugins={},H=U.tweenLookup={},Q=0,K=U.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},G=D._rootFramesTimeline=new O,Y=D._rootTimeline=new O,X=30,J=U.lazyRender=function(){var t,e=M.length;for(L={};--e>-1;)(t=M[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);M.length=0};Y._startTime=u.time,G._startTime=u.frame,Y._active=G._active=!0,setTimeout(J,1),D._updateRoot=P.render=function(){var t,e,n;if(M.length&&J(),Y.render((u.time-Y._startTime)*Y._timeScale,!1,!1),G.render((u.frame-G._startTime)*G._timeScale,!1,!1),M.length&&J(),u.frame>=X){for(n in X=u.frame+(parseInt(P.autoSleep,10)||120),H){for(t=(e=H[n].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete H[n]}if((!(n=Y._first)||n._paused)&&P.autoSleep&&!G._first&&1===u._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||u.sleep()}}},u.addEventListener("tick",D._updateRoot);var Z=function(t,e,n){var r,i,o=t._gsTweenID;if(H[o||(t._gsTweenID=o="t"+Q++)]||(H[o]={target:t,tweens:[]}),e&&((r=H[o].tweens)[i=r.length]=e,n))for(;--i>-1;)r[i]===e&&r.splice(i,1);return H[o].tweens},$=function(t,e,n,r){var i,o,s=t.vars.onOverwrite;return s&&(i=s(t,e,n,r)),(s=P.onOverwrite)&&(o=s(t,e,n,r)),!1!==i&&!1!==o},tt=function(t,e,n,r,i){var o,s,a,u;if(1===r||r>=4){for(u=i.length,o=0;o<u;o++)if((a=i[o])!==e)a._gc||a._kill(null,t,e)&&(s=!0);else if(5===r)break;return s}var c,l=e._startTime+1e-10,h=[],f=0,d=0===e._duration;for(o=i.length;--o>-1;)(a=i[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(c=c||et(e,0,d),0===et(a,c,d)&&(h[f++]=a)):a._startTime<=l&&a._startTime+a.totalDuration()/a._timeScale>l&&((d||!a._initted)&&l-a._startTime<=2e-10||(h[f++]=a)));for(o=f;--o>-1;)if(u=(a=h[o])._firstPT,2===r&&a._kill(n,t,e)&&(s=!0),2!==r||!a._firstPT&&a._initted&&u){if(2!==r&&!$(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},et=function(t,e,n){for(var r=t._timeline,i=r._timeScale,o=t._startTime;r._timeline;){if(o+=r._startTime,i*=r._timeScale,r._paused)return-100;r=r._timeline}return(o/=i)>e?o-e:n&&o===e||!t._initted&&o-e<2e-10?1e-10:(o+=t.totalDuration()/t._timeScale/i)>e+1e-10?0:o-e-1e-10};a._init=function(){var t,e,n,r,i,o,s=this.vars,a=this._overwrittenProps,u=this._duration,c=!!s.immediateRender,l=s.ease;if(s.startAt){for(r in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),i={},s.startAt)i[r]=s.startAt[r];if(i.data="isStart",i.overwrite=!1,i.immediateRender=!0,i.lazy=c&&!1!==s.lazy,i.startAt=i.delay=null,i.onUpdate=s.onUpdate,i.onUpdateParams=s.onUpdateParams,i.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=P.to(this.target||{},0,i),c)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(s.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(r in 0!==this._time&&(c=!1),n={},s)K[r]&&"autoCSS"!==r||(n[r]=s[r]);if(n.overwrite=0,n.data="isFromStart",n.lazy=c&&!1!==s.lazy,n.immediateRender=c,this._startAt=P.to(this.target,0,n),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof E?l:"function"==typeof l?new E(l,s.easeParams):T[l]||P.defaultEase:P.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&P._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},a._initProps=function(e,n,r,i,o){var s,a,u,c,l,h;if(null==e)return!1;for(s in L[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==t&&e.nodeType&&z.css&&!1!==this.vars.autoCSS&&function(t,e){var n,r={};for(n in t)K[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!z[n]||z[n]&&z[n]._autoCSS)||(r[n]=t[n],delete t[n]);t.css=r}(this.vars,e),this.vars)if(h=this.vars[s],K[s])h&&(h instanceof Array||h.push&&m(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[s]=h=this._swapSelfInParams(h,this));else if(z[s]&&(c=new z[s])._onInitTween(e,this.vars[s],this,o)){for(this._firstPT=l={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:c._priority,m:0},a=c._overwriteProps.length;--a>-1;)n[c._overwriteProps[a]]=this._firstPT;(c._priority||c._onInitAllProps)&&(u=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),l._next&&(l._next._prev=l)}else n[s]=B.call(this,e,s,"get",h,s,0,null,this.vars.stringFilter,o);return i&&this._kill(i,e)?this._initProps(e,n,r,i,o):this._overwrite>1&&this._firstPT&&r.length>1&&tt(e,this,n,this._overwrite,r)?(this._kill(n,e),this._initProps(e,n,r,i,o)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(L[e._gsTweenID]=!0),u)},a.render=function(t,e,n){var r,i,o,s,a=this._time,u=this._duration,c=this._rawPrevTime;if(t>=u-1e-7&&t>=0)this._totalTime=this._time=u,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===u&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(c<0||t<=0&&t>=-1e-7||1e-10===c&&"isPause"!==this.data)&&c!==t&&(n=!0,c>1e-10&&(i="onReverseComplete")),this._rawPrevTime=s=!e||t||c===t?t:1e-10);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===u&&c>0)&&(i="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===u&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(1e-10!==c||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=s=!e||t||c===t?t:1e-10)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=t,this._easeType){var l=t/u,h=this._easeType,f=this._easePower;(1===h||3===h&&l>=.5)&&(l=1-l),3===h&&(l*=2),1===f?l*=l:2===f?l*=l*l:3===f?l*=l*l*l:4===f&&(l*=l*l*l*l),this.ratio=1===h?1-l:2===h?l:t/u<.5?l/2:1-l/2}else this.ratio=this._ease.getRatio(t/u);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=c,M.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/u):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,!0,n):i||(i="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==u||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,n),e||(this._time!==a||r||n)&&this._callback("onUpdate")),i&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[i]&&this._callback(i),0===u&&1e-10===this._rawPrevTime&&1e-10!==s&&(this._rawPrevTime=0)))}},a._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:P.selector(e)||e;var r,i,o,s,a,u,c,l,h,f=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline,d=this._firstPT;if((m(e)||R(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],n)&&(u=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){a=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,i=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(c=t||a,l=t!==i&&"all"!==i&&t!==a&&("object"!=typeof t||!t._tempKill),n&&(P.onOverwrite||this.vars.onOverwrite)){for(o in c)a[o]&&(h||(h=[]),h.push(o));if((h||!t)&&!$(this,n,e,h))return!1}for(o in c)(s=a[o])&&(f&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,u=!0),s.pg&&s.t._kill(c)&&(u=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),l&&(i[o]=1);!this._firstPT&&this._initted&&d&&this._enabled(!1,!1)}}return u},a.invalidate=function(){return this._notifyPluginsOfEnabled&&P._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},a._enabled=function(t,e){if(c||u.wake(),t&&this._gc){var n,r=this._targets;if(r)for(n=r.length;--n>-1;)this._siblings[n]=Z(r[n],this,!0);else this._siblings=Z(this.target,this,!0)}return D.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&P._onPluginEvent(t?"_onEnable":"_onDisable",this)},P.to=function(t,e,n){return new P(t,e,n)},P.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new P(t,e,n)},P.fromTo=function(t,e,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new P(t,e,r)},P.delayedCall=function(t,e,n,r,i){return new P(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},P.set=function(t,e){return new P(t,0,e)},P.getTweensOf=function(t,e){if(null==t)return[];var n,r,i,o;if(t="string"!=typeof t?t:P.selector(t)||t,(m(t)||R(t))&&"number"!=typeof t[0]){for(n=t.length,r=[];--n>-1;)r=r.concat(P.getTweensOf(t[n],e));for(n=r.length;--n>-1;)for(o=r[n],i=n;--i>-1;)o===r[i]&&r.splice(n,1)}else if(t._gsTweenID)for(n=(r=Z(t).concat()).length;--n>-1;)(r[n]._gc||e&&!r[n].isActive())&&r.splice(n,1);return r||[]},P.killTweensOf=P.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var r=P.getTweensOf(t,e),i=r.length;--i>-1;)r[i]._kill(n,t)};var nt=w("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=nt.prototype},!0);if(a=nt.prototype,nt.version="1.19.0",nt.API=2,a._firstPT=null,a._addTween=B,a.setRatio=V,a._kill=function(t){var e,n=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;--e>-1;)null!=t[n[e]]&&n.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},a._mod=a._roundProps=function(t){for(var e,n=this._firstPT;n;)(e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},P._onPluginEvent=function(t,e){var n,r,i,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,r=i;r&&r.pr>a.pr;)r=r._next;(a._prev=r?r._prev:o)?a._prev._next=a:i=a,(a._next=r)?r._prev=a:o=a,a=s}a=e._firstPT=i}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(n=!0),a=a._next;return n},nt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===nt.API&&(z[(new t[e])._propName]=t[e]);return!0},b.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,r=t.priority||0,i=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=w("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){nt.call(this,n,r),this._overwriteProps=i||[]},!0===t.global),a=s.prototype=new nt(n);for(e in a.constructor=s,s.API=t.API,o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,nt.activate([s]),s},o=t._gsQueue){for(s=0;s<o.length;s++)o[s]();for(a in g)g[a].func||t.console.log("GSAP encountered missing dependency: "+a)}return c=!1,P}(r),o=r.GreenSockGlobals,s=o.com.greensock,a=s.core.SimpleTimeline,u=s.core.Animation,c=o.Ease,l=o.Power1,h=o.TweenPlugin}).call(this,n("3UD+")(t))},Uv6z:function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};l.prototype.append=function(t,e){t=a(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,e){this.map[a(t)]=u(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];v.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=m,t.Response=v,t.fetch=function(t,n){return new Promise(function(r,i){var o=new m(t,n),s=new XMLHttpRequest;s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new l,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL"),r(new v("response"in s?s.response:s.responseText,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&e.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function d(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,n,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=f(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(t,e){var n,r,i=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},Wcq6:function(t,e,n){"use strict";n("lcbw");var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},lcbw:function(t,e,n){"use strict";n.r(e),n("Uv6z");var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,r)}else(1===t._state?a:u)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return s(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){o(t,e)},n)}r[t]=s,0==--i&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)o(s,r[s])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function f(t,e){return t(e={exports:{}},e.exports),e.exports}h.Promise||(h.Promise=o);var d=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),p=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t){if(!y(t))throw TypeError(t+" is not an object!");return t},g=function(t){try{return!!t()}catch(t){return!0}},v=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=d.document,w=y(b)&&y(b.createElement),_=function(t){return w?b.createElement(t):{}},E=!v&&!g(function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a}),T=function(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},C=Object.defineProperty,S={f:v?Object.defineProperty:function(t,e,n){if(m(t),e=T(e,!0),m(n),E)try{return C(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=v?function(t,e,n){return S.f(t,e,I(1,n))}:function(t,e,n){return t[e]=n,t},k={}.hasOwnProperty,A=function(t,e){return k.call(t,e)},D=0,N=Math.random(),O=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++D+N).toString(36))},P=f(function(t){var e=O("src"),n=Function.toString,r=(""+n).split("toString");p.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var s="function"==typeof i;s&&(A(i,"name")||x(i,"name",n)),t[n]!==i&&(s&&(A(i,e)||x(i,e,t[n]?""+t[n]:r.join(String(n)))),t===d?t[n]=i:o?t[n]?t[n]=i:x(t,n,i):(delete t[n],x(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),R=function(t,e,n){if(function(e){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){var r,i,o,s,a=t&M.F,u=t&M.G,c=t&M.P,l=t&M.B,h=u?d:t&M.S?d[e]||(d[e]={}):(d[e]||{}).prototype,f=u?p:p[e]||(p[e]={}),y=f.prototype||(f.prototype={});for(r in u&&(n=e),n)o=((i=!a&&h&&void 0!==h[r])?h:n)[r],s=l&&i?R(o,d):c&&"function"==typeof o?R(Function.call,o):o,h&&P(h,r,o,t&M.U),f[r]!=o&&x(f,r,s),c&&y[r]!=o&&(y[r]=o)};d.core=p,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var L=M,F={}.toString,j=function(t){return F.call(t).slice(8,-1)},V=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==j(t)?t.split(""):Object(t)},q=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},B=function(t){return Object(q(t))},U=Math.ceil,z=Math.floor,H=function(t){return isNaN(t=+t)?0:(t>0?z:U)(t)},Q=Math.min,K=function(t){return t>0?Q(H(t),9007199254740991):0},W=Array.isArray||function(t){return"Array"==j(t)},G=d["__core-js_shared__"]||(d["__core-js_shared__"]={}),Y=function(t){return G[t]||(G[t]={})},X=f(function(t){var e=Y("wks"),n=d.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:O)("Symbol."+t))}).store=e}),J=X("species"),Z=function(t,e){return new(function(t){var e;return W(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!W(e.prototype)||(e=void 0),y(e)&&null===(e=e[J])&&(e=void 0)),void 0===e?Array:e}(t))(e)},$=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,s=6==t,a=5==t||s,u=e||Z;return function(e,c,l){for(var h,f,d=B(e),p=V(d),y=R(c,l,3),m=K(p.length),g=0,v=n?u(e,m):r?u(e,0):void 0;m>g;g++)if((a||g in p)&&(f=y(h=p[g],g,d),t))if(n)v[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:v.push(h)}else if(o)return!1;return s?-1:i||o?o:v}},tt=X("unscopables"),et=Array.prototype;void 0==et[tt]&&x(et,tt,{});var nt=function(t){et[tt][t]=!0},rt=$(5),it=!0;"find"in[]&&Array(1).find(function(){it=!1}),L(L.P+L.F*it,"Array",{find:function(t){return rt(this,t,arguments.length>1?arguments[1]:void 0)}}),nt("find");var ot=$(6),st=!0;"findIndex"in[]&&Array(1).findIndex(function(){st=!1}),L(L.P+L.F*st,"Array",{findIndex:function(t){return ot(this,t,arguments.length>1?arguments[1]:void 0)}}),nt("findIndex");var at=function(t){return V(q(t))},ut=Math.max,ct=Math.min,lt=Y("keys"),ht=function(t){return lt[t]||(lt[t]=O(t))},ft=function(t,e,n){for(var r=at(t),i=K(r.length),o=function(t,e){return(t=H(t))<0?ut(t+e,0):ct(t,e)}(n,i);i>o;o++)if(o in r&&r[o]===e)return o||0;return-1},dt=ht("IE_PROTO"),pt=function(t,e){var n,r=at(t),i=0,o=[];for(n in r)n!=dt&&A(r,n)&&o.push(n);for(;e.length>i;)A(r,n=e[i++])&&(~ft(o,n)||o.push(n));return o},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),mt=Object.keys||function(t){return pt(t,yt)},gt={f:Object.getOwnPropertySymbols},vt={f:{}.propertyIsEnumerable},bt=Object.assign,wt=!bt||g(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=bt({},t)[n]||Object.keys(bt({},e)).join("")!=r})?function(t,e){for(var n=B(t),r=arguments.length,i=1,o=gt.f,s=vt.f;r>i;)for(var a,u=V(arguments[i++]),c=o?mt(u).concat(o(u)):mt(u),l=c.length,h=0;l>h;)s.call(u,a=c[h++])&&(n[a]=u[a]);return n}:bt;L(L.S+L.F,"Object",{assign:wt});var _t=X("match"),Et=X("match"),Tt="".startsWith;L(L.P+L.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Et]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=function(t,e,n){if(y(r=e)&&(void 0!==(i=r[_t])?i:"RegExp"==j(r)))throw TypeError("String#startsWith doesn't accept regex!");var r,i;return String(q(t))}(this,t),n=K(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Tt?Tt.call(e,r,n):e.slice(n,n+r.length)===r}}),L(L.P,"String",{repeat:function(t){var e=String(q(this)),n="",r=H(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});var Ct=f(function(t){var e=O("meta"),n=S.f,r=0,i=Object.isExtensible||function(){return!0},o=!g(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!A(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!A(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return o&&a.NEED&&i(t)&&!A(t,e)&&s(t),t}}}),St=S.f,It=X("toStringTag"),xt=function(t,e,n){t&&!A(t=n?t:t.prototype,It)&&St(t,It,{configurable:!0,value:e})},kt={f:X},At=S.f,Dt=function(t){var e=p.Symbol||(p.Symbol=d.Symbol||{});"_"==t.charAt(0)||t in e||At(e,t,{value:kt.f(t)})},Nt=v?Object.defineProperties:function(t,e){m(t);for(var n,r=mt(e),i=r.length,o=0;i>o;)S.f(t,n=r[o++],e[n]);return t},Ot=d.document,Pt=Ot&&Ot.documentElement,Rt=ht("IE_PROTO"),Mt=function(){},Lt=function(){var t,e=_("iframe"),n=yt.length;for(e.style.display="none",Pt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Lt=t.F;n--;)delete Lt.prototype[yt[n]];return Lt()},Ft=Object.create||function(t,e){var n;return null!==t?(Mt.prototype=m(t),n=new Mt,Mt.prototype=null,n[Rt]=t):n=Lt(),void 0===e?n:Nt(n,e)},jt=yt.concat("length","prototype"),Vt={f:Object.getOwnPropertyNames||function(t){return pt(t,jt)}},qt=Vt.f,Bt={}.toString,Ut="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],zt={f:function(t){return Ut&&"[object Window]"==Bt.call(t)?function(t){try{return qt(t)}catch(t){return Ut.slice()}}(t):qt(at(t))}},Ht=Object.getOwnPropertyDescriptor,Qt={f:v?Ht:function(t,e){if(t=at(t),e=T(e,!0),E)try{return Ht(t,e)}catch(t){}if(A(t,e))return I(!vt.f.call(t,e),t[e])}},Kt=Ct.KEY,Wt=Qt.f,Gt=S.f,Yt=zt.f,Xt=d.Symbol,Jt=d.JSON,Zt=Jt&&Jt.stringify,$t=X("_hidden"),te=X("toPrimitive"),ee={}.propertyIsEnumerable,ne=Y("symbol-registry"),re=Y("symbols"),ie=Y("op-symbols"),oe=Object.prototype,se="function"==typeof Xt,ae=d.QObject,ue=!ae||!ae.prototype||!ae.prototype.findChild,ce=v&&g(function(){return 7!=Ft(Gt({},"a",{get:function(){return Gt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Wt(oe,e);r&&delete oe[e],Gt(t,e,n),r&&t!==oe&&Gt(oe,e,r)}:Gt,le=function(t){var e=re[t]=Ft(Xt.prototype);return e._k=t,e},he=se&&"symbol"==typeof Xt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Xt},fe=function(t,e,n){return t===oe&&fe(ie,e,n),m(t),e=T(e,!0),m(n),A(re,e)?(n.enumerable?(A(t,$t)&&t[$t][e]&&(t[$t][e]=!1),n=Ft(n,{enumerable:I(0,!1)})):(A(t,$t)||Gt(t,$t,I(1,{})),t[$t][e]=!0),ce(t,e,n)):Gt(t,e,n)},de=function(t,e){m(t);for(var n,r=function(t){var e=mt(t),n=gt.f;if(n)for(var r,i=n(t),o=vt.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e}(e=at(e)),i=0,o=r.length;o>i;)fe(t,n=r[i++],e[n]);return t},pe=function(t){var e=ee.call(this,t=T(t,!0));return!(this===oe&&A(re,t)&&!A(ie,t))&&(!(e||!A(this,t)||!A(re,t)||A(this,$t)&&this[$t][t])||e)},ye=function(t,e){if(t=at(t),e=T(e,!0),t!==oe||!A(re,e)||A(ie,e)){var n=Wt(t,e);return!n||!A(re,e)||A(t,$t)&&t[$t][e]||(n.enumerable=!0),n}},me=function(t){for(var e,n=Yt(at(t)),r=[],i=0;n.length>i;)A(re,e=n[i++])||e==$t||e==Kt||r.push(e);return r},ge=function(t){for(var e,n=t===oe,r=Yt(n?ie:at(t)),i=[],o=0;r.length>o;)!A(re,e=r[o++])||n&&!A(oe,e)||i.push(re[e]);return i};se||(P((Xt=function(){if(this instanceof Xt)throw TypeError("Symbol is not a constructor!");var t=O(arguments.length>0?arguments[0]:void 0),e=function(n){this===oe&&e.call(ie,n),A(this,$t)&&A(this[$t],t)&&(this[$t][t]=!1),ce(this,t,I(1,n))};return v&&ue&&ce(oe,t,{configurable:!0,set:e}),le(t)}).prototype,"toString",function(){return this._k}),Qt.f=ye,S.f=fe,Vt.f=zt.f=me,vt.f=pe,gt.f=ge,v&&P(oe,"propertyIsEnumerable",pe,!0),kt.f=function(t){return le(X(t))}),L(L.G+L.W+L.F*!se,{Symbol:Xt});for(var ve="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),be=0;ve.length>be;)X(ve[be++]);for(var we=mt(X.store),_e=0;we.length>_e;)Dt(we[_e++]);L(L.S+L.F*!se,"Symbol",{for:function(t){return A(ne,t+="")?ne[t]:ne[t]=Xt(t)},keyFor:function(t){if(!he(t))throw TypeError(t+" is not a symbol!");for(var e in ne)if(ne[e]===t)return e},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),L(L.S+L.F*!se,"Object",{create:function(t,e){return void 0===e?Ft(t):de(Ft(t),e)},defineProperty:fe,defineProperties:de,getOwnPropertyDescriptor:ye,getOwnPropertyNames:me,getOwnPropertySymbols:ge}),Jt&&L(L.S+L.F*(!se||g(function(){var t=Xt();return"[null]"!=Zt([t])||"{}"!=Zt({a:t})||"{}"!=Zt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(y(e)||void 0!==t)&&!he(t))return W(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!he(e))return e}),r[1]=e,Zt.apply(Jt,r)}}),Xt.prototype[te]||x(Xt.prototype,te,Xt.prototype.valueOf),xt(Xt,"Symbol"),xt(Math,"Math",!0),xt(d.JSON,"JSON",!0);var Ee=X("toStringTag"),Te="Arguments"==j(function(){return arguments}()),Ce={};Ce[X("toStringTag")]="z",Ce+""!="[object z]"&&P(Object.prototype,"toString",function(){return"[object "+(void 0===this?"Undefined":null===this?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Object(this),Ee))?e:Te?j(t):"Object"==(n=j(t))&&"function"==typeof t.callee?"Arguments":n)+"]";var t,e,n},!0),Dt("asyncIterator"),Dt("observable");var Se={},Ie={};x(Ie,X("iterator"),function(){return this});var xe=function(t,e,n){t.prototype=Ft(Ie,{next:I(1,n)}),xt(t,e+" Iterator")},ke=ht("IE_PROTO"),Ae=Object.prototype,De=Object.getPrototypeOf||function(t){return t=B(t),A(t,ke)?t[ke]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ae:null},Ne=X("iterator"),Oe=!([].keys&&"next"in[].keys()),Pe=function(){return this},Re=function(t,e,n,r,i,o,s){xe(n,e,r);var a,u,c,l=function(t){if(!Oe&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==i,d=!1,p=t.prototype,y=p[Ne]||p["@@iterator"]||i&&p[i],m=y||l(i),g=i?f?l("entries"):m:void 0,v="Array"==e&&p.entries||y;if(v&&(c=De(v.call(new t)))!==Object.prototype&&c.next&&(xt(c,h,!0),"function"!=typeof c[Ne]&&x(c,Ne,Pe)),f&&y&&"values"!==y.name&&(d=!0,m=function(){return y.call(this)}),(Oe||d||!p[Ne])&&x(p,Ne,m),Se[e]=m,Se[h]=Pe,i)if(a={values:f?m:l("values"),keys:o?m:l("keys"),entries:g},s)for(u in a)u in p||P(p,u,a[u]);else L(L.P+L.F*(Oe||d),e,a);return a},Me=function(t,e){var n,r,i=String(q(t)),o=H(e),s=i.length;return o<0||o>=s?"":(n=i.charCodeAt(o))<55296||n>56319||o+1===s||(r=i.charCodeAt(o+1))<56320||r>57343?i.charAt(o):i.slice(o,o+2)};Re(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Me(e,n),this._i+=t.length,{value:t,done:!1})});var Le=function(t,e){return{value:e,done:!!t}},Fe=Re(Array,"Array",function(t,e){this._t=at(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Le(1)):Le(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Se.Arguments=Se.Array,nt("keys"),nt("values"),nt("entries");for(var je=X("iterator"),Ve=X("toStringTag"),qe=Se.Array,Be={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ue=mt(Be),ze=0;ze<Ue.length;ze++){var He,Qe=Ue[ze],Ke=Be[Qe],We=d[Qe],Ge=We&&We.prototype;if(Ge&&(Ge[je]||x(Ge,je,qe),Ge[Ve]||x(Ge,Ve,Qe),Se[Qe]=qe,Ke))for(He in Fe)Ge[He]||P(Ge,He,Fe[He],!0)}kt.f("iterator")},os0x:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return d}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return E});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):d(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},ouIz:function(t,e){t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),o=i&&i.__esModule?i:{default:i},s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.apiKey=e.apiKey,this.baseEndpoint=e.baseEndpoint?e.baseEndpoint:"https://www.behance.net/v2"}return r(t,[{key:"projects",value:function(t){return this.request("/projects",t)}},{key:"project",value:function(t){return this.request("/projects/"+t)}},{key:"projectComments",value:function(t){return this.request("/projects/"+t+"/comments")}},{key:"users",value:function(t){return this.request("/users",t)}},{key:"user",value:function(t){return this.request("/users/"+t)}},{key:"userProjects",value:function(t,e){return this.request("/users/"+t+"/projects",e)}},{key:"userWips",value:function(t,e){return this.request("/users/"+t+"/wips",e)}},{key:"userApprecitations",value:function(t,e){return this.request("/users/"+t+"/appreciations",e)}},{key:"userCollections",value:function(t,e){return this.request("/users/"+t+"/collections",e)}},{key:"userStats",value:function(t){return this.request("/users/"+t+"/stats")}},{key:"userFollowers",value:function(t,e){return this.request("/users/"+t+"/followers",e)}},{key:"userFollowing",value:function(t,e){return this.request("/users/"+t+"/following",e)}},{key:"userWorkExperience",value:function(t){return this.request("/users/"+t+"/work_experience")}},{key:"team",value:function(t){return this.request("/teams/"+t)}},{key:"teamProjects",value:function(t,e){return this.request("/teams/"+t+"/projects",e)}},{key:"collections",value:function(t){return this.request("/collections",t)}},{key:"collection",value:function(t){return this.request("/collections/"+t)}},{key:"collectionProjects",value:function(t,e){return this.request("/collections/"+t+"/projects",e)}},{key:"request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,i){n.client_id=e.apiKey;var s=""+e.baseEndpoint+t+"?"+function(t){return void 0===t?[]:Object.keys(t).map(function(e){return e+"="+t[e]})}(n).join("&");(0,o.default)(s,null,function(t,e){t?(console.error(t.message),i(t)):r(e)})})}}]),t}();e.default=s,t.exports=e.default},function(t,e,n){function r(){}var i=n(2)("jsonp");t.exports=function(t,e,n){function s(){a.parentNode&&a.parentNode.removeChild(a),window[c]=r,u&&clearTimeout(u)}"function"==typeof e&&(n=e,e={}),e||(e={});var a,u,c=e.name||(e.prefix||"__jp")+o++,l=e.param||"callback",h=null!=e.timeout?e.timeout:6e4,f=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head;return h&&(u=setTimeout(function(){s(),n&&n(new Error("Timeout"))},h)),window[c]=function(t){i("jsonp got",t),s(),n&&n(null,t)},t=(t+=(~t.indexOf("?")?"&":"?")+l+"="+f(c)).replace("?&","?"),i('jsonp req "%s"',t),(a=document.createElement("script")).src=t,d.parentNode.insertBefore(a,d),function(){window[c]&&s()}};var o=0},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(4)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=i,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(i())}).call(e,n(3))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(){p&&f&&(p=!1,f.length?d=f.concat(d):y=-1,d.length&&s())}function s(){if(!p){var t=i(o);p=!0;for(var e=d.length;e;){for(f=d,d=[];++y<e;)f&&f[y].run();y=-1,e=d.length}f=null,p=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function u(){}var c,l,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var f,d=[],p=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||p||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){function r(t){function n(){if(n.enabled){var t=n,r=+new Date;t.diff=r-(i||r),t.prev=i,t.curr=r,i=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var i=e.formatters[r];return"function"==typeof i&&(n=i.call(t,o[a]),o.splice(a,1),a--),n}),e.formatArgs.call(t,o),(n.log||e.log||console.log.bind(console)).apply(t,o)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}var i;(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(5),e.names=[],e.skips=[],e.formatters={}},function(t,e){function n(t){return r(t,a,"day")||r(t,s,"hour")||r(t,o,"minute")||r(t,i,"second")||t+" ms"}function r(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var i=1e3,o=60*i,s=60*o,a=24*s,u=365.25*a;t.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(t);if("number"===r&&!1===isNaN(t))return e.long?n(t):function(t){return t>=a?Math.round(t/a)+"d":t>=s?Math.round(t/s)+"h":t>=o?Math.round(t/o)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}}])},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return a}),n.d(e,"LogLevel",function(){return i});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},a=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=s,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("zVF4"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",s=[],a=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){s.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){s=s.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;r.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(s.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),s=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=function t(){var e={},n={},s={},c={__esModule:!0,initializeApp:function(t,n){void 0===n&&(n={}),("object"!=typeof n||null===n)&&(n={name:n});var r=n;void 0===r.name&&(r.name=o);var s=r.name;"string"==typeof s&&s||u("bad-app-name",{name:s+""}),i(e,s)&&u("duplicate-app",{name:s});var l=new a(t,r,c);return e[s]=l,f(l,"create"),l},app:l,apps:null,Promise:Promise,SDK_VERSION:"5.5.0",INTERNAL:{registerService:function(t,e,i,o,f){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(s[t]=o,h().forEach(function(t){o("create",t)}));var d=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&r.deepExtend(d,i),c[t]=d,a.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},d},createFirebaseNamespace:t,extendNamespace:function(t){r.deepExtend(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:d,Promise:Promise,deepExtend:r.deepExtend}};function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var r=d(0,n);null!==r&&s[r]&&s[r](e,t)})}function d(t,e){return"serverAuth"===e?null:e}return r.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:h}),r.patchProperty(l,"App",a),c}();e.firebase=l,e.default=l},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"createWebChannelTransport",function(){return Dn}),n.d(e,"ErrorCode",function(){return Nn}),n.d(e,"EventType",function(){return On}),n.d(e,"WebChannel",function(){return Pn}),n.d(e,"XhrIoPool",function(){return Rn});var r,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){return"array"==l(t)}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(t){if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");T.call(this,n+t[r])}function S(){0!=I&&(x[this[y]||(this[y]=++m)]=this),this.Ka=this.Ka,this.Qa=this.Qa}E(T,Error),T.prototype.name="CustomError",E(C,T),C.prototype.name="AssertionError";var I=0,x={};S.prototype.Ka=!1,S.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=I)){var t=this[y]||(this[y]=++m);if(0!=I&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete x[t]}},S.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},A=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),a(t))return a(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},D=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},N=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function O(t){if(!h(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function P(t,e){var n;return(n=0<=(e=k(t,e)))&&Array.prototype.splice.call(t,e,1),n}function R(t){return Array.prototype.concat.apply([],arguments)}function M(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function L(t){return/^[\s\xa0]*$/.test(t)}var F,j=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function V(t,e){return t<e?-1:t>e?1:0}t:{var q=s.navigator;if(q){var B=q.userAgent;if(B){F=B;break t}}F=""}function U(t){return-1!=F.indexOf(t)}function z(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function H(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Q(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function K(t){var e,n={};for(e in t)n[e]=t[e];return n}var W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<W.length;o++)n=W[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Y(t){return Y[" "](t),t}Y[" "]=c;var X,J,Z=U("Opera"),$=U("Trident")||U("MSIE"),tt=U("Edge"),et=tt||$,nt=U("Gecko")&&!(-1!=F.toLowerCase().indexOf("webkit")&&!U("Edge"))&&!(U("Trident")||U("MSIE"))&&!U("Edge"),rt=-1!=F.toLowerCase().indexOf("webkit")&&!U("Edge");function it(){var t=s.document;return t?t.documentMode:void 0}t:{var ot="",st=(J=F,nt?/rv:([^\);]+)(\)|;)/.exec(J):tt?/Edge\/([\d\.]+)/.exec(J):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(J):rt?/WebKit\/(\S+)/.exec(J):Z?/(?:Version)[ \/]?(\S+)/.exec(J):void 0);if(st&&(ot=st?st[1]:""),$){var at=it();if(null!=at&&at>parseFloat(ot)){X=String(at);break t}}X=ot}var ut,ct={};function lt(t){return function(t,e){var n=ct;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=j(String(X)).split("."),r=j(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=V(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||V(0==s[2].length,0==a[2].length)||V(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ht=s.document;ut=ht&&$?it()||("CSS1Compat"==ht.compatMode?parseInt(X,10):5):void 0;var ft=Object.freeze||function(t){return t},dt=!$||9<=Number(ut),pt=$&&!lt("9"),yt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(t){}return t}();function mt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function gt(t,e){mt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}mt.prototype.stopPropagation=function(){this.Ea=!0},mt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},E(gt,mt);var vt=ft({2:"touch",3:"pen",4:"mouse"});gt.prototype.Kf=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(nt){t:{try{Y(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.offsetX=rt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=rt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:vt[t.pointerType]||"",this.state=t.state,this.fb=t,t.defaultPrevented&&this.preventDefault()},gt.prototype.stopPropagation=function(){gt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},gt.prototype.preventDefault=function(){gt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bt="closure_listenable_"+(1e6*Math.random()|0);function wt(t){return!(!t||!t[bt])}var _t=0;function Et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ob=i,this.key=++_t,this.Sa=this.Eb=!1}function Tt(t){this.src=t,this.J={},this.xb=0}function Ct(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==r)return i}return-1}Et.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(r=Tt.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.xb++);var s=Ct(t,e,r,i);return-1<s?(e=t[s],n||(e.Eb=!1)):((e=new Et(e,this.src,o,!!r,i)).Eb=n,t.push(e)),e},r.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=Ct(i,e,n,r))&&(i[e].Vb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.xb--),!0)},r.ye=function(t){var e=t.type;e in this.J&&P(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},r.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Vb();delete this.J[e],this.xb--}},r.jb=function(t,e,n,r){var i=-1;return(t=this.J[t.toString()])&&(i=Ct(t,e,n,r)),-1<i?t[i]:null};var St="closure_lm_"+(1e6*Math.random()|0),It={};function xt(t,e,n,r,i){if(r&&r.once)return At(t,e,n,r,i);if(h(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,r,i);return null}return n=Ft(n),wt(t)?t.nb(e,n,p(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=Mt(t);if(a||(t[St]=a=new Tt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Rt,e=dt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Nt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function At(t,e,n,r,i){if(h(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=Ft(n),wt(t)?t.Oc(e,n,p(r)?!!r.capture:!!r,i):kt(t,e,n,!0,r,i)}function Dt(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(wt(e))e.Le(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Nt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mt(e))?(n.ye(t),0==n.xb&&(n.src=null,e[St]=null)):t.Vb()}}}function Nt(t){return t in It?It[t]:It[t]="on"+t}function Ot(t,e,n,r){var i=!0;if((t=Mt(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=Pt(o,r),i=i&&!1!==o)}return i}function Pt(t,e){var n=t.listener,r=t.Ob||t.src;return t.Eb&&Dt(t),n.call(r,e)}function Rt(t,e){if(t.Sa)return!0;if(!dt){var n=e||u("window.event");e=new gt(n,this);var r=!0;if(!(0>n.keyCode||void 0!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=Ot(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=Ot(n[i],t,!1,e),r=r&&o}return r}return Pt(t,new gt(e,this))}function Mt(t){return(t=t[St])instanceof Tt?t:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(t){return d(t)?t:(t[Lt]||(t[Lt]=function(e){return t.handleEvent(e)}),t[Lt])}function jt(){S.call(this),this.ka=new Tt(this),this.Pe=this,this.Uc=null}E(jt,S),jt.prototype[bt]=!0,(r=jt.prototype).addEventListener=function(t,e,n,r){xt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(h(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ft(r),wt(e)?e.ed(n,r,i,o):e&&(e=Mt(e))&&(n=e.jb(n,r,i,o))&&Dt(n)}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var r=t.type||t;if(a(t))t=new mt(t,n);else if(t instanceof mt)t.target=t.target||n;else{var i=t;G(t=new mt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var s=t.currentTarget=e[o];i=s.Lb(r,!0,t)&&i}if(t.Ea||(i=(s=t.currentTarget=n).Lb(r,!0,t)&&i,t.Ea||(i=s.Lb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)i=(s=t.currentTarget=e[o]).Lb(r,!1,t)&&i;return i},r.F=function(){jt.L.F.call(this),this.pg(),this.Uc=null},r.nb=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},r.Oc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},r.ed=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},r.Le=function(t){this.ka.ye(t)},r.pg=function(){this.ka&&this.ka.pb(void 0)},r.Lb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var s=o.listener,a=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==s.call(a,n)&&r}}return r&&0!=n.Be},r.jb=function(t,e,n,r){return this.ka.jb(String(t),e,n,r)};var Vt=s.JSON.stringify;function qt(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function Bt(){this.lc=this.Va=null}qt.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},qt.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Ut,zt,Ht=new qt(function(){return new Qt},function(t){t.reset()});function Qt(){this.next=this.scope=this.Gc=null}function Kt(t){s.setTimeout(function(){throw t},0)}Bt.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Bt.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},Bt.prototype.wg=function(t){Ht.put(t)},Bt.prototype.Af=function(){return Ht.get()},Qt.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null},Qt.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Wt=!1,Gt=new Bt;function Yt(){for(var t;t=Gt.remove();){try{t.Gc.call(t.scope)}catch(t){Kt(t)}Gt.wg(t)}Wt=!1}function Xt(t,e){jt.call(this),this.Na=t||1,this.wb=e||s,this.nd=b(this.Rg,this),this.ie=_()}function Jt(t,e,n){if(d(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Zt(t,e,n){S.call(this),this.Uf=null!=n?b(t,n):t,this.Na=e,this.Xe=b(this.fg,this),this.qc=[]}function $t(t){S.call(this),this.i=t,this.o={}}E(Xt,jt),(r=Xt.prototype).enabled=!1,r.B=null,r.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},r.Rg=function(){if(this.enabled){var t=_()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},r.ff=function(){this.dispatchEvent("tick")},r.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=_())},r.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},r.F=function(){Xt.L.F.call(this),this.stop(),delete this.wb},E(Zt,S),(r=Zt.prototype).Ta=!1,r.ob=0,r.B=null,r.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},r.stop=function(){this.B&&(s.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},r.pause=function(){this.ob++},r.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},r.F=function(){Zt.L.F.call(this),this.stop()},r.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},r.Cc=function(){this.B=Jt(this.Xe,this.Na),this.Uf.apply(null,this.qc)},E($t,S);var te=[];function ee(t,e,n){this.reset(t,e,n,void 0,void 0)}function ne(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function re(t,e){this.name=t,this.value=e}(r=$t.prototype).nb=function(t,e,n,r){return this.Tf(t,e,n,r)},r.Tf=function(t,e,n,r){h(e)||(e&&(te[0]=e.toString()),e=te);for(var i=0;i<e.length;i++){var o=xt(t,e[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},r.Oc=function(t,e,n,r){return this.je(t,e,n,r)},r.je=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,r,i);else{if(!(t=At(t,e,n||this.handleEvent,r,i||this.i||this)))return this;this.o[t.key]=t}return this},r.ed=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,r,i);else n=n||this.handleEvent,r=p(r)?!!r.capture:!!r,i=i||this.i||this,n=Ft(n),r=!!r,(e=wt(t)?t.jb(e,n,r,i):t&&(t=Mt(t))?t.jb(e,n,r,i):null)&&(Dt(e),delete this.o[e.key])},r.pb=function(){z(this.o,function(t,e){this.o.hasOwnProperty(e)&&Dt(t)},this),this.o={}},r.F=function(){$t.L.F.call(this),this.pb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.Md=null,ee.prototype.reset=function(t,e,n,r,i){this.mb=t,delete this.Md},ee.prototype.Bg=function(t){this.Md=t},ee.prototype.Ge=function(t){this.mb=t},re.prototype.toString=function(){return this.name};var ie=new re("SEVERE",1e3),oe=new re("WARNING",900),se=new re("INFO",800),ae=new re("CONFIG",700),ue=new re("FINE",500);(r=ne.prototype).getName=function(){return this.pe},r.getParent=function(){return this.$b},r.pf=function(){return this.uc||(this.uc={}),this.uc},r.Ge=function(t){this.mb=t},r.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},r.Pf=function(t){return t.value>=this.Qd().value},r.log=function(t,e,n){this.Pf(t)&&(d(e)&&(e=e()),this.gf(this.uf(t,e,n)))},r.uf=function(t,e,n){return t=new ee(t,String(e),this.pe),n&&t.Bg(n),t},r.ca=function(t,e){this.log(ie,t,e)},r.T=function(t,e){this.log(oe,t,e)},r.info=function(t,e){this.log(se,t,e)},r.lf=function(t){this.log(ue,t,void 0)},r.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},r.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},r.Fg=function(t){this.$b=t},r.Qe=function(t,e){this.pf()[t]=e};var ce={},le=null;function he(t){var e;if(le||(le=new ne(""),ce[""]=le,le.Ge(ae)),!(e=ce[t])){e=new ne(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=he(t.substr(0,n))).Qe(r,e),e.Fg(n),ce[t]=e}return e}function fe(t,e){t&&t.info(e,void 0)}function de(t,e){t&&t.lf(e)}function pe(){this.s=he("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(r=pe.prototype).Id=function(){this.Wc=!1},r.Tg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.Xf(i)})},r.Ug=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},r.Wa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.ng(e)+(n?" "+n:"")})},r.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},r.debug=function(t){de(this.s,t)},r.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},r.info=function(t){fe(this.s,t)},r.T=function(t){var e=this.s;e&&e.T(t,void 0)},r.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},r.ng=function(t){if(!this.Wc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var n=0;n<e.length;n++)h(e[n])&&this.Wf(e[n]);return Vt(e)}catch(e){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},r.Wf=function(t){if(!(2>t.length||(t=t[1],!h(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},r.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var ye=new jt;function me(t){mt.call(this,"serverreachability",t)}function ge(t){ye.dispatchEvent(new me(ye,t))}function ve(t,e){mt.call(this,"statevent",t),this.stat=e}function be(t){ye.dispatchEvent(new ve(ye,t))}function we(t,e,n){mt.call(this,"timingevent",t),this.size=e,this.rtt=n}function _e(t,e){if(!d(t))throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}E(me,mt),E(ve,mt),E(we,mt);var Ee={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Te={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Ce(){}function Se(){}Ce.prototype.pd=null,Ce.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Ie,xe={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function ke(){mt.call(this,"d")}function Ae(){mt.call(this,"c")}function De(){}function Ne(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new $t(this),this.Ua=Oe,this.Vc=new Xt(t=et?125:void 0),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}E(ke,mt),E(Ae,mt),E(De,Ce),De.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},De.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},De.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},Ie=new De;var Oe=45e3,Pe={},Re={};function Me(t){if(t.H&&"function"==typeof t.H)return t.H();if(a(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return H(t)}function Le(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(f(t)||a(t))D(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(f(t)||a(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=Q(t);o=(i=Me(t)).length;for(var s=0;s<o;s++)e.call(n,i[s],r&&r[s],t)}}function Fe(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=Ne.prototype).ga=function(t){this.A=t},r.setTimeout=function(t){this.Ua=t},r.He=function(t){this.Ra=t},r.Gg=function(t){this.ba=t},r.la=function(){return this.ba},r.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},r.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},r.Ce=function(t){this.qb=_(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new Zt(b(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?K(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),ge(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},r.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},r.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(t){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(t,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(t,"No response text")}},r.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(3>t||3==t&&!et&&!this.h.ya())){this.Za||4!=t||7==e||ge(8==e||0>=n?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,be(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),et&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,be(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,be(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},r.Ig=function(){return this.Ed&&!this.lb},r.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!L(t))return t}return null},r.Ag=function(){this.Ed=!0},r.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var r=this.vf(e);if(r==Re){4==t&&(this.I=4,be(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Pe){this.I=4,be(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==t&&0==e.length&&(this.I=1,be(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},r.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},r.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},r.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Re:(e=Number(t.substring(e,n)),isNaN(e)?Pe:(n+=1)+e>t.length?Re:(t=t.substr(n,e),this.Bb=n+e,t))},r.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,s.navigator&&s.navigator.sendBeacon&&(t=s.navigator.sendBeacon(this.ua.toString(),"")),!t&&s.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=_(),this.eb()},r.cancel=function(){this.Za=!0,this.Ia()},r.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},r.eb=function(){this.hd=_()+this.Ua,this.Ke(this.Ua)},r.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=_e(b(this.gg,this),t)},r.Fb=function(){this.Ga&&(s.clearTimeout(this.Ga),this.Ga=null)},r.gg=function(){this.Ga=null;var t=_();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},r.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(ge(3),be(17)),this.Ia(),this.I=2,this.Kb()},r.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},r.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},r.Hc=function(){return this.I},r.Yc=function(t){try{this.b.ue(this,t),ge(4)}catch(t){this.a.cb(t,"Error in httprequest callback")}},(r=Fe.prototype).C=function(){return this.j},r.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},r.W=function(){return this.wc(),this.o.concat()},r.va=function(t){return je(this.D,t)},r.X=function(){return 0==this.j},r.clear=function(){this.D={},this.j=this.o.length=0},r.remove=function(t){return!!je(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},r.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];je(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)je(r,n=this.o[t])||(this.o[e++]=n,r[n]=1),t++;this.o.length=e}},r.get=function(t,e){return je(this.D,t)?this.D[t]:e},r.set=function(t,e){je(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},r.addAll=function(t){if(t instanceof Fe)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},r.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},r.clone=function(){return new Fe(this)};var Ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qe(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof qe?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(Ve))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new Ye(null,this.O))}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ue(t,e,n){return a(t)?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(r=qe.prototype).toString=function(){var t=[],e=this.qa;e&&t.push(Ue(e,He,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Ue(e,He,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ue(n,"/"==n.charAt(0)?Ke:Qe,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Ue(n,Ge)),t.join("")},r.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var r=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.ec(r):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},r.clone=function(){return new qe(this)},r.tb=function(t,e){this.U(),(this.qa=e?Be(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},r.Hf=function(){return!!this.qa},r.cd=function(t,e){this.U(),this.zb=e?Be(t):t},r.If=function(){return!!this.zb},r.rb=function(t,e){this.U(),this.xa=e?Be(t,!0):t},r.Ic=function(){return!!this.xa},r.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},r.Ff=function(){return null!=this.Ca},r.ec=function(t,e){this.U(),this.K=e?Be(t,!0):t},r.ae=function(){return!!this.K},r.Gf=function(){return""!==this.P.toString()},r.bd=function(t,e){this.U(),t instanceof Ye?(this.P=t,this.P.ad(this.O)):(e||(t=Ue(t,We)),this.P=new Ye(t,this.O))},r.Rd=function(){return this.P.toString()},r.getQuery=function(){return this.Rd()},r.l=function(t,e){this.U(),this.P.set(t,e)},r.dc=function(t,e){this.U(),h(e)||(e=[String(e)]),this.P.Ie(t,e)},r.$c=function(t,e){this.U(),this.ib=e?Be(t):t},r.Ef=function(){return!!this.ib},r.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),this},r.removeParameter=function(t){return this.U(),this.P.remove(t),this},r.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},r.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var He=/[#\/\?@]/g,Qe=/[#\?:]/g,Ke=/[#\?]/g,We=/[#\?@]/g,Ge=/#/g;function Ye(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function Xe(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Je(t){this.D=new Fe,t&&this.addAll(t)}function Ze(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[y]||(t[y]=++m)):e.substr(0,1)+t}function $e(t){this.me=t||tn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.vc&&s.vc.ke&&s.vc.ke()&&s.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new Je),this.f=null,this.ba=[]}(r=Ye.prototype).$=function(){if(!this.m&&(this.m=new Fe,this.j=0,this.ja)){var t=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},r.C=function(){return this.$(),this.j},r.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},r.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},r.clear=function(){this.Oa(),this.m=null,this.j=0},r.X=function(){return this.$(),0==this.j},r.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},r.forEach=function(t,e){this.$(),this.m.forEach(function(n,r){D(n,function(n){t.call(e,n,r,this)},this)},this)},r.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.H=function(t){this.$();var e=[];if(a(t))this.va(t)&&(e=R(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=R(e,t[n])}return e},r.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},r.get=function(t,e){return t&&0<(t=this.H(t)).length?String(t[0]):e},r.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),M(e)),this.j+=e.length)},r.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.ja=t.join("&")},r.Oa=function(){this.ja=null},r.clone=function(){var t=new Ye;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},r.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},r.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},r.extend=function(t){for(var e=0;e<arguments.length;e++)Le(arguments[e],function(t,e){this.add(e,t)},this)},E(function(){},function(){}),(r=Xe.prototype).g=null,r.ga=function(t){this.A=t},r.connect=function(t){this.K=t,t=this.b.Sd(this.K),be(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new Ne(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},r.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),be(4),t?(be(10),this.b.ub(this,!1)):(be(11),this.b.ub(this,!0));else{this.f=new Ne(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);be(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&e.l(n,r),this.f.jd(e,!1,this.na)}},r.Jb=function(t){return this.b.Jb(t)},r.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},r.de=function(){return!1},r.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(t){return this.a.cb(t),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?be(6):"11111"==e?(be(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0))):(be(7),this.bc=!1))},r.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),be(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?be(8):1==this.g&&be(9),this.b.dd(this))},r.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.fc=function(){return this.b.fc()},r.Ba=function(){return this.b.Ba()},r.Ze=function(){return!$||10<=Number(ut)},(r=Je.prototype).C=function(){return this.D.C()},r.add=function(t){this.D.set(Ze(t),t)},r.addAll=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.add(t[n])},r.pb=function(t){for(var e=(t=Me(t)).length,n=0;n<e;n++)this.remove(t[n])},r.remove=function(t){return this.D.remove(Ze(t))},r.clear=function(){this.D.clear()},r.X=function(){return this.D.X()},r.contains=function(t){return this.D.va(Ze(t))},r.H=function(){return this.D.H()},r.clone=function(){return new Je(this)};var tn=10;function en(){this.xg=this.rg=void 0}function nn(){this.jg=new en}function rn(t,e,n,r,i){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){t.cb(e)}}(r=$e.prototype).ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new Je,this.f&&(this.oc(this.f),this.f=null))},r.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},r.xf=function(){return this.f?1:this.v?this.v.C():0},r.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},r.oc=function(t){this.v?this.v.add(t):this.f=t},r.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},r.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(D(this.v.H(),function(t){t.cancel()}),this.v.clear())},r.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return D(this.v.H(),function(e){t=t.concat(e.la())}),t}return M(this.ba)},r.Re=function(t){this.ba=this.ba.concat(t)},r.$e=function(){this.ba.length=0},en.prototype.stringify=function(t){return s.JSON.stringify(t,this.rg)},en.prototype.parse=function(t){return s.JSON.parse(t,this.xg)},nn.prototype.hf=function(t,e,n){var r=n||"";try{Le(t,function(t,n){var i=t;p(t)&&(i=Vt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}},nn.prototype.jf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?i.push("ofs="+(r=t[0].Pc)):r=0:i.push("ofs="+r);for(var o=!0,s=0;s<e;s++){var a=t[s].Pc,u=t[s].map;if(0>(a-=r))r=Math.max(0,t[s].Pc-100),o=!1;else try{this.hf(u,i,"req"+a+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},nn.prototype.zc=function(t){return this.jg.parse(t)};var on=s.JSON.parse;function sn(t){jt.call(this),this.headers=new Fe,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=an,this.jc=this.lg=this.Ab=!1}E(sn,jt);var an="";sn.prototype.s=he("goog.net.XhrIo");var un=/^https?$/i,cn=["POST","PUT"];function ln(t){return"content-type"==t.toLowerCase()}function hn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function fn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return z(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function dn(t){this.Bd=22,this.De=0,this.M=[],this.a=new pe,this.Ib=new function(){this.od=this.$d=null},this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new $e(t&&t.concurrentRequestLimit),this.kc=new nn,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function pn(){}function yn(){if($&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function mn(t,e){jt.call(this),this.b=new dn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e=r?e+i:e+"/"+i)}return e}(this.yb,"test"),this.s=he("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!L(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!L(e)&&(this.b.Dg(e),null!==(t=this.Rc)&&e in t&&(e in(t=this.Rc)&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new bn(this)}function gn(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vn(t){Ae.call(this),this.status=1,this.errorCode=t}function bn(t){this.b=t}(r=sn.prototype).Je=function(t){this.Ab=t},r.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Ie.Vd(),this.c.onreadystatechange=b(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=b(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=b(this.re,this)));try{de(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(t){return de(this.s,this.da("Error opening Xhr: "+t.message)),void this.Ld(t)}t=n||"";var i=this.headers.clone();r&&Le(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ln,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.W()),n=s.FormData&&t instanceof s.FormData,!(0<=k(cn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=function(t){return $&&lt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.c),de(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=b(this.Ua,this)):this.hc=Jt(this.Ua,this.vb,this)),de(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(t){de(this.s,this.da("Send error: "+t.message)),this.Ld(t)}},r.df=function(){return this.Xa?this.Xa.Dd():Ie.Dd()},r.Ua=function(){void 0!==o&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,de(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},r.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},r.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(t){this.c&&this.ha&&(de(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},r.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),sn.L.F.call(this)},r.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},r.eg=function(){this.se()},r.se=function(){if(this.ha&&void 0!==o)if(this.mc[1]&&4==this.ma()&&2==this.za())de(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Jt(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){de(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},r.re=function(t,e){this.dispatchEvent(hn(t,"progress")),this.dispatchEvent(hn(t,e?"downloadprogress":"uploadprogress"))},r.Gb=function(t){if(this.c){this.yd();var e=this.c,n=this.mc[0]?c:null;this.mc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(e){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},r.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(s.clearTimeout(this.hc),this.hc=null)},r.Ba=function(){return!!this.c},r.Mc=function(){return 4==this.ma()},r.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},r.Of=function(){var t=String(this.Tb).match(Ve)[1]||null;return!t&&s.self&&s.self.location&&(t=(t=s.self.location.protocol).substr(0,t.length-1)),un.test(t?t.toLowerCase():"")},r.ma=function(){return this.c?this.c.readyState:0},r.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},r.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return de(this.s,"Can not get status: "+t.message),""}},r.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return de(this.s,"Can not get responseText: "+t.message),""}},r.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),on(e)}},r.getResponseHeader=function(t){if(this.c&&this.Mc())return null===(t=this.c.getResponseHeader(t))?void 0:t},r.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},r.kb=function(t){return this.c?this.c.getResponseHeader(t):null},r.Ud=function(){return this.Pa},r.Hc=function(){return a(this.I)?this.I:String(this.I)},r.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(r=dn.prototype).tc=8,r.g=1,r.connect=function(t,e,n,r,i){this.a.debug("connect()"),be(0),this.K=e,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},r.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new Ne(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},r.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new Xe(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=fn(t,this.N,this.A)),this.Ja.connect(e)},r.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},r.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(s.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(s.clearTimeout(this.ea),this.ea=null)},r.ga=function(t){this.A=t},r.Eg=function(t){this.Rb=t},r.Cg=function(t){this.N=t},r.Dg=function(t){this.aa=t},r.Fe=function(t){this.Kc=t},r.He=function(t){this.Ra=t},r.Hg=function(){this.gc=!0},r.Ee=function(t){this.i=t},r.Nf=function(){return!this.fd},r.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+Vt(t)}),this.M.push(new function(t,e){this.Pc=t,this.map=e,this.context=null}(this.ag++,t)),3==this.g&&this.Dc()},r.qf=function(){return this.kf?0:this.nf},r.de=function(){return 0==this.g},r.getState=function(){return this.g},r.Dc=function(){this.G.ee()||this.ea||(this.ea=_e(b(this.we,this),0),this.La=0)},r.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf()||(this.a.debug("Going to retry POST"),this.ea=_e(b(this.we,this,t),this.Xd(this.La)),this.La++,0))},r.we=function(t){this.ea=null,this.Mg(t)},r.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},r.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new Ne(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?G(n=K(n),this.Rb):n=this.Rb),null===this.N&&e.ga(n);var r=this.Hd(e),i=this.hb.clone();i.l("RID",t),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&fn(i,this.N,n),this.G.oc(e),this.Nd?(i.l("$req",r),i.l("SID","null"),e.Ag(),e.kd(i,null)):e.kd(i,r)},r.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&fn(n,this.N,this.A),e=new Ne(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},r.Ya=function(t){this.i&&Le({},function(e,n){t.l(n,e)})},r.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?b(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},r.sg=function(t){this.M=t.la().concat(this.M)},r.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;zt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);zt=function(){t.then(Yt)}}else zt=function(){var t=Yt;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!U("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Ut||(Ut=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!U("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!U("Trident")&&!U("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rd;n.rd=null,t()}},function(t){r.next={rd:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}()),Ut(t)):s.setImmediate(t)}}(),Wt||(zt(),Wt=!0),Gt.add(t,this),this.Ha=0}},r.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha||(this.a.debug("Going to retry GET"),this.rc++,this.ia=_e(b(this.ve,this),this.Xd(this.Ha)),this.Ha++,0))},r.ve=function(){this.ia=null,this.Kg()},r.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new Ne(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&fn(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},r.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},r.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},r.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(t){n=null}h(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),L(e)||(n=this.kc.zc(e),this.dg(n,t))},r.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],0<(e=this.he-this.Sb)&&(this.a.debug((t=t[2])+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=_e(b(this.bg,this),6e3))))},r.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),be(18)}},r.Jg=function(t){return 37500>t&&!this.Nf()&&0==this.Ha},r.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},r.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),be(19))},r.Hb=function(){null!=this.wa&&(s.clearTimeout(this.wa),this.wa=null)},r.Tc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(t))return;e=t.la(),this.G.ze(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(function(t,e,n){ye.dispatchEvent(new we(ye,t,e,n))}(t.Da?t.Da.length:0,_()-t.qb,this.La),this.Dc()):this.Kd();else{var r=t.Hc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(t,e){switch(r){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(0,i.w)}),1==n&&this.Yf(t)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Re(e),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},r.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},r.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},r.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},r.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=b(this.Pg,this);e||(e=new qe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||e.tb("https"),e.Ub()),function(t,e){var n=new pe;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=w(rn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(rn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(rn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(rn,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}(e.toString(),n)}else be(2);this.cg(t)},r.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),be(2)):(this.a.info("Failed to ping google.com"),be(1))},r.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},r.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),M(this.M),this.M.length=0}this.i.sd()}},r.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},r.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},r.Cd=function(t,e){var n=function(t){return t instanceof qe?t.clone():new qe(t,void 0)}(e);if(""!=n.xa)t&&n.rb(t+"."+n.xa),n.sb(n.Ca);else{var r=s.location;n=function(t,e,n,r){var i=new qe(null,void 0);return t&&i.tb(t),e&&i.rb(e),n&&i.sb(n),r&&i.ec(r),i}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return this.gb&&z(this.gb,function(t,e){n.l(e,t)}),e=this.Kc,(t=this.aa)&&e&&n.l(t,e),n.l("VER",this.tc),this.Ya(n),n},r.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new sn(this.Xa)).Je(this.gc),t},r.Ba=function(){return!!this.i&&this.i.Ba()},r.fc=function(){return this.gc},(r=pn.prototype).sc=null,r.wd=function(){},r.ud=function(){},r.td=function(){},r.sd=function(){},r.Ba=function(){return!0},r.Ue=function(){},r.$a=function(t){return t},yn.prototype.cf=function(t,e){return new mn(t,e)},E(mn,jt),(r=mn.prototype).addEventListener=function(t,e,n,r){mn.L.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){mn.L.removeEventListener.call(this,t,e,n,r)},r.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},r.close=function(){this.b.disconnect()},r.send=function(t){if(a(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?((e={}).__data__=Vt(t),this.b.Zc(e)):this.b.Zc(t)},r.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,mn.L.F.call(this)},E(gn,ke),E(vn,Ae),E(bn,pn),bn.prototype.wd=function(){fe(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},bn.prototype.ud=function(t){this.b.dispatchEvent(new gn(t))},bn.prototype.td=function(t){fe(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new vn(t))},bn.prototype.sd=function(){fe(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var wn=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},yn);function _n(){this.V=[],this.Z=[]}function En(t,e){if(S.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Tn);this.fa=new _n,this.oa=new Je,this.Ac=0,this.Nc=null,this.Cb()}(r=_n.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},r.enqueue=function(t){this.Z.push(t)},r.ab=function(){return this.Vf(),this.V.pop()},r.C=function(){return this.V.length+this.Z.length},r.X=function(){return 0==this.V.length&&0==this.Z.length},r.clear=function(){this.V=[],this.Z=[]},r.contains=function(t){return 0<=k(this.V,t)||0<=k(this.Z,t)},r.remove=function(t){var e=this.V,n=A(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||P(this.Z,t)},r.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},E(En,S);var Tn="[goog.structs.Pool] Min can not be greater than max";function Cn(t,e){this.fe=t,this.gd=e}function Sn(t){this.Y=[],t&&this.Lf(t)}function In(){Sn.call(this)}function xn(t,e){this.Gd=void 0,this.cc=new In,En.call(this,t,e)}function kn(t,e,n,r){this.Jf=t,this.Ab=!!r,xn.call(this,e,n)}(r=En.prototype).Mb=function(){var t=_();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},r.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},r.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},r.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},r.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},r.xc=function(){return{}},r.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},r.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},r.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},r.C=function(){return this.fa.C()+this.oa.C()},r.rf=function(){return this.oa.C()},r.Td=function(){return this.fa.C()},r.X=function(){return this.fa.X()&&this.oa.X()},r.F=function(){if(En.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},Cn.prototype.getKey=function(){return this.fe},Cn.prototype.clone=function(){return new Cn(this.fe,this.gd)},(r=Sn.prototype).ce=function(t,e){var n=this.Y;n.push(new Cn(t,e)),this.$f(n.length-1)},r.Lf=function(t){if(t instanceof Sn){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,r=0;r<e.length;r++)n.push(new Cn(e[r],t[r]));return}}else e=Q(t),t=H(t);for(r=0;r<e.length;r++)this.ce(e[r],t[r])},r.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?O(t):(t[0]=t.pop(),this.Zf()),n.gd},r.Zf=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.tf(t),o=this.zf(t);if(e[i=o<n&&e[o].getKey()<e[i].getKey()?o:i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},r.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.wf(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},r.tf=function(t){return 2*t+1},r.zf=function(t){return 2*t+2},r.wf=function(t){return t-1>>1},r.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].gd);return e},r.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},r.va=function(t){return N(this.Y,function(e){return e.getKey()==t})},r.clone=function(){return new Sn(this)},r.C=function(){return this.Y.length},r.X=function(){return 0==this.Y.length},r.clear=function(){O(this.Y)},E(In,Sn),In.prototype.enqueue=function(t,e){this.ce(t,e)},In.prototype.ab=function(){return this.remove()},E(xn,En),(r=xn.prototype).Mb=function(t,e){if(!t)return(t=xn.L.Mb.call(this))&&this.Ac&&(this.Gd=s.setTimeout(b(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},r.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},r.nc=function(t){xn.L.nc.call(this,t),this.Nb()},r.Cb=function(){xn.L.Cb.call(this),this.Nb()},r.F=function(){xn.L.F.call(this),s.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},E(kn,xn),kn.prototype.xc=function(){var t=new sn,e=this.Jf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Ab&&t.Je(!0),t},kn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},yn.prototype.createWebChannel=yn.prototype.cf,mn.prototype.send=mn.prototype.send,mn.prototype.open=mn.prototype.open,mn.prototype.close=mn.prototype.close,Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,Te.COMPLETE="complete",Se.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",jt.prototype.listen=jt.prototype.nb,kn.prototype.getObject=kn.prototype.Mb,kn.prototype.releaseObject=kn.prototype.og,sn.prototype.listenOnce=sn.prototype.Oc,sn.prototype.getLastError=sn.prototype.Hc,sn.prototype.getLastErrorCode=sn.prototype.Ud,sn.prototype.getStatus=sn.prototype.za,sn.prototype.getStatusText=sn.prototype.Yd,sn.prototype.getResponseJson=sn.prototype.yf,sn.prototype.getResponseText=sn.prototype.ya,sn.prototype.getResponseText=sn.prototype.ya,sn.prototype.send=sn.prototype.send;var An={createWebChannelTransport:wn,ErrorCode:Ee,EventType:Te,WebChannel:Se,XhrIoPool:kn},Dn=An.createWebChannelTransport,Nn=An.ErrorCode,On=An.EventType,Pn=An.WebChannel,Rn=An.XhrIoPool;e.default=An},zUnb:function(t,e,n){"use strict";n.r(e);var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}function f(t){return"function"==typeof t}var d=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){d=t},get useDeprecatedSynchronousErrorHandling(){return d}};function y(t){setTimeout(function(){throw t})}var m={closed:!0,next:function(t){},error:function(t){if(p.useDeprecatedSynchronousErrorHandling)throw t;y(t)},complete:function(){}},g=Array.isArray||function(t){return t&&"number"==typeof t.length};function v(t){return null!=t&&"object"==typeof t}var b,w={e:{}};function _(){try{return b.apply(this,arguments)}catch(t){return w.e=t,w}}function E(t){return b=t,_}function T(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}T.prototype=Object.create(Error.prototype);var C=T,S=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;n;)n.remove(this),n=++s<a&&r[s]||null;if(f(i)&&E(i).call(this)===w&&(e=!0,t=t||(w.e instanceof C?I(w.e.errors):[w.e])),g(o))for(s=-1,a=o.length;++s<a;){var u=o[s];if(v(u)&&E(u.unsubscribe).call(u)===w){e=!0,t=t||[];var c=w.e;c instanceof C?t=t.concat(I(c.errors)):t.push(c)}}if(e)throw new C(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function I(t){return t.reduce(function(t,e){return t.concat(e instanceof C?e.errors:e)},[])}var x="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),k=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=m;break;case 1:if(!n){o.destination=m;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new A(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new A(o,n,r,i)}return o}return i(e,t),e.prototype[x]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(S),A=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return f(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==m&&(f((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):y(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;y(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};p.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw t;y(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return p.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(y(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(k),D="function"==typeof Symbol&&Symbol.observable||"@@observable";var N=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof k)return t;if(t[x])return t[x]()}return t||e||n?new k(t,e,n):new k(m)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),p.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){p.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof k?e:null}return!0}(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=O(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[D]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;return new(t=O(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function O(t){if(t||(t=p.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function P(t){return t&&"function"==typeof t.schedule}var R=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(k),M=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},L=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,y),e}},F=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),j=function(t){return function(e){for(var n=t[F]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},V=function(t){return function(e){var n=t[D]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},q=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function B(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var U=function(t){if(t instanceof N)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[D])return V(t);if(q(t))return M(t);if(B(t))return L(t);if(t&&"function"==typeof t[F])return j(t);var e=v(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(k);function H(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Q(t,e))}}var Q=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new K(t,this.project,this.thisArg))},t}(),K=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(k);function W(t,e){return new N(e?function(n){var r=new S,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:M(t))}function G(t,e){if(!e)return t instanceof N?t:new N(U(t));if(null!=t){if(function(t){return t&&"function"==typeof t[D]}(t))return function(t,e){return new N(e?function(n){var r=new S;return r.add(e.schedule(function(){var i=t[D]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:V(t))}(t,e);if(B(t))return function(t,e){return new N(e?function(n){var r=new S;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:L(t))}(t,e);if(q(t))return W(t,e);if(function(t){return t&&"function"==typeof t[F]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new N(e?function(n){var r,i=new S;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[F](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:j(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Y(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Y(function(n,r){return G(t(n,r)).pipe(H(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new X(t,n))})}var X=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new J(t,this.project,this.concurrent))},t}(),J=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r,i,o=new R(this,void 0,void 0);this.destination.add(o),r=t,void 0===(i=o)&&(i=new R(this,e,n)),i.closed||U(r)(i)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(z);function Z(t){return t}function $(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}$.prototype=Object.create(Error.prototype);var tt=$,et=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(S),nt=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(k),rt=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[x]=function(){return new nt(this)},e.prototype.lift=function(t){var e=new it(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new tt;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new tt;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new tt;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new tt;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new tt;return this.hasError?(t.error(this.thrownError),S.EMPTY):this.isStopped?(t.complete(),S.EMPTY):(this.observers.push(t),new et(this,t))},e.prototype.asObservable=function(){var t=new N;return t.source=this,t},e.create=function(t,e){return new it(t,e)},e}(N),it=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):S.EMPTY},e}(rt);function ot(){return function(t){return t.lift(new st(t))}}var st=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new at(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),at=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(k),ut=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new S).add(this.source.subscribe(new lt(this.getSubject(),this))),t.closed?(this._connection=null,t=S.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return ot()(this)},e}(N).prototype,ct={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ut._subscribe},_isComplete:{value:ut._isComplete,writable:!0},getSubject:{value:ut.getSubject},connect:{value:ut.connect},refCount:{value:ut.refCount}},lt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(nt);function ht(){return new rt}function ft(){return function(t){return ot()((e=ht,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,ct);return r.source=t,r.subjectFactory=n,r})(t));var e}}function dt(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var pt=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?dt({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),yt="__parameters__";function mt(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,h(e));for(var i in r)this[i]=r[i]}}}(e);function i(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=new((t=i).bind.apply(t,h([void 0],e)));return s.annotation=o,s;function s(t,e,n){for(var r=t.hasOwnProperty(yt)?t[yt]:Object.defineProperty(t,yt,{value:[]})[yt];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}Function;var gt="undefined"!=typeof window&&window,vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt="undefined"!=typeof global&&global||gt||vt,wt=Promise.resolve(0),_t=null;function Et(){if(!_t){var t=bt.Symbol;if(t&&t.iterator)_t=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(_t=r)}}return _t}function Tt(t){"undefined"==typeof Zone?wt.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Ct(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function St(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(St).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function It(t){return t.__forward_ref__=It,t.toString=function(){return St(this())},t}function xt(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===It?t():t}var kt=mt("Inject",function(t){return{token:t}}),At=mt("Optional"),Dt=mt("Self"),Nt=mt("SkipSelf"),Ot="__source",Pt=new Object,Rt=Pt,Mt=new pt("INJECTOR"),Lt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Pt),e===Pt)throw new Error("NullInjectorError: No provider for "+St(t)+"!");return e},t}(),Ft=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new Wt(t,e):new Wt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=Pt,t.NULL=new Lt,t.ngInjectableDef=dt({providedIn:"any",factory:function(){return $t(Mt)}}),t}(),jt=function(t){return t},Vt=[],qt=jt,Bt=function(){return Array.prototype.slice.call(arguments)},Ut={},zt=function(t){for(var e in t)if(t[e]===Ut)return e;throw Error("!prop")}({provide:String,useValue:Ut}),Ht=Ft.NULL,Qt=/\n/gm,Kt="\u0275",Wt=function(){function t(t,e,n){void 0===e&&(e=Ht),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(Ft,{token:Ft,fn:jt,deps:Vt,value:this,useNew:!1}),r.set(Mt,{token:Mt,fn:jt,deps:Vt,value:this,useNew:!1}),function t(e,n){if(n)if((n=xt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw Xt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Xt("Unexpected provider",n);var i=xt(n.provide),o=function(t){var e=function(t){var e=Vt,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=xt(n[r]))instanceof Array)for(var o=0,s=u;o<s.length;o++){var a=s[o];a instanceof At||a==At?i|=1:a instanceof Nt||a==Nt?i&=-3:a instanceof Dt||a==Dt?i&=-5:u=a instanceof kt?a.token:xt(a)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=xt(t.useExisting),options:6}]}else if(!(n||zt in t))throw Xt("'deps' required",t);return e}(t),n=jt,r=Vt,i=!1,o=xt(t.provide);if(zt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=xt(t.useClass);else{if("function"!=typeof o)throw Xt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var s=e.get(i);if(s){if(s.fn!==Bt)throw Gt(i)}else e.set(i,s={token:n.provide,deps:[],useNew:!1,fn:Bt,value:Vt});s.deps.push({token:i=n,options:6})}var a=e.get(i);if(a&&a.fn==Bt)throw Gt(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var r=this._records.get(t);try{return function t(e,n,r,i,o,s){try{return function(e,n,r,i,o,s){var a,u;if(!n||4&s)2&s||(u=i.get(e,o,0));else{if((u=n.value)==qt)throw Error(Kt+"Circular dependency");if(u===Vt){n.value=qt;var c=n.useNew,l=n.fn,f=n.deps,d=Vt;if(f.length){d=[];for(var p=0;p<f.length;p++){var y=f[p],m=y.options,g=2&m?r.get(y.token):void 0;d.push(t(y.token,g,r,g||4&m?i:Ht,1&m?null:Ft.THROW_IF_NOT_FOUND,0))}}n.value=u=c?new((a=l).bind.apply(a,h([void 0],d))):l.apply(void 0,d)}}return u}(e,n,r,i,o,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==qt&&(n.value=Vt),t}}(t,r,this._records,this.parent,e,n)}catch(e){var i=e.ngTempTokenPath;throw t[Ot]&&i.unshift(t[Ot]),e.message=Yt("\n"+e.message,i,this.source),e.ngTokenPath=i,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(St(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Gt(t){return Xt("Cannot mix multi providers and regular providers",t)}function Yt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Kt?t.substr(2):t;var r=St(e);if(e instanceof Array)r=e.map(St).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];i.push(o+":"+("string"==typeof s?JSON.stringify(s):St(s)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(Qt,"\n  ")}function Xt(t,e){return new Error(Yt(t,e))}var Jt=void 0;function Zt(t){var e=Jt;return Jt=t,e}function $t(t,e){if(void 0===e&&(e=0),void 0===Jt)throw new Error("inject() must be called from an injection context");if(null===Jt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+St(t)+"]")}return Jt.get(t,8&e?null:void 0,e)}function te(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=0,s=0;s<r.length;s++){var a=r[s];a instanceof At||"Optional"===a.ngMetadataName?o|=8:a instanceof Nt||"SkipSelf"===a.ngMetadataName?o|=4:a instanceof Dt||"Self"===a.ngMetadataName?o|=2:i=a instanceof kt?a.token:a}e.push($t(i,o))}else e.push($t(r))}return e}String;var ee=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),ne=new function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("6.1.10"),re="ngDebugContext",ie="ngOriginalError",oe="ngErrorLogger";function se(t){return t[re]}function ae(t){return t[ie]}function ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,h(e))}var ce=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[oe]||ue}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?se(t)?se(t):this._findContext(ae(t)):null},t.prototype._findOriginalError=function(t){for(var e=ae(t);e&&ae(e);)e=ae(e);return e},t}(),le=new pt("The presence of this token marks an injector as being the root injector."),he={},fe={},de=[],pe=void 0;function ye(){return void 0===pe&&(pe=new Lt),pe}var me=function(){function t(t,e,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,be([t],function(t){return r.processInjectorType(t,new Set)}),e&&be(e,function(t){return r.processProvider(t)}),this.records.set(Mt,ve(void 0,this)),this.isRootInjector=this.records.has(le),this.injectorDefTypes.forEach(function(t){return r.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=Rt),void 0===n&&(n=0),this.assertNotDestroyed();var r,i=Zt(this);try{if(!(4&n)){var o=this.records.get(t);if(void 0===o){var s=("function"==typeof(r=t)||"object"==typeof r&&r instanceof pt)&&t.ngInjectableDef||void 0;void 0!==s&&this.injectableDefInScope(s)&&(o=ge(t),this.records.set(t,o))}if(void 0!==o)return this.hydrate(t,o)}return 2&n&&ye(),this.parent.get(t,e)}finally{Zt(i)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,r=(t=xt(t)).ngInjectorDef,i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=void 0!==i&&t.providers||de;if(void 0!==i&&(r=i.ngInjectorDef),null!=r){if(e.has(o))throw new Error("Circular dependency: type "+St(o)+" ends up importing itself.");if(this.injectorDefTypes.add(o),this.records.set(o,ve(r.factory)),null!=r.imports){e.add(o);try{be(r.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(o)}}null!=r.providers&&be(r.providers,function(t){return n.processProvider(t)}),be(s,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=we(t=xt(t))?t:xt(t.provide),n=function(t){var e=xt(t),n=he,r=void 0;if(we(t))return ge(t);if(e=xt(t.provide),zt in t)n=t.useValue;else if(t.useExisting)r=function(){return $t(t.useExisting)};else if(t.useFactory)r=function(){return t.useFactory.apply(t,h(te(t.deps||[])))};else{var i=t.useClass||e;if(!t.deps)return ge(i);r=function(){return new(i.bind.apply(i,h([void 0],te(t.deps))))}}return ve(r,n)}(t);if(we(t)||!0!==t.multi){var r=this.records.get(e);if(r&&void 0!==r.multi)throw new Error("Mixed multi-provider for "+St(e))}else{var i=this.records.get(e);if(i){if(void 0===i.multi)throw new Error("Mixed multi-provider for "+e+".")}else(i=ve(void 0,he,!0)).factory=function(){return te(i.multi)},this.records.set(e,i);e=t,i.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===fe)throw new Error("Circular dep for "+St(t));var n;return e.value===he&&(e.value=fe,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function ge(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof pt)throw new Error("Token "+St(t)+" is missing an ngInjectableDef definition.");return ve(function(){return new t})}return ve(e.factory)}function ve(t,e,n){return void 0===e&&(e=he),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function be(t,e){t.forEach(function(t){return Array.isArray(t)?be(t,e):e(t)})}function we(t){return"function"==typeof t}function _e(t){return!!t&&"function"==typeof t.then}var Ee=new pt("Application Initializer"),Te=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();_e(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},s([a(0,kt(Ee)),a(0,At())],t)}(),Ce=new pt("AppId");function Se(){return""+Ie()+Ie()+Ie()}function Ie(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var xe=new pt("Platform Initializer"),ke=new pt("Platform ID"),Ae=new pt("appBootstrapListener"),De=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}();function Ne(){throw new Error("Runtime compiler is not loaded")}var Oe=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw Ne()},t.prototype.compileModuleAsync=function(t){throw Ne()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw Ne()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw Ne()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Pe=function(){},Re=function(){},Me=function(){};function Le(t){var e=Error("No component factory found for "+St(t)+". Did you add it to @NgModule.entryComponents?");return e[Ve]=t,e}var Fe,je,Ve="ngComponent",qe=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw Le(t)},t}(),Be=function(){function t(){}return t.NULL=new qe,t}(),Ue=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Le(t);return new ze(e,this._ngModule)},t}(),ze=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return i(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(Me),He=function(){},Qe=function(){},Ke=function(){var t=bt.wtf;return!(!t||!(Fe=t.trace)||(je=Fe.events,0))}();function We(t,e){return null}var Ge=Ke?function(t,e){return void 0===e&&(e=null),je.createScope(t,e)}:function(t,e){return We},Ye=Ke?function(t,e){return Fe.leaveScope(t,e),e}:function(t,e){return e},Xe=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return i(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},s=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var a=t.prototype.subscribe.call(this,i,o,s);return e instanceof S&&e.add(a),a},e}(rt),Je=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,s){try{return en(e),t.invokeTask(r,i,o,s)}finally{nn(e)}},onInvoke:function(t,n,r,i,o,s,a){try{return en(e),t.invoke(r,i,o,s,a)}finally{nn(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,tn(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,$e,Ze,Ze);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Ze(){}var $e={};function tn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function en(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function nn(t){t._nesting--,tn(t)}var rn,on=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),sn=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Je.assertNotInAngularZone(),Tt(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())Tt(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),an=function(){function t(){this._applications=new Map,un.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),un.findTestabilityInTree(this,t,e)},s([u("design:paramtypes",[])],t)}(),un=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),cn=!0,ln=!1,hn=new pt("AllowMultipleToken");function fn(){return ln=!0,cn}var dn=function(t,e){this.name=t,this.token=e};function pn(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new pt(r);return function(e){void 0===e&&(e=[]);var o=yn();if(!o||o.injector.get(hn,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var s=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(rn&&!rn.destroyed&&!rn.injector.get(hn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");rn=t.get(mn);var e=t.get(xe,null);e&&e.forEach(function(t){return t()})}(Ft.create({providers:s,name:r}))}return function(t){var e=yn();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function yn(){return rn&&!rn.destroyed?rn:null}var mn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new on:("zone.js"===n?void 0:n)||new Je({enableLongStackTrace:fn()}),o=[{provide:Je,useValue:i}];return i.run(function(){var e=Ft.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),s=n.injector.get(ce,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return bn(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){s.handleError(t)}})}),function(t,e,i){try{var o=((s=n.injector.get(Te)).runInitializers(),s.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return _e(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var s}(s,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(Pe),i=gn({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(vn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+St(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function gn(t,e){return Array.isArray(e)?e.reduce(gn,t):o({},t,e)}var vn=function(){function t(t,e,n,r,i,o){var s=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=fn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var a=new N(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),u=new N(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Je.assertNotInAngularZone(),Tt(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Je.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return P(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof N?t[0]:function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Y(Z,t)}(n)(W(t,r))}(a,u.pipe(ft()))}var e;return e=t,t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Me?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof ze?null:this._injector.get(He),o=n.create(Ft.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var s=o.injector.get(sn,null);return s&&o.injector.get(an).registerApplication(o.location.nativeElement,s),this._loadComponent(o),fn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(e){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(e)})}finally{this._runningTick=!1,Ye(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;bn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ae,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),bn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Ge("ApplicationRef#tick()"),t}();function bn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var wn=function(){},_n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),En=function(){},Tn=function(t){this.nativeElement=t},Cn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Xe,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[Et()]=function(){return this._results[Et()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Sn=function(){},In=function(){},xn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof kn?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),kn=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return i(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,h([i+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return function t(e,n,r){e.childNodes.forEach(function(e){e instanceof kn&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return function t(e,n,r){e instanceof kn&&e.childNodes.forEach(function(e){n(e)&&r.push(e),e instanceof kn&&t(e,n,r)})}(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(xn),An=new Map;function Dn(t){return An.get(t)||null}function Nn(t){An.set(t.nativeNode,t)}function On(t,e){var n=Mn(t),r=Mn(e);return n&&r?function(t,e,n){for(var r=t[Et()](),i=e[Et()]();;){var o=r.next(),s=i.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}(t,e,On):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||Ct(t,e)}var Pn=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Rn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Mn(t){return!!Ln(t)&&(Array.isArray(t)||!(t instanceof Map)&&Et()in t)}function Ln(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Fn=function(){function t(){}return t.prototype.supports=function(t){return Mn(t)},t.prototype.create=function(t){return new Vn(t)},t}(),jn=function(t,e){return e},Vn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||jn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<zn(n,r,i)?e:n,s=zn(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}s!==a&&t(o,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Mn(t))throw new Error("Error trying to diff '"+St(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(var a=0;a<this.length;a++)i=this._trackByFn(a,r=t[a]),null!==o&&Ct(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,a)),Ct(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,a),s=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[Et()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Ct(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),Ct(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ct(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ct(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new qn(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Un),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Un),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),qn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Bn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ct(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Un=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Bn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function zn(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Hn=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Ln(t)},t.prototype.create=function(){return new Qn},t}(),Qn=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Ln(t)))throw new Error("Error trying to diff '"+St(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Kn(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Ct(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Kn=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Wn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Nt,new At]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=dt({providedIn:"root",factory:function(){return new t([new Fn])}}),t}(),Gn=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new Nt,new At]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Yn=[new Hn],Xn=new Wn([new Fn]),Jn=new Gn(Yn),Zn=pn(null,"core",[{provide:ke,useValue:"unknown"},{provide:mn,deps:[Ft]},{provide:an,deps:[]},{provide:De,deps:[]}]),$n=new pt("LocaleId");function tr(){return Xn}function er(){return Jn}function nr(t){return t||"en-US"}var rr=function(t){},ir=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),or=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,sr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ar(t){return(t=String(t)).match(or)||t.match(sr)?t:(fn()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function ur(t){var e,n,r={};try{for(var i=c(t.split(",")),o=i.next();!o.done;o=i.next())r[o.value]=!0}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function cr(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};try{for(var o=c(n),s=o.next();!s.done;s=o.next()){var a=s.value;for(var u in a)a.hasOwnProperty(u)&&(i[u]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return i}var lr,hr=ur("area,br,col,hr,img,wbr"),fr=ur("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dr=ur("rp,rt"),pr=cr(dr,fr),yr=cr(hr,cr(fr,ur("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cr(dr,ur("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pr),mr=ur("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gr=ur("srcset"),vr=cr(mr,gr,ur("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),br=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(yr.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),s=o.name,a=s.toLowerCase();if(vr.hasOwnProperty(a)){var u=o.value;mr[a]&&(u=ar(u)),gr[a]&&(n=u,u=(n=String(n)).split(",").map(function(t){return ar(t.trim())}).join(", ")),this.buf.push(" ",s,'="',Er(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();yr.hasOwnProperty(e)&&!hr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Er(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),wr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_r=/([^\#-~ |!])/g;function Er(t){return t.replace(/&/g,"&amp;").replace(wr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_r,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Tr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Cr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Sr=/^url\(([^)]+)\)$/,Ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),xr=function(){};function kr(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Ar(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Dr(t,e){return t.nodes[e]}function Nr(t,e){return t.nodes[e]}function Or(t,e){return t.nodes[e]}function Pr(t,e){return t.nodes[e]}function Rr(t,e){return t.nodes[e]}var Mr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Lr(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Fr(n,e),n}(i,t)}function Fr(t,e){t[re]=e,t[oe]=e.logError.bind(e)}function jr(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Vr=function(){},qr=new Map;function Br(t){var e=qr.get(t);return e||(e=St(t)+"_"+qr.size,qr.set(t,e)),e}function Ur(t,e,n,r){if(Pn.isWrapped(r)){r=Pn.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=Pn.unwrap(t.oldValues[i]);t.oldValues[i]=new Pn(o)}return r}var zr="$$undefined",Hr="$$empty";function Qr(t){return{id:zr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Kr=0;function Wr(t,e,n,r){return!(!(2&t.state)&&Ct(t.oldValues[e.bindingIndex+n],r))}function Gr(t,e,n,r){return!!Wr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Yr(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!On(i,r)){var o=e.bindings[n].name;throw Lr(Mr.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function Xr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Jr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Zr(t,e,n,r){try{return Xr(33554432&t.def.nodes[e].flags?Nr(t,e).componentView:t),Mr.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function $r(t){return t.parent?Nr(t.parent,t.parentNodeDef.nodeIndex):null}function ti(t){return t.parent?t.parentNodeDef.parent:null}function ei(t,e){switch(201347067&e.flags){case 1:return Nr(t,e.nodeIndex).renderElement;case 2:return Dr(t,e.nodeIndex).renderText}}function ni(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ri(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ii(t){return 1<<t%32}function oi(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=l(t,2),o=i[0],s=i[1];"number"==typeof o?(e[o]=s,n|=ii(o)):r[o]=s}),{matchedQueries:e,references:r,matchedQueryIds:n}}function si(t,e){return t.map(function(t){var n,r,i;return Array.isArray(t)?(i=(n=l(t,2))[0],r=n[1]):(i=0,r=t),r&&("function"==typeof r||"object"==typeof r)&&e&&Object.defineProperty(r,Ot,{value:e,configurable:!0}),{flags:i,token:r,tokenKey:Br(r)}})}function ai(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===ee.Native?Nr(t,n.renderParent.nodeIndex).renderElement:void 0:e}var ui=new WeakMap;function ci(t){var e=ui.get(t);return e||((e=t(function(){return Vr})).factory=t,ui.set(t,e)),e}function li(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(ei(t,t.def.lastRenderRootNode))),hi(t,e,0,t.def.nodes.length-1,n,r,i)}function hi(t,e,n,r,i,o,s){for(var a=n;a<=r;a++){var u=t.def.nodes[a];11&u.flags&&di(t,u,e,i,o,s),a+=u.childCount}}function fi(t,e,n,r,i,o){for(var s=t;s&&!ni(s);)s=s.parent;for(var a=s.parent,u=ti(s),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=a.def.nodes[l];h.ngContentIndex===e&&di(a,h,n,r,i,o),l+=h.childCount}if(!a.parent){var f=t.root.projectableNodes[e];if(f)for(l=0;l<f.length;l++)pi(t,f[l],n,r,i,o)}}function di(t,e,n,r,i,o){if(8&e.flags)fi(t,e.ngContent.index,n,r,i,o);else{var s=ei(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&pi(t,s,n,r,i,o),32&e.bindingFlags&&pi(Nr(t,e.nodeIndex).componentView,s,n,r,i,o)):pi(t,s,n,r,i,o),16777216&e.flags)for(var a=Nr(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<a.length;u++)li(a[u],n,r,i,o);1&e.flags&&!e.element.name&&hi(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function pi(t,e,n,r,i,o){var s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}var yi=/^:([^:]+):(.+)$/;function mi(t){if(":"===t[0]){var e=t.match(yi);return[e[1],e[2]]}return["",t]}function gi(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function vi(t,e,n,r,i,o){t|=1;var s=oi(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s.matchedQueries,matchedQueryIds:s.matchedQueryIds,references:s.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ci(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Vr},provider:null,text:null,query:null,ngContent:null}}function bi(t,e,n,r,i,o,s,a,u,c,h,f){var d;void 0===s&&(s=[]),c||(c=Vr);var p=oi(n),y=p.matchedQueries,m=p.references,g=p.matchedQueryIds,v=null,b=null;o&&(v=(d=l(mi(o),2))[0],b=d[1]),a=a||[];for(var w=new Array(a.length),_=0;_<a.length;_++){var E=l(a[_],3),T=E[0],C=E[2],S=l(mi(E[1]),2),I=S[0],x=S[1],k=void 0,A=void 0;switch(15&T){case 4:A=C;break;case 1:case 8:k=C}w[_]={flags:T,ns:I,name:x,nonMinifiedName:x,securityContext:k,suffix:A}}u=u||[];var D=new Array(u.length);for(_=0;_<u.length;_++){var N=l(u[_],2);D[_]={type:0,target:N[0],eventName:N[1],propName:null}}var O=(s=s||[]).map(function(t){var e=l(t,2),n=e[1],r=l(mi(e[0]),2);return[r[0],r[1],n]});return f=function(t){if(t&&t.id===zr){var e=null!=t.encapsulation&&t.encapsulation!==ee.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Kr++:Hr}return t&&t.id===Hr&&(t=null),t||null}(f),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:y,matchedQueryIds:g,references:m,ngContentIndex:r,childCount:i,bindings:w,bindingFlags:gi(w),outputs:D,element:{ns:v,name:b,attrs:O,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:c||Vr},provider:null,text:null,query:null,ngContent:null}}function wi(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,s=t.renderer;if(t.parent||!o){r=i.name?s.createElement(i.name,i.ns):s.createComment("");var a=ai(t,e,n);a&&s.appendChild(a,r)}else r=s.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=l(i.attrs[u],3);s.setAttribute(r,c[1],c[2],c[0])}return r}function _i(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],s=Ei(t,n.nodeIndex,(h=o.eventName,(l=o.target)?l+":"+h:h)),a=o.target,u=t;"component"===o.target&&(a=null,u=e);var c=u.renderer.listen(a||r,o.eventName,s);t.disposables[n.outputIndex+i]=c}var l,h}function Ei(t,e,n){return function(r){return Zr(t,e,n,r)}}function Ti(t,e,n,r){if(!Gr(t,e,n,r))return!1;var i=e.bindings[n],o=Nr(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var s=e.securityContext,a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(Ir.STYLE,i);if(null!=o){o=o.toString();var s=e.suffix;null!=s&&(o+=s)}else o=null;var a=t.renderer;null!=o?a.setStyle(n,r,o):a.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}var Ci=new Object,Si=Br(Ft),Ii=Br(Mt),xi=Br(He);function ki(t,e,n,r){return n=xt(n),{index:-1,deps:si(r,St(e)),flags:t,token:e,value:n}}function Ai(t,e,n){void 0===n&&(n=Ft.THROW_IF_NOT_FOUND);var r,i,o=Zt(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var s=e.tokenKey;switch(s){case Si:case Ii:case xi:return t}var a=t._def.providersByKey[s];if(a){var u=t._providers[a.index];return void 0===u&&(u=t._providers[a.index]=Di(t,a)),u===Ci?void 0:u}if(e.token.ngInjectableDef&&(r=t,null!=(i=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var c=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:c,token:e.token},t._providers[c]=Ci,t._providers[c]=Di(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Zt(o)}}function Di(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Ai(t,n[0]));case 2:return new e(Ai(t,n[0]),Ai(t,n[1]));case 3:return new e(Ai(t,n[0]),Ai(t,n[1]),Ai(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Ai(t,n[o]);return new(e.bind.apply(e,h([void 0],i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Ai(t,n[0]));case 2:return e(Ai(t,n[0]),Ai(t,n[1]));case 3:return e(Ai(t,n[0]),Ai(t,n[1]),Ai(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Ai(t,n[o]);return e.apply(void 0,h(i))}}(t,e.value,e.deps);break;case 2048:n=Ai(t,e.deps[0]);break;case 256:n=e.value}return n===Ci||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Ci:n}function Ni(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Mi(n,e),Mr.dirtyParentQueries(r),Pi(r),r}function Oi(t,e,n){var r=e?ei(e,e.def.lastRenderRootNode):t.renderElement;li(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Pi(t){li(t,3,null,null,void 0)}function Ri(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Mi(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Li=new Object,Fi=function(t){function e(e,n,r,i,o,s){var a=t.call(this)||this;return a.selector=e,a.componentType=n,a._inputs=i,a._outputs=o,a.ngContentSelectors=s,a.viewDefFactory=r,a}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=ci(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=Mr.createRootView(t,e||[],n,i,r,Li),a=Or(s,o).instance;return n&&s.renderer.setAttribute(Nr(s,0).renderElement,"ng-version",ne.full),new ji(s,new Ui(s),a)},e}(Me),ji=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return i(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Tn(Nr(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Ki(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(Re);function Vi(t,e,n){return new qi(t,e,n)}var qi=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Tn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Ki(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=ti(t),t=t.parent;return t?new Ki(t,e):new Ki(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Ni(this._data,t);Mr.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Ui(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof ze||(i=o.get(He));var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,s=t;return i=s._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,Ri(o,r,i),function(t,e){var n=$r(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),Mr.dirtyParentQueries(i),Oi(n,r>0?o[r-1]:null,i),s.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,s,a=this._embeddedViews.indexOf(t._view);return i=e,s=(o=(n=this._data).viewContainer._embeddedViews)[r=a],Mi(o,r),null==i&&(i=o.length),Ri(o,i,s),Mr.dirtyParentQueries(s),Pi(s),Oi(n,i>0?o[i-1]:null,s),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Ni(this._data,t);e&&Mr.destroyView(e)},t.prototype.detach=function(t){var e=Ni(this._data,t);return e?new Ui(e):null},t}();function Bi(t){return new Ui(t)}var Ui=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return li(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Xr(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Mr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Mr.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Mr.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Pi(this._view),Mr.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function zi(t,e){return new Hi(t,e)}var Hi=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return i(e,t),e.prototype.createEmbeddedView=function(t){return new Ui(Mr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Tn(Nr(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Sn);function Qi(t,e){return new Ki(t,e)}var Ki=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),Mr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Br(t)},e)},t}();function Wi(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Nr(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Dr(t,n.nodeIndex).renderText;if(20240&n.flags)return Or(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Gi(t){return new Yi(t.renderer)}var Yi=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=l(mi(e),2),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=l(mi(e),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Xi(t,e,n,r){return new Ji(t,e,n,r)}var Ji=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Di(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=Ft.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Ai(this,{token:t,tokenKey:Br(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Be)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+St(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Ci){var s=o.ngOnDestroy;"function"!=typeof s||r.has(o)||(s.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),Zi=Br(function(){}),$i=Br(En),to=Br(Tn),eo=Br(In),no=Br(Sn),ro=Br(function(){}),io=Br(Ft),oo=Br(Mt);function so(t,e,n,r,i,o,s,a){var u=[];if(s)for(var c in s){var h=l(s[c],2);u[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var f=[];if(a)for(var d in a)f.push({type:1,propName:d,target:null,eventName:a[d]});return ao(t,e|=16384,n,r,i,i,o,u,f)}function ao(t,e,n,r,i,o,s,a,u){var c=oi(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),a||(a=[]),o=xt(o);var d=si(s,St(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:gi(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function uo(t,e){return fo(t,e)}function co(t,e){for(var n=t;n.parent&&!ni(n);)n=n.parent;return po(n.parent,ti(n),!0,e.provider.value,e.provider.deps)}function lo(t,e){var n=po(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(ho(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function ho(t,e,n){return function(r){return Zr(t,e,n,r)}}function fo(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return po(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(mo(t,e,n,i[0]));case 2:return r(mo(t,e,n,i[0]),mo(t,e,n,i[1]));case 3:return r(mo(t,e,n,i[0]),mo(t,e,n,i[1]),mo(t,e,n,i[2]));default:for(var s=Array(o),a=0;a<o;a++)s[a]=mo(t,e,n,i[a]);return r.apply(void 0,h(s))}}(t,e.parent,n,r.value,r.deps);case 2048:return mo(t,e.parent,n,r.deps[0]);case 256:return r.value}}function po(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(mo(t,e,n,i[0]));case 2:return new r(mo(t,e,n,i[0]),mo(t,e,n,i[1]));case 3:return new r(mo(t,e,n,i[0]),mo(t,e,n,i[1]),mo(t,e,n,i[2]));default:for(var s=new Array(o),a=0;a<o;a++)s[a]=mo(t,e,n,i[a]);return new(r.bind.apply(r,h([void 0],s)))}}var yo={};function mo(t,e,n,r,i){if(void 0===i&&(i=Ft.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var s=r.tokenKey;s===ro&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var a=t;a;){if(e)switch(s){case Zi:return Gi(go(a,e,n));case $i:return go(a,e,n).renderer;case to:return new Tn(Nr(a,e.nodeIndex).renderElement);case eo:return Nr(a,e.nodeIndex).viewContainer;case no:if(e.element.template)return Nr(a,e.nodeIndex).template;break;case ro:return Bi(go(a,e,n));case io:case oo:return Qi(a,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[s];if(u){var c=Or(a,u.nodeIndex);return c||(c={instance:fo(a,u)},a.nodes[u.nodeIndex]=c),c.instance}}n=ni(a),e=ti(a),a=a.parent,4&r.flags&&(a=null)}var l=o.root.injector.get(r.token,yo);return l!==yo||i===yo?l:o.root.ngModule.injector.get(r.token,i)}function go(t,e,n){var r;if(n)r=Nr(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!ni(r);)r=r.parent;return r}function vo(t,e,n,r,i,o){if(32768&n.flags){var s=Nr(t,n.parent.nodeIndex).componentView;2&s.def.flags&&(s.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var a=Pn.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Rn(a,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function bo(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],s=o.parent;for(!s&&o.flags&e&&_o(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=wo(t,s,e,r)),s=s.parent}}function wo(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&_o(t,i,o.flags&n,r++),i+=o.childCount}return r}function _o(t,e,n,r){var i=Or(t,e);if(i){var o=i.instance;o&&(Mr.setCurrentNode(t,e),1048576&n&&Ar(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ar(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Eo(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ii(e),bindings:r},ngContent:null}}function To(t){for(var e=t.def.nodeMatchedQueries;t.parent&&ri(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Rr(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Rr(t,i).setDirty(),i+=o.childCount}}function Co(t,e){var n=Rr(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=So(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Or(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=So(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var s=e.query.bindings,a=!1,u=0;u<s.length;u++){var c=s[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,a=!0}r[c.propName]=l}a&&n.notifyOnChanges()}}function So(t,e,n,r,i){for(var o=e;o<=n;o++){var s=t.def.nodes[o],a=s.matchedQueries[r.id];if(null!=a&&i.push(Io(t,s,a)),1&s.flags&&s.element.template&&(s.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Nr(t,o);if((s.childMatchedQueries&r.filterId)===r.filterId&&(So(t,o+1,o+s.childCount,r,i),o+=s.childCount),16777216&s.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=$r(h);f&&f===u&&So(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(l=0;l<d.length;l++){var p=d[l];So(p,0,p.def.nodes.length-1,r,i)}}(s.childMatchedQueries&r.filterId)!==r.filterId&&(o+=s.childCount)}return i}function Io(t,e,n){if(null!=n)switch(n){case 1:return Nr(t,e.nodeIndex).renderElement;case 0:return new Tn(Nr(t,e.nodeIndex).renderElement);case 2:return Nr(t,e.nodeIndex).template;case 3:return Nr(t,e.nodeIndex).viewContainer;case 4:return Or(t,e.nodeIndex).instance}}function xo(t,e,n){var r=ai(t,e,n);r&&fi(t,n.ngContent.index,1,r,null,void 0)}function ko(t,e){return Do(128,t,new Array(e+1))}function Ao(t,e){for(var n=Object.keys(e),r=n.length,i=new Array(r),o=0;o<r;o++){var s=n[o];i[e[s]]=s}return Do(64,t,i)}function Do(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:gi(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function No(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Oo(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=ai(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Po(t,e){return(null!=t?t.toString():"")+e.suffix}function Ro(t,e,n,r){for(var i=0,o=0,s=0,a=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<e.length;p++){var y=e[p];if(y.nodeIndex=p,y.parent=c,y.bindingIndex=i,y.outputIndex=o,y.renderParent=l,s|=y.flags,u|=y.matchedQueryIds,y.element){var m=y.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(Lo(c,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!l&&3&y.flags&&(d=y),20224&y.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var g=0!=(32768&y.flags);0==(8192&y.flags)||g?c.element.publicProviders[Br(y.provider.token)]=y:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Br(y.provider.token)]=y),g&&(c.element.componentProvider=y)}if(c?(c.childFlags|=y.flags,c.directChildFlags|=y.flags,c.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(c.childMatchedQueries|=y.element.template.nodeMatchedQueries)):a|=y.flags,y.childCount>0)c=y,Mo(y)||(l=y);else for(;c&&p===c.nodeIndex+c.childCount;){var v=c.parent;v&&(v.childFlags|=c.childFlags,v.childMatchedQueries|=c.childMatchedQueries),l=(c=v)&&Mo(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Vr,updateRenderer:r||Vr,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function Mo(t){return 0!=(1&t.flags)&&null===t.element.name}function Lo(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Fo(t,e,n,r){var i=qo(t.root,t.renderer,t,e,n);return Bo(i,t.component,r),Uo(i),i}function jo(t,e,n){var r=qo(t,t.renderer,null,null,e);return Bo(r,n,n),Uo(r),r}function Vo(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,qo(t.root,i,t,e.element.componentProvider,n)}function qo(t,e,n,r,i){var o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Bo(t,e,n){t.component=e,t.context=n}function Uo(t){var e;ni(t)&&(e=Nr(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Mr.setCurrentNode(t,i);var s=void 0;switch(201347067&o.flags){case 1:var a=wi(t,e,o),u=void 0;if(33554432&o.flags){var c=ci(o.element.componentView);u=Mr.createComponentView(t,o,c,a)}_i(t,u,o,a),s={renderElement:a,componentView:u,viewContainer:null,template:o.element.template?zi(t,o):void 0},16777216&o.flags&&(s.viewContainer=Vi(t,o,s));break;case 2:s=Oo(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:uo(t,o)});break;case 16:s={instance:co(t,o)};break;case 16384:(s=r[i])||(s={instance:lo(t,o)}),32768&o.flags&&Bo(Nr(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Cn;break;case 8:xo(t,e,o),s=void 0}r[i]=s}Jo(t,Xo.CreateViewNodes),es(t,201326592,268435456,0)}function zo(t){Ko(t),Mr.updateDirectives(t,1),Zo(t,Xo.CheckNoChanges),Mr.updateRenderer(t,1),Jo(t,Xo.CheckNoChanges),t.state&=-97}function Ho(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,kr(t,0,256),Ko(t),Mr.updateDirectives(t,0),Zo(t,Xo.CheckAndUpdate),es(t,67108864,536870912,0);var e=kr(t,256,512);bo(t,2097152|(e?1048576:0)),Mr.updateRenderer(t,0),Jo(t,Xo.CheckAndUpdate),es(t,134217728,536870912,0),bo(t,8388608|((e=kr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,kr(t,768,1024)}function Qo(t,e,n,r,i,o,s,a,u,c,l,f,d){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings.length,d=!1;return f>0&&Ti(t,e,0,n)&&(d=!0),f>1&&Ti(t,e,1,r)&&(d=!0),f>2&&Ti(t,e,2,i)&&(d=!0),f>3&&Ti(t,e,3,o)&&(d=!0),f>4&&Ti(t,e,4,s)&&(d=!0),f>5&&Ti(t,e,5,a)&&(d=!0),f>6&&Ti(t,e,6,u)&&(d=!0),f>7&&Ti(t,e,7,c)&&(d=!0),f>8&&Ti(t,e,8,l)&&(d=!0),f>9&&Ti(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,s,a,u,c,l,h);case 2:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&Gr(t,e,0,n)&&(f=!0),p>1&&Gr(t,e,1,r)&&(f=!0),p>2&&Gr(t,e,2,i)&&(f=!0),p>3&&Gr(t,e,3,o)&&(f=!0),p>4&&Gr(t,e,4,s)&&(f=!0),p>5&&Gr(t,e,5,a)&&(f=!0),p>6&&Gr(t,e,6,u)&&(f=!0),p>7&&Gr(t,e,7,c)&&(f=!0),p>8&&Gr(t,e,8,l)&&(f=!0),p>9&&Gr(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;p>0&&(y+=Po(n,d[0])),p>1&&(y+=Po(r,d[1])),p>2&&(y+=Po(i,d[2])),p>3&&(y+=Po(o,d[3])),p>4&&(y+=Po(s,d[4])),p>5&&(y+=Po(a,d[5])),p>6&&(y+=Po(u,d[6])),p>7&&(y+=Po(c,d[7])),p>8&&(y+=Po(l,d[8])),p>9&&(y+=Po(h,d[9]));var m=Dr(t,e.nodeIndex).renderText;t.renderer.setValue(m,y)}return f}(t,e,n,r,i,o,s,a,u,c,l,h);case 16384:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=Or(t,e.nodeIndex),d=f.instance,p=!1,y=void 0,m=e.bindings.length;return m>0&&Wr(t,e,0,n)&&(p=!0,y=vo(t,f,e,0,n,y)),m>1&&Wr(t,e,1,r)&&(p=!0,y=vo(t,f,e,1,r,y)),m>2&&Wr(t,e,2,i)&&(p=!0,y=vo(t,f,e,2,i,y)),m>3&&Wr(t,e,3,o)&&(p=!0,y=vo(t,f,e,3,o,y)),m>4&&Wr(t,e,4,s)&&(p=!0,y=vo(t,f,e,4,s,y)),m>5&&Wr(t,e,5,a)&&(p=!0,y=vo(t,f,e,5,a,y)),m>6&&Wr(t,e,6,u)&&(p=!0,y=vo(t,f,e,6,u,y)),m>7&&Wr(t,e,7,c)&&(p=!0,y=vo(t,f,e,7,c,y)),m>8&&Wr(t,e,8,l)&&(p=!0,y=vo(t,f,e,8,l,y)),m>9&&Wr(t,e,9,h)&&(p=!0,y=vo(t,f,e,9,h,y)),y&&d.ngOnChanges(y),65536&e.flags&&Ar(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}(t,e,n,r,i,o,s,a,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&Gr(t,e,0,n)&&(d=!0),p>1&&Gr(t,e,1,r)&&(d=!0),p>2&&Gr(t,e,2,i)&&(d=!0),p>3&&Gr(t,e,3,o)&&(d=!0),p>4&&Gr(t,e,4,s)&&(d=!0),p>5&&Gr(t,e,5,a)&&(d=!0),p>6&&Gr(t,e,6,u)&&(d=!0),p>7&&Gr(t,e,7,c)&&(d=!0),p>8&&Gr(t,e,8,l)&&(d=!0),p>9&&Gr(t,e,9,h)&&(d=!0),d){var y=Pr(t,e.nodeIndex),m=void 0;switch(201347067&e.flags){case 32:m=new Array(f.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=s),p>5&&(m[5]=a),p>6&&(m[6]=u),p>7&&(m[7]=c),p>8&&(m[8]=l),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[f[0].name]=n),p>1&&(m[f[1].name]=r),p>2&&(m[f[2].name]=i),p>3&&(m[f[3].name]=o),p>4&&(m[f[4].name]=s),p>5&&(m[f[5].name]=a),p>6&&(m[f[6].name]=u),p>7&&(m[f[7].name]=c),p>8&&(m[f[8].name]=l),p>9&&(m[f[9].name]=h);break;case 128:var g=n;switch(p){case 1:m=g.transform(n);break;case 2:m=g.transform(r);break;case 3:m=g.transform(r,i);break;case 4:m=g.transform(r,i,o);break;case 5:m=g.transform(r,i,o,s);break;case 6:m=g.transform(r,i,o,s,a);break;case 7:m=g.transform(r,i,o,s,a,u);break;case 8:m=g.transform(r,i,o,s,a,u,c);break;case 9:m=g.transform(r,i,o,s,a,u,c,l);break;case 10:m=g.transform(r,i,o,s,a,u,c,l,h)}}y.value=m}return d}(t,e,n,r,i,o,s,a,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,c,l,f,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)Ti(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Gr(t,e,o,n[o])&&(i=!0);if(i){var s="";for(o=0;o<n.length;o++)s+=Po(n[o],r[o]);s=e.text.prefix+s;var a=Dr(t,e.nodeIndex).renderText;t.renderer.setValue(a,s)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Or(t,e.nodeIndex),i=r.instance,o=!1,s=void 0,a=0;a<n.length;a++)Wr(t,e,a,n[a])&&(o=!0,s=vo(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&Ar(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Gr(t,e,o,n[o])&&(i=!0);if(i){var s=Pr(t,e.nodeIndex),a=void 0;switch(201347067&e.flags){case 32:a=n;break;case 64:for(a={},o=0;o<n.length;o++)a[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);a=u.transform.apply(u,h(c))}s.value=a}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Ko(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Nr(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var s=i[o];s.state|=32,Jr(s,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Wo(t,e,n,r,i,o,s,a,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){var f=e.bindings.length;f>0&&Yr(t,e,0,n),f>1&&Yr(t,e,1,r),f>2&&Yr(t,e,2,i),f>3&&Yr(t,e,3,o),f>4&&Yr(t,e,4,s),f>5&&Yr(t,e,5,a),f>6&&Yr(t,e,6,u),f>7&&Yr(t,e,7,c),f>8&&Yr(t,e,8,l),f>9&&Yr(t,e,9,h)}(t,e,r,i,o,s,a,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)Yr(t,e,r,n[r])}(t,e,r),!1}function Go(t,e){if(Rr(t,e.nodeIndex).dirty)throw Lr(Mr.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function Yo(t){if(!(128&t.state)){if(Zo(t,Xo.Destroy),Jo(t,Xo.Destroy),bo(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=$r(t);if(e){var n=e.template._projectedViews;n&&(Mi(n,n.indexOf(t)),Mr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Nr(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Dr(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Rr(t,n).destroy()}}(t),ni(t)&&t.renderer.destroy(),t.state|=128}}var Xo=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function Jo(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?$o(Nr(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Zo(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Nr(t,r).viewContainer._embeddedViews,s=0;s<o.length;s++)$o(o[s],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function $o(t,e){var n=t.state;switch(e){case Xo.CheckNoChanges:0==(128&n)&&(12==(12&n)?zo(t):64&n&&ts(t,Xo.CheckNoChangesProjectedViews));break;case Xo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?zo(t):64&n&&ts(t,e));break;case Xo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ho(t):64&n&&ts(t,Xo.CheckAndUpdateProjectedViews));break;case Xo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ho(t):64&n&&ts(t,e));break;case Xo.Destroy:Yo(t);break;case Xo.CreateViewNodes:Uo(t)}}function ts(t,e){Zo(t,e),Jo(t,e)}function es(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var s=t.def.nodes[o];if(s.flags&e&&s.flags&n)switch(Mr.setCurrentNode(t,s.nodeIndex),r){case 0:Co(t,s);break;case 1:Go(t,s)}s.childFlags&e&&s.childFlags&n||(o+=s.childCount)}}var ns=!1;function rs(t,e,n,r,i,o){return jo(os(t,i,i.injector.get(wn),e,n),r,o)}function is(t,e,n,r,i,o){var s=i.injector.get(wn),a=os(t,i,new Vs(s),e,n),u=ys(r);return Fs(Cs.create,jo,null,[a,u,o])}function os(t,e,n,r,i){var o=e.injector.get(xr),s=e.injector.get(ce);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:s}}function ss(t,e,n,r){var i=ys(n);return Fs(Cs.create,Fo,null,[t,e,i,r])}function as(t,e,n,r){return n=hs.get(e.element.componentProvider.provider.token)||ys(n),Fs(Cs.create,Vo,null,[t,e,n,r])}function us(t,e,n,r){return Xi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===cs.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=cs.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){ls.forEach(function(r,i){i.ngInjectableDef.providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=cs.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=si(i.deps),r.value=i.value)}if(ls.size>0){var o=new Set(t.modules);ls.forEach(function(e,r){if(o.has(r.ngInjectableDef.providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:si(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[Br(r)]=i}})}}(t=t.factory(function(){return Vr})),t):t}(r))}var cs=new Map,ls=new Map,hs=new Map;function fs(t){cs.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&ls.set(t.token,t)}function ds(t,e){var n=ci(ci(e.viewDefFactory).nodes[0].element.componentView);hs.set(t,n)}function ps(){cs.clear(),ls.clear(),hs.clear()}function ys(t){if(0===cs.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&cs.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Vr});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=cs.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=si(o.deps),i.value=o.value)}}}}function ms(t,e,n,r,i,o,s,a,u,c,l,h,f){var d=t.def.nodes[e];return Qo(t,d,n,r,i,o,s,a,u,c,l,h,f),224&d.flags?Pr(t,e).value:void 0}function gs(t,e,n,r,i,o,s,a,u,c,l,h,f){var d=t.def.nodes[e];return Wo(t,d,n,r,i,o,s,a,u,c,l,h,f),224&d.flags?Pr(t,e).value:void 0}function vs(t){return Fs(Cs.detectChanges,Ho,null,[t])}function bs(t){return Fs(Cs.checkNoChanges,zo,null,[t])}function ws(t){return Fs(Cs.destroy,Yo,null,[t])}var _s,Es,Ts,Cs=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Ss(t,e){Es=t,Ts=e}function Is(t,e,n,r){return Ss(t,e),Fs(Cs.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function xs(t,e){if(128&t.state)throw jr(Cs[_s]);return Ss(t,Ps(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?As(t,s,r,i):Ds(t,s,r,i),16384&s.flags&&Ss(t,Ps(t,n)),224&s.flags?Pr(t,s.nodeIndex).value:void 0},t)}function ks(t,e){if(128&t.state)throw jr(Cs[_s]);return Ss(t,Rs(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=t.def.nodes[n];return 0===e?As(t,s,r,i):Ds(t,s,r,i),3&s.flags&&Ss(t,Rs(t,n)),224&s.flags?Pr(t,s.nodeIndex).value:void 0},t)}function As(t,e,n,r){if(Qo.apply(void 0,h([t,e,n],r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},s=0;s<e.bindings.length;s++){var a=e.bindings[s],u=i[s];8&a.flags&&(o[(d=a.nonMinifiedName,"ng-reflect-"+(d=d.replace(/[$@]/g,"_").replace(Ns,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Os(u))}var c=e.parent,l=Nr(t,c.nodeIndex).renderElement;if(c.element.name)for(var f in o)null!=(u=o[f])?t.renderer.setAttribute(l,f,u):t.renderer.removeAttribute(l,f);else t.renderer.setValue(l,"bindings="+JSON.stringify(o,null,2))}}var d}function Ds(t,e,n,r){Wo.apply(void 0,h([t,e,n],r))}var Ns=/([A-Z])/g;function Os(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Ps(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Rs(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Ms=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=ti(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Nr(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Qi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ls(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ls(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!ni(t);)t=t.parent;return t.parent?Nr(t.parent,ti(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?ei(this.view,this.nodeDef):ei(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===o?(e=t.error).bind.apply(e,h([t],r)):Vr}),s<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,h(r)))},t}();function Ls(t,e,n){for(var r in e.references)n[r]=Io(t,e,e.references[r])}function Fs(t,e,n,r){var i=_s,o=Es,s=Ts;try{_s=t;var a=e.apply(n,r);return Es=o,Ts=s,_s=i,a}catch(t){if(se(t)||!Es)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Fr(t,e),t}(t,js())}}function js(){return Es?new Ms(Es,Ts):null}var Vs=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new qs(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),qs=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){An.delete(t.nativeNode)}(Dn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=js();if(r){var i=new kn(n,null,r);i.name=t,Nn(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=js();return n&&Nn(new xn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=js();return n&&Nn(new xn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Dn(t),r=Dn(e);n&&r&&n instanceof kn&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=Dn(t),i=Dn(e),o=Dn(n);r&&i&&r instanceof kn&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Dn(t),r=Dn(e);n&&r&&n instanceof kn&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=js();return n&&Nn(new kn(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=Dn(t);i&&i instanceof kn&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=Dn(t);r&&r instanceof kn&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Dn(t);n&&n instanceof kn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Dn(t);n&&n instanceof kn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=Dn(t);i&&i instanceof kn&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=Dn(t);r&&r instanceof kn&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=Dn(t);r&&r instanceof kn&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=Dn(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}(),Bs=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return i(e,t),e.prototype.create=function(t){!function(){if(!ns){ns=!0;var t=fn()?{setCurrentNode:Ss,createRootView:is,createEmbeddedView:ss,createComponentView:as,createNgModuleRef:us,overrideProvider:fs,overrideComponentView:ds,clearOverrides:ps,checkAndUpdateView:vs,checkNoChangesView:bs,destroyView:ws,createDebugContext:function(t,e){return new Ms(t,e)},handleEvent:Is,updateDirectives:xs,updateRenderer:ks}:{setCurrentNode:function(){},createRootView:rs,createEmbeddedView:Fo,createComponentView:Vo,createNgModuleRef:Xi,overrideProvider:Vr,overrideComponentView:Vr,clearOverrides:Vr,checkAndUpdateView:Ho,checkNoChangesView:zo,destroyView:Yo,createDebugContext:function(t,e){return new Ms(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?ms:gs,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?ms:gs,t)}};Mr.setCurrentNode=t.setCurrentNode,Mr.createRootView=t.createRootView,Mr.createEmbeddedView=t.createEmbeddedView,Mr.createComponentView=t.createComponentView,Mr.createNgModuleRef=t.createNgModuleRef,Mr.overrideProvider=t.overrideProvider,Mr.overrideComponentView=t.overrideComponentView,Mr.clearOverrides=t.clearOverrides,Mr.checkAndUpdateView=t.checkAndUpdateView,Mr.checkNoChangesView=t.checkNoChangesView,Mr.destroyView=t.destroyView,Mr.resolveDep=mo,Mr.createDebugContext=t.createDebugContext,Mr.handleEvent=t.handleEvent,Mr.updateDirectives=t.updateDirectives,Mr.updateRenderer=t.updateRenderer,Mr.dirtyParentQueries=To}}();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(ci(this._ngModuleDefFactory));return Mr.createNgModuleRef(this.moduleType,t||Ft.NULL,this._bootstrapComponents,e)},e}(Qe);function Us(t,e,n){t!=e&&Hs(n)}function zs(t,e){null==t&&Hs(e)}function Hs(t){throw new Error("ASSERTION ERROR: "+t)}var Qs=16,Ks=0,Ws=1,Gs=2,Ys=3,Xs=4,Js=5,Zs=6,$s=7,ta=8,ea=9,na=10,ra=11,ia=14;function oa(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function sa(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function aa(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function ua(t,e,n){16&t[Xs]&&(ca(t[$s],e.initHooks,e.checkHooks,n),t[Xs]&=-17)}function ca(t,e,n,r){var i=r?e:n;i&&la(t,i)}function la(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}"undefined"==typeof ngDevMode||ngDevMode;var ha=0,fa=4,da="ngProjectAs";function pa(t){return!!t.listen}var ya={createRenderer:function(t,e){return document}};function ma(t,e){zs(t,"should be called with a node"),Us(t.tNode.type,e,"should be a "+function(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"<unknown>"}(e))}function ga(t){return Array.isArray(t)?t[0]:t}function va(t){if(2===t.tNode.type){var e=t.data;return e[Gs]?e[Gs][Js]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function ba(t){return t.tNode.child?ga((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function wa(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[ia];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return ga(n?t.view[n.index]:t.view[Js])}var _a=[];function Ea(t){for(var e=t[Js];2===e.tNode.type;)ngDevMode&&zs(t[Ws],"lViewData.parent"),e=(t=t[Ws])[Js];return ngDevMode&&ma(e,3),ngDevMode&&zs(e.data,"node.data"),e}function Ta(t,e,n,r,i){0===t?pa(e)?e.insertBefore(n,r,i):n.insertBefore(r,i,!0):1===t?pa(e)?e.removeChild(n,r):n.removeChild(r):2===t&&(ngDevMode&&ngDevMode.rendererDestroyNode++,e.destroyNode(r))}function Ca(t){if(-1===t[Ks].childIndex)return null;var e=t[t[Ks].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function Sa(t,e){var n;return(n=t[Js])&&2===n.tNode.type?wa(n).data:t[Ws]===e?null:t[Ws]}function Ia(t){if(t[Ks]){var e=t;!function(t){var e=t[Ks].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(ga(t[e[n+1]]).native.removeEventListener(e[n],t[ta][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[ta][e[n]])():e[n].call(t[ta][e[n+1]]);t[ta]=null}}(e),function(t){var e,n=t[Ks];null!=n&&null!=(e=n.destroyHooks)&&la(t[$s],e)}(e),(r=(n=e)[Ks]&&n[Ks].pipeDestroyHooks)&&la(n,r),-1===e[Ks].id&&pa(e[ra])&&(ngDevMode&&ngDevMode.rendererDestroy++,e[ra].destroy())}var n,r}var xa,ka,Aa,Da,Na,Oa,Pa,Ra,Ma,La="__ngHostLNode__",Fa=Promise.resolve(null),ja=[0,0],Va=new Array(Qs).fill(null),qa=!1,Ba=!0;function Ua(t,e){var n=Ra;return Ma=t&&t[$s],Na=t&&t[Ks],Pa=t&&1==(1&t[Xs]),Ba=t&&Na.firstTemplatePass,xa=t&&t[ra],null!=e&&(Aa=e,Da=!0),Ra=t,Oa=t&&t[Ys],n}function za(t,e){e||(qa||ca(Ma,Na.viewHooks,Na.viewCheckHooks,Pa),Ra[Xs]&=-6),Ra[Xs]|=16,Ra[Zs]=-1,Ua(t,null)}function Ha(){qa||ua(Ra,Na,Pa),function(t){for(var e=Ca(Ra);null!==e;e=e[Gs])if(e.length<Qs&&null===e[ha])for(var n=e,r=0;r<n[fa].length;r++){var i=n[fa][r],o=i.data;ngDevMode&&zs(o[Ks],"TView must be allocated"),Ga(i,o[Ks],o[ea],2)}}(),qa||ca(Ma,Na.contentHooks,Na.contentCheckHooks,Pa),Na.firstTemplatePass=Ba=!1,Qa(Na.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Na),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)nu(t[e],t[e+1])}(Na.components)}function Qa(t){if(null!=t)for(var e=Na.directives,n=0;n<t.length;n+=2){var r=t[n],i=e[r];i.hostBindings&&i.hostBindings(r,t[n+1])}}function Ka(t,e,n,r,i){return[e,Ra,null,null,25|r,null,-1,null,null,n,Ra&&Ra[na],t,i||null,null,-1,null]}function Wa(t,e,n,r,i,o){var s=Da?Aa:Aa&&wa(Aa),a=s&&s.view===Ra?s.tNode:null,u=(Da?Oa:Aa&&Aa.queries)||s&&s.queries&&s.queries.child(),c=null!=o,l=function(t,e,n,r,i,o){return{native:r,view:Ra,nodeInjector:n?n.nodeInjector:null,data:i,queries:o,tNode:null,dynamicLContainerNode:null}}(0,0,s,n,c?o:null,u);if(-1===t||2===e)l.tNode=(o?o[Ks].node:null)||eu(e,t,null,null,a,null);else{var h=t+Qs;ngDevMode&&cu(h);var f=Na.data;if(Ra[h]=l,h>=f.length){var d=f[h]=eu(e,h,r,i,a,null);if(!Da&&Aa){var p=Aa.tNode;p.next=d,p.dynamicContainerNode&&(p.dynamicContainerNode.next=d)}}l.tNode=f[h],Da&&(Oa=null,(null==Aa.tNode.child&&Aa.view===Ra||2===Aa.tNode.type)&&(Aa.tNode.child=l.tNode))}if(2==(2&e)&&c){var y=o;ngDevMode&&null!=y[Js]&&Hs("lViewData[HOST_NODE] should not have been initialized"),y[Js]=l,Ba&&(y[Ks].node=l.tNode)}return Aa=l,Da=!0,l}function Ga(t,e,n,r){var i,o=Da,s=Aa;if(null==t.data[Ws]&&t.data[ea]&&!e.template)iu(t.data[ea]);else try{Da=!0,Aa=null,i=Ua(t.data,t),Za(),e.template(r,n),2&r?Ha():t.data[Ks].firstTemplatePass=Ba=!1}finally{za(i,1==(1&r)),Da=o,Aa=s}return t}function Ya(t,e,n,r){var i=Ua(e,t);try{ka.begin&&ka.begin(),r?(Za(),r(Xa(e),n),Ha()):(qa||(ua(Ra,Na,Pa),ca(Ma,Na.contentHooks,Na.contentCheckHooks,Pa)),Qa(ja),nu(0,Qs))}finally{ka.end&&ka.end(),za(i)}}function Xa(t){return 1&t[Xs]?3:2}var Ja=null;function Za(){Ja=null}function $a(t,e,n,r,i){return ngDevMode&&ngDevMode.tView++,{id:t,template:e,viewQuery:i,node:null,data:Va.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function tu(t,e){ngDevMode&&uu(-1),ka=t;var n,r=t.createRenderer(null,null),i="string"==typeof e?pa(r)?r.selectRootElement(e):r.querySelector(e):e;if(ngDevMode&&!i)throw new Error("Renderer: "+("string"==typeof e?"Host node with selector not found:":"Host node is required:")+" ["+("function"==typeof(n=e)?n.name||n:"string"==typeof n?n:null==n?"":""+n)+"]");return i}function eu(t,e,n,r,i,o){return ngDevMode&&ngDevMode.tNode++,{type:t,index:e,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:o,next:null,child:null,parent:i,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function nu(t,e){ngDevMode&&uu(e);var n=Ra[e];ngDevMode&&ma(n,3),ngDevMode&&zs(n.data,"Component's host node should have an LViewData attached.");var r=n.data;ru(r)&&6&r[Xs]&&(ngDevMode&&uu(t,Ma),au(r,n,Ma[t]))}function ru(t){return 8==(8&t[Xs])}function iu(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=lu(n);ngDevMode&&zs(r.data,"Component host node should be attached to an LView"),Ya(r,ou(n),n)}}function ou(t){ngDevMode&&zs(t,"component");for(var e=lu(t).view;e[Ws];)e=e[Ws];return e}function su(t){var e=lu(t);ngDevMode&&zs(e.data,"Component host node should be attached to an LViewData instance."),au(e.data,e,t)}function au(t,e,n){var r=Ua(t,e),i=t[Ks],o=i.template,s=i.viewQuery;try{Za(),function(e,n,r){e&&1&t[Xs]&&e(1,r)}(s,0,n),o(Xa(t),n),Ha(),function(t,e){t&&t(2,e)}(s,n)}finally{za(r)}}function uu(t,e){null==e&&(e=Ra),function(t,e){t>=(e?e.length:0)&&Hs("index expected to be a valid data index")}(t,e||Ra)}function cu(t,e){null==e&&(e=Ra),Us(e.length,t,"index "+t+" expected to be at the end of arr (length "+e.length+")")}function lu(t){ngDevMode&&zs(t,"expecting component got null");var e=t[La];return ngDevMode&&zs(t,"object is not a component"),e}var hu=Fa;function fu(t){return{components:[],scheduler:t,clean:hu}}var du=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[Xs])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var t,e;this._viewContainerRef&&ru(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),pa(e=(t=this._view)[ra])&&e.destroyNode&&function(e,n,r,i,o,s){for(var a=t[Js],u=-1;a;){var c=null,l=a.tNode.type;if(3===l)Ta(2,i,null,a.native,s),a.dynamicLContainerNode&&Ta(2,i,null,a.dynamicLContainerNode.native,s);else if(0===l){Ta(2,i,null,a.native,s);var h=a,f=h.dynamicLContainerNode?h.dynamicLContainerNode.data:h.data;(c=f[fa].length?ba(f[fa][0]):null)&&(s=h.dynamicLContainerNode?h.dynamicLContainerNode.native:h.native)}else if(1===l){var d=Ea(a.view),p=d.tNode.projection[a.tNode.projection];_a[++u]=a,c=p?d.data[Ws][p.index]:null}else c=ba(a);if(null===c)for(null===(c=va(a))&&8192&a.tNode.flags&&(c=va(_a[u--]));a&&!c;){if(null===(a=wa(a))||a===n)return null;a.tNode.next||0!==l||(s=a.native),c=va(a)}a=c}}(0,t[Js],0,e),function(t){if(-1===t[Ks].childIndex)return Ia(t);for(var e=Ca(t);e;){var n=null;if(e.length>=Qs?e[Ks].childIndex>-1&&(n=Ca(e)):e[fa].length&&(n=e[fa][0].data),null==n){for(;e&&!e[Gs]&&e!==t;)Ia(e),e=Sa(e,t);Ia(e||t),n=e&&e[Gs]}e=n}}(t),t[Xs]|=32},t.prototype.onDestroy=function(t){var e,n;n=t,function(t){return t[ta]||(t[ta]=[])}(e=this._view).push(n),e[Ks].firstTemplatePass&&function(t){return t[Ks].cleanup||(t[Ks].cleanup=[])}(e).push(e[ta].length-1,null)},t.prototype.markForCheck=function(){!function(t){for(var e=t;null!=e[Ws];)e[Xs]|=4,e=e[Ws];var n,r;e[Xs]|=4,ngDevMode&&zs(e[ea],"rootContext"),(n=e[ea]).clean==Fa&&(n.clean=new Promise(function(t){return r=t}),n.scheduler(function(){iu(n),r(null),n.clean=Fa}))}(this._view)},t.prototype.detach=function(){this._view[Xs]&=-9},t.prototype.reattach=function(){this._view[Xs]|=8},t.prototype.detectChanges=function(){su(this.context)},t.prototype.checkNoChanges=function(){!function(t){qa=!0;try{su(t)}finally{qa=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),pu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.resolveComponentFactory=function(t){return ngDevMode&&(void 0===e&&(e="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),t.ngComponentDef||Hs(e)),new vu(t.ngComponentDef);var e},e}(Be);function yu(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var mu=new pt("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return fu($t(gu))}}),gu=new pt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),vu=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return i(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return yu(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return yu(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){var i,o,s=void 0===n,a=r?r.injector.get(wn):ya,u=s?(i=this.selector,pa(o=a.createRenderer(null,this.componentDef.rendererType)||xa)?o.createElement(i,Ja):null===Ja?o.createElement(i):o.createElementNS(Ja,i)):tu(a,n),c=r&&!s?r.injector.get(mu):fu(requestAnimationFrame.bind(window)),l=Ka(a.createRenderer(u,this.componentDef.rendererType),$a(-1,null,null,null,null),c,this.componentDef.onPush?4:2);l[na]=r&&r.injector||null;var h,f,d=Ua(l,null);try{if(a.begin&&a.begin(),f=function(t,e,n,r){Da=!1,Aa=null;var i,o=Wa(0,3,e,null,null,Ka(xa,(i=n.template).ngPrivateData||(i.ngPrivateData=$a(-1,i,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return Ba&&(o.tNode.flags=4096,n.diPublic&&n.diPublic(n),Na.directives=[n]),o}(0,u,this.componentDef),c.components.push(h=function(t,e,n){if(ngDevMode&&Us(Ra[Zs],-1,"directives should be created before any bindings"),ngDevMode&&Us(Da,!0,"previousOrParentNode should be a parent"),Object.defineProperty(e,La,{enumerable:!1,value:Aa}),null==Ma&&(Ra[$s]=Ma=[]),ngDevMode&&cu(t,Ma),Ma[t]=e,Ba){var r=Aa.tNode.flags;0==(4095&r)?Aa.tNode.flags=t<<14|4096&r|1:(ngDevMode&&4095==(4095&r)&&Hs("Reached the max number of directives"),Aa.tNode.flags++)}else{var i=n.diPublic;i&&i(n)}return null!=n.attributes&&3==Aa.tNode.type&&function(t,e){for(var n=pa(xa),r=0;r<e.length;){var i=e[r];if(1===i)break;if(i===da)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===i){var o=e[r+1],s=e[r+2],a=e[r+3];n?xa.setAttribute(t,s,a,o):t.setAttributeNS(o,s,a),r+=4}else a=e[r+1],n?xa.setAttribute(t,i,a):t.setAttribute(i,a),r+=2}}(Aa.native,n.attributes),e}(0,this.componentDef.factory(),this.componentDef)),function(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(f.data,h)}(f.nodeInjector),function(t,e){var n=lu(t),r=n.view[Ks];(function(t,e,n,r){ngDevMode&&Us(r.firstTemplatePass,!0,"Should only be called on first template pass"),e&&(r.initHooks||(r.initHooks=[])).push(0,e),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,e.onInit,e.doCheck,r),function(t,e){if(e.firstTemplatePass)for(var n=t>>14,r=n+(4095&t),i=n;i<r;i++){var o=e.directives[i];oa(o,e,i),sa(o,e,i),aa(o,e,i)}}(n.tNode.flags,r)}(h,this.componentDef),e)for(var p=0,y=f.tNode.projection=[],m=0;m<e.length;m++){for(var g=e[m],v=null,b=null,w=0;w<g.length;w++){var _=Wa(++p,3,g[w],null,null);b?b.next=_.tNode:v=_.tNode,b=_.tNode}y.push(v)}Ga(f,f.data[Ks],h,1),f.data[Xs]&=-2}finally{Ua(d,null),a.end&&a.end()}var E=new bu(this.componentType,h,l,t,u);return s&&(E.hostView._lViewNode.tNode.child=f.tNode),E},e}(Me),bu=function(t){function e(e,n,r,i,o){var s=t.call(this)||this;return s.destroyCbs=[],s.instance=n,s.hostView=s.changeDetectorRef=new du(r,n),s.hostView._lViewNode=Wa(-1,2,null,null,null,r),s.injector=i,s.location=new Tn(o),s.componentType=e,s}return i(e,t),e.prototype.destroy=function(){ngDevMode&&zs(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&zs(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(Re),wu={provide:Be,useFactory:function(){return new pu},deps:[]},_u=function(t){function e(e,n){var r=t.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var i=e.ngModuleDef;return ngDevMode&&zs(i,"NgModule '"+St(e)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=i.bootstrap,r.injector=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||ye(),new me(t,n,e)}(e,n,[wu,{provide:He,useValue:r}]),r.instance=r.injector.get(e),r.componentFactoryResolver=new pu,r}return i(e,t),e.prototype.destroy=function(){ngDevMode&&zs(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&zs(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(He);!function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}i(e,t),e.prototype.create=function(t){return new _u(this.moduleType,t)}}(Qe);var Eu=n("LiCP"),Tu=Eu.h.TweenMax,Cu=Eu.h.CSSPlugin,Su=Eu.f._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,n,r){var i,o;if("function"!=typeof t.setAttribute)return!1;for(i in e)"function"==typeof(o=e[i])&&(o=o(r,t)),this._addTween(t,"setAttribute",t.getAttribute(i)+"",o+"",i,!1,i),this._overwriteProps.push(i);return!0}}),Iu=Eu.f._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),xu=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return(Math.round(n/t)*t*e|0)/e}},ku=function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next},Au=Iu.prototype;Au._onInitAllProps=function(){var t,e,n,r,i=this._tween,o=i.vars.roundProps,s={},a=i._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),n=o.length;--n>-1;)s[o[n]]=Math.round;else for(r in o)s[r]=xu(o[r]);for(r in s)for(t=i._firstPT;t;)e=t._next,t.pg?t.t._mod(s):t.n===r&&(2===t.f&&t.t?ku(t.t._firstPT,s[r]):(this._add(t.t,r,t.s,t.c,s[r]),e&&(e._prev=t._prev),t._prev?t._prev._next=e:i._firstPT===t&&(i._firstPT=e),t._next=t._prev=null,i._propLookup[r]=a)),t=e;return!1},Au._add=function(t,e,n,r,i){this._addTween(t,e,n,n+r,e,i||Math.round),this._overwriteProps.push(e)};var Du=Eu.f._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,n,r){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,o,s,a,u,c,l=!0===e.useRadians?2*Math.PI:360;for(i in e)"useRadians"!==i&&("function"==typeof(a=e[i])&&(a=a(r,t)),o=(c=(a+"").split("_"))[0],s=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),u=(a=this.finals[i]="string"==typeof o&&"="===o.charAt(1)?s+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-s,c.length&&(-1!==(o=c.join("_")).indexOf("short")&&(u%=l)!=u%(l/2)&&(u=u<0?u+l:u-l),-1!==o.indexOf("_cw")&&u<0?u=(u+9999999999*l)%l-(u/l|0)*l:-1!==o.indexOf("ccw")&&u>0&&(u=(u-9999999999*l)%l-(u/l|0)*l)),(u>1e-6||u<-1e-6)&&(this._addTween(t,i,s,s+u,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}});Du._autoCSS=!0;var Nu=Eu.h.TimelineLite,Ou=Eu.h.TimelineMax,Pu=180/Math.PI,Ru=[],Mu=[],Lu=[],Fu={},ju=Eu.f._gsDefine.globals,Vu=function(t,e,n,r){n===r&&(n=r-(r-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=r,this.da=r-t,this.ca=n-t,this.ba=e-t},qu=function(t,e,n,r){var i={a:t},o={},s={},a={c:r},u=(t+e)/2,c=(e+n)/2,l=(n+r)/2,h=(u+c)/2,f=(c+l)/2,d=(f-h)/8;return i.b=u+(t-u)/4,o.b=h+d,i.c=o.a=(i.b+o.b)/2,o.c=s.a=(h+f)/2,s.b=f-d,a.b=l+(r-l)/4,s.c=a.a=(s.b+a.b)/2,[i,o,s,a]},Bu=function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,y,m,g,v=t.length-1,b=0,w=t[0].a;for(o=0;o<v;o++)s=(c=t[b]).a,a=c.d,u=t[b+1].d,i?(g=((m=Mu[o])+(y=Ru[o]))*e*.25/(r?.5:Lu[o]||.5),f=a-((l=a-(a-s)*(r?.5*e:0!==y?g/y:0))+(((h=a+(u-a)*(r?.5*e:0!==m?g/m:0))-l)*(3*y/(y+m)+.5)/4||0))):f=a-((l=a-(a-s)*e*.5)+(h=a+(u-a)*e*.5))/2,h+=f,c.c=d=l+=f,c.b=0!==o?w:w=c.a+.6*(c.c-c.a),c.da=a-s,c.ca=d-s,c.ba=w-s,n?(p=qu(s,w,d,a),t.splice(b,1,p[0],p[1],p[2],p[3]),b+=4):b++,w=h;(c=t[b]).b=w,c.c=w+.4*(c.d-w),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=w-c.a,n&&(p=qu(c.a,w,c.c,c.d),t.splice(b,1,p[0],p[1],p[2],p[3]))},Uu=function(t,e,n,r){var i,o,s,a,u,c,l=[];if(r)for(o=(t=[r].concat(t)).length;--o>-1;)"string"==typeof(c=t[o][e])&&"="===c.charAt(1)&&(t[o][e]=r[e]+Number(c.charAt(0)+c.substr(2)));if((i=t.length-2)<0)return l[0]=new Vu(t[0][e],0,0,t[0][e]),l;for(o=0;o<i;o++)l[o]=new Vu(s=t[o][e],0,0,a=t[o+1][e]),n&&(u=t[o+2][e],Ru[o]=(Ru[o]||0)+(a-s)*(a-s),Mu[o]=(Mu[o]||0)+(u-a)*(u-a));return l[o]=new Vu(t[o][e],0,0,t[o+1][e]),l},zu=function(t,e,n,r,i,o){var s,a,u,c,l,h,f,d,p={},y=[],m=o||t[0];for(a in i="string"==typeof i?","+i+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])y.push(a);if(t.length>1){for(d=t[t.length-1],f=!0,s=y.length;--s>-1;)if(a=y[s],Math.abs(m[a]-d[a])>.05){f=!1;break}f&&(t=t.concat(),o&&t.unshift(o),t.push(t[1]),o=t[t.length-3])}for(Ru.length=Mu.length=Lu.length=0,s=y.length;--s>-1;)Fu[a=y[s]]=-1!==i.indexOf(","+a+","),p[a]=Uu(t,a,Fu[a],o);for(s=Ru.length;--s>-1;)Ru[s]=Math.sqrt(Ru[s]),Mu[s]=Math.sqrt(Mu[s]);if(!r){for(s=y.length;--s>-1;)if(Fu[a])for(h=(u=p[y[s]]).length-1,c=0;c<h;c++)l=u[c+1].da/Mu[c]+u[c].da/Ru[c]||0,Lu[c]=(Lu[c]||0)+l*l;for(s=Lu.length;--s>-1;)Lu[s]=Math.sqrt(Lu[s])}for(s=y.length,c=n?4:1;--s>-1;)Bu(u=p[a=y[s]],e,n,r,Fu[a]),f&&(u.splice(0,c),u.splice(u.length-c,c));return p},Hu=function(t,e,n){for(var r,i,o,s,a,u,c,l,h,f,d,p=1/n,y=t.length;--y>-1;)for(s=(f=t[y]).d-(o=f.a),a=f.c-o,u=f.b-o,r=i=0,l=1;l<=n;l++)r=i-(i=((c=p*l)*c*s+3*(h=1-c)*(c*a+h*u))*c),e[d=y*n+l-1]=(e[d]||0)+r*r},Qu=Eu.f._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,i,o,s,a,u=e.values||[],c={},l=u[0],h=e.autoRotate||n.vars.orientToBezier;for(r in this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",!0===h?0:Number(h)||0]]:null,l)this._props.push(r);for(o=this._props.length;--o>-1;)this._overwriteProps.push(r=this._props[o]),i=this._func[r]="function"==typeof t[r],c[r]=i?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),a||c[r]!==u[0][r]&&(a=c);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?zu(u,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):function(t,e,n){var r,i,o,s,a,u,c,l,h,f,d={},p="cubic"===(e=e||"soft")?3:2,y="soft"===e,m=[];if(y&&n&&(t=[n].concat(t)),null==t||t.length<p+1)throw"invalid Bezier data";for(l in t[0])m.push(l);for(a=m.length;--a>-1;){for(d[l=m[a]]=s=[],h=0,c=t.length,u=0;u<c;u++)r=null==n?t[u][l]:"string"==typeof(f=t[u][l])&&"="===f.charAt(1)?n[l]+Number(f.charAt(0)+f.substr(2)):Number(f),y&&u>1&&u<c-1&&(s[h++]=(r+s[h-2])/2),s[h++]=r;for(c=h-p+1,h=0,u=0;u<c;u+=p)r=s[u],i=s[u+1],o=s[u+2],s[h++]=f=3===p?new Vu(r,i,o,2===p?0:s[u+3]):new Vu(r,(2*i+r)/3,(2*i+o)/3,o);s.length=h}return d}(u,e.type,c),this._segCount=this._beziers[r].length,this._timeRes){var f=function(t,e){var n,r,i,o,s=[],a=[],u=0,c=0,l=(e=e>>0||6)-1,h=[],f=[];for(n in t)Hu(t[n],s,e);for(i=s.length,r=0;r<i;r++)u+=Math.sqrt(s[r]),f[o=r%e]=u,o===l&&(c+=u,h[o=r/e>>0]=f,a[o]=c,u=0,f=[]);return{length:c,lengths:a,segments:h}}(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(h=this._autoRotate)for(this._initialRotations=[],h[0]instanceof Array||(this._autoRotate=h=[h]),o=h.length;--o>-1;){for(s=0;s<3;s++)this._func[r=h[o][s]]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];this._initialRotations[o]=(this._func[r=h[o][2]]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var e,n,r,i,o,s,a,u,c,l,h=this._segCount,f=this._func,d=this._target,p=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,l=this._curSeg,r=this._li,(t*=this._length)>this._l2&&r<h-1){for(u=h-1;r<u&&(this._l2=c[++r])<=t;);this._l1=c[r-1],this._li=r,this._curSeg=l=this._segments[r],this._s2=l[this._s1=this._si=0]}else if(t<this._l1&&r>0){for(;r>0&&(this._l1=c[--r])>=t;);0===r&&t<this._l1?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=l=this._segments[r],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(e=r,r=this._si,(t-=this._l1)>this._s2&&r<l.length-1){for(u=l.length-1;r<u&&(this._s2=l[++r])<=t;);this._s1=l[r-1],this._si=r}else if(t<this._s1&&r>0){for(;r>0&&(this._s1=l[--r])>=t;);0===r&&t<this._s1?this._s1=0:r++,this._s2=l[r],this._si=r}s=(r+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(t-(e=t<0?0:t>=1?h-1:h*t>>0)*(1/h))*h;for(n=1-s,r=this._props.length;--r>-1;)a=(s*s*(o=this._beziers[i=this._props[r]][e]).da+3*n*(s*o.ca+n*o.ba))*s+o.a,this._mod[i]&&(a=this._mod[i](a,d)),f[i]?d[i](a):d[i]=a;if(this._autoRotate){var y,m,g,v,b,w,_,E=this._autoRotate;for(r=E.length;--r>-1;)i=E[r][2],w=E[r][3]||0,_=!0===E[r][4]?1:Pu,y=this._beziers[E[r][1]],(o=this._beziers[E[r][0]])&&y&&(m=(o=o[e]).a+(o.b-o.a)*s,m+=((v=o.b+(o.c-o.b)*s)-m)*s,v+=(o.c+(o.d-o.c)*s-v)*s,g=(y=y[e]).a+(y.b-y.a)*s,g+=((b=y.b+(y.c-y.b)*s)-g)*s,b+=(y.c+(y.d-y.c)*s-b)*s,a=p?Math.atan2(b-g,v-m)*_+w:this._initialRotations[r],this._mod[i]&&(a=this._mod[i](a,d)),f[i]?d[i](a):d[i]=a)}}}),Ku=Qu.prototype;Qu.bezierThrough=zu,Qu.cubicToQuadratic=qu,Qu._autoCSS=!0,Qu.quadraticToCubic=function(t,e,n){return new Vu(t,(2*e+t)/3,(2*e+n)/3,n)},Qu._cssRegister=function(){var t=ju.CSSPlugin;if(t){var e=t._internals,n=e._parseToProxy,r=e._setPluginRatio,i=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,u){e instanceof Array&&(e={values:e}),u=new Qu;var c,l,h,f=e.values,d=f.length-1,p=[],y={};if(d<0)return a;for(c=0;c<=d;c++)h=n(t,f[c],s,a,u,d!==c),p[c]=h.end;for(l in e)y[l]=e[l];return y.values=p,(a=new i(t,"bezier",0,0,h.pt,2)).data=h,a.plugin=u,a.setRatio=r,0===y.autoRotate&&(y.autoRotate=!0),!y.autoRotate||y.autoRotate instanceof Array||(c=!0===y.autoRotate?0:Number(y.autoRotate),y.autoRotate=null!=h.end.left?[["left","top","rotation",c,!1]]:null!=h.end.x&&[["x","y","rotation",c,!1]]),y.autoRotate&&(s._transform||s._enableTransforms(!1),h.autoRotate=s._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,s._overwriteProps.push("rotation")),u._onInitTween(h.proxy,y,s._tween),a}})}},Ku._mod=function(t){for(var e,n=this._overwriteProps,r=n.length;--r>-1;)(e=t[n[r]])&&"function"==typeof e&&(this._mod[n[r]]=e)},Ku._kill=function(t){var e,n,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=r.length;--n>-1;)r[n]===e&&r.splice(n,1);if(r=this._autoRotate)for(n=r.length;--n>-1;)t[r[n][2]]&&r.splice(n,1);return this._super._kill.call(this,t)};var Wu=Eu.h.Circ;Tu._autoActivated=[Nu,Ou,Cu,Su,Qu,Iu,Du,Eu.h.Back,Eu.h.Elastic,Eu.h.Bounce,Eu.h.RoughEase,Eu.h.SlowMo,Eu.h.SteppedEase,Wu,Eu.h.Expo,Eu.h.Sine,Eu.h.ExpoScaleEase];var Gu=function(){},Yu=function(){function t(){this.isIntroduction=this.showComponent()}return t.prototype.menuSelected=function(t){switch(t){case"RAYMI":this.isIntroduction=this.showComponent();break;case"GALLERY":this.isGallery=this.showComponent();break;case"MORE":this.isMore=this.showComponent()}},t.prototype.openProject=function(t){this.isProject=this.showComponent();var e=document.querySelectorAll("app-menu");Tu.to(e,.5,{marginLeft:"-157px",marginTop:"-81px"})},t.prototype.closeProject=function(t){var e=this,n=document.querySelectorAll("app-menu");Tu.to(n,.5,{marginLeft:0,marginTop:0}).eventCallback("onComplete",function(){e.menuSelected(t)})},t.prototype.showComponent=function(){return this.isIntroduction=!1,this.isGallery=!1,this.isMore=!1,this.isProject=!1,!0},t}(),Xu=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;Tu.fromTo(this.photo.nativeElement,1,{x:50,opacity:0},{x:0,opacity:1,ease:Wu.easeOut}),Tu.fromTo(this.photoMobile.nativeElement,1,{x:50,opacity:0},{x:0,opacity:1,ease:Wu.easeOut}),Tu.fromTo(this.title.nativeElement,1,{x:-50,opacity:0},{x:0,opacity:1,ease:Wu.easeOut}).eventCallback("onComplete",function(){Tu.fromTo(t.line.nativeElement,1,{width:0,opacity:0,marginRight:"33px"},{width:"33px",opacity:1,marginRight:0,ease:Wu.easeOut}),Tu.fromTo(t.message.nativeElement,1,{y:-30,opacity:0},{y:0,opacity:1,ease:Wu.easeOut}).eventCallback("onComplete",function(){t.iconsSequence(t.icons._results,0)})})},t.prototype.iconsSequence=function(t,e){var n=this;e<t.length&&Tu.fromTo(t[e].nativeElement,.25,{y:-50,opacity:0},{y:0,opacity:1,ease:Wu.easeOut}).eventCallback("onComplete",function(){n.iconsSequence(t,e+1)})},t}(),Ju=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center;box-sizing:border-box;padding:30px}.container-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.container-data[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;width:100%;max-width:436px;align-items:center;justify-content:center}.container-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:35px}.contrainer-content[_ngcontent-%COMP%]{display:flex;flex-direction:row}.line[_ngcontent-%COMP%]{width:32px;height:1px;background-color:#fff;margin-top:8px;z-index:1;box-sizing:border-box}figure.photo[_ngcontent-%COMP%]{width:80%;max-width:390px;margin-right:-60px}figure.icon[_ngcontent-%COMP%]{width:73px}figure.icon[_ngcontent-%COMP%]:nth-child(2){width:54px}figure.icon[_ngcontent-%COMP%]:nth-child(1n+2){margin-left:42px}img[_ngcontent-%COMP%]{width:100%}p[_ngcontent-%COMP%]{margin-left:8px}h1[_ngcontent-%COMP%]{z-index:1}.photo.mobile[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:900px){.container-data[_ngcontent-%COMP%]{max-width:300px}figure.icon[_ngcontent-%COMP%]{width:53px}figure.icon[_ngcontent-%COMP%]:nth-child(2){width:39.5px}figure.icon[_ngcontent-%COMP%]:nth-child(1n+2){margin-left:25px}figure.photo[_ngcontent-%COMP%]{width:80%;max-width:400px}}@media only screen and (max-width:768px){.container[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);flex-direction:column;justify-content:center;align-items:center;padding:20px;box-sizing:border-box}.container-content[_ngcontent-%COMP%]{height:100%;flex-direction:column}.photo.mobile[_ngcontent-%COMP%]{display:block}.photo.desktop[_ngcontent-%COMP%]{display:none}figure.photo[_ngcontent-%COMP%]{width:100%;padding-right:10%;padding-left:10%;box-sizing:border-box;margin-right:0;margin-top:-80px;margin-bottom:-50px}figure.icon[_ngcontent-%COMP%]{width:53px}figure.icon[_ngcontent-%COMP%]:nth-child(2){width:39.5px}figure.icon[_ngcontent-%COMP%]:nth-child(1n+2){margin-left:25px}.container-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:10px}}"]],data:{}});function Zu(t){return Ro(0,[Eo(402653184,1,{photo:0}),Eo(402653184,2,{photoMobile:0}),Eo(402653184,3,{title:0}),Eo(402653184,4,{message:0}),Eo(402653184,5,{line:0}),Eo(671088640,6,{icons:1}),(t()(),bi(6,0,null,null,21,"div",[["class","container"]],null,null,null,null,null)),(t()(),bi(7,0,null,null,20,"div",[["class","container-content"]],null,null,null,null,null)),(t()(),bi(8,0,[[1,0],["photo",1]],null,1,"figure",[["class","photo desktop"]],null,null,null,null,null)),(t()(),bi(9,0,null,null,0,"img",[["alt",""],["src","assets/img/photo.png"]],null,null,null,null,null)),(t()(),bi(10,0,null,null,17,"div",[["class","container-data"]],null,null,null,null,null)),(t()(),bi(11,0,[[3,0],["title",1]],null,1,"h1",[],null,null,null,null,null)),(t()(),No(-1,null,["HELLO"])),(t()(),bi(13,0,[[2,0],["photoMobile",1]],null,1,"figure",[["class","photo mobile"]],null,null,null,null,null)),(t()(),bi(14,0,null,null,0,"img",[["alt",""],["src","assets/img/photo.png"]],null,null,null,null,null)),(t()(),bi(15,0,null,null,3,"div",[["class","contrainer-content"]],null,null,null,null,null)),(t()(),bi(16,0,[[5,0],["line",1]],null,0,"div",[["class","line"],["style","opacity: 0"]],null,null,null,null,null)),(t()(),bi(17,0,[[4,0],["message",1]],null,1,"p",[["style","opacity: 0"]],null,null,null,null,null)),(t()(),No(-1,null,["I am an Interactive media designer with knowledge in the areas of interactive experience design, digital photography, information architecture and motion graphics. I have skills for oral and written communication in Spanish and English. I possess an ease to gain new knowledge and apply strategies to seize opportunities. "])),(t()(),bi(19,0,null,null,8,"div",[["class","container-icons"]],null,null,null,null,null)),(t()(),bi(20,0,[[6,0],["icon",1]],null,1,"figure",[["class","icon"],["style","opacity: 0"]],null,null,null,null,null)),(t()(),bi(21,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_motion_graphics.svg"]],null,null,null,null,null)),(t()(),bi(22,0,[[6,0],["icon",1]],null,1,"figure",[["class","icon"],["style","opacity: 0"]],null,null,null,null,null)),(t()(),bi(23,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_uxui.svg"]],null,null,null,null,null)),(t()(),bi(24,0,[[6,0],["icon",1]],null,1,"figure",[["class","icon"],["style","opacity: 0"]],null,null,null,null,null)),(t()(),bi(25,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_wireframing.svg"]],null,null,null,null,null)),(t()(),bi(26,0,[[6,0],["icon",1]],null,1,"figure",[["class","icon"],["style","opacity: 0"]],null,null,null,null,null)),(t()(),bi(27,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_prototyping.svg"]],null,null,null,null,null))],null,null)}var $u=function(){},tc=void 0,ec=["en",[["a","p"],["AM","PM"],tc],[["AM","PM"],tc,tc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],tc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],tc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",tc,"{1} 'at' {0}",tc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],nc={},rc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),ic=new pt("UseV4Plurals"),oc=function(){},sc=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return i(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=nc[e];if(n)return n;var r=e.split("-")[0];if(n=nc[r])return n;if("en"===r)return ec;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[18]}(e||this.locale)(t)){case rc.Zero:return"zero";case rc.One:return"one";case rc.Two:return"two";case rc.Few:return"few";case rc.Many:return"many";default:return"other"}},s([a(0,kt($n)),a(1,At()),a(1,kt(ic))],e)}(oc);function ac(t,e){var n,r;e=encodeURIComponent(e);try{for(var i=c(t.split(";")),o=i.next();!o.done;o=i.next()){var s=o.value,a=s.indexOf("="),u=l(-1==a?[s,""]:[s.slice(0,a),s.slice(a+1)],2),h=u[1];if(u[0].trim()===e)return decodeURIComponent(h)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}var uc=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),cc=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){fn()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new uc(null,e._ngForOf,-1,-1),i),s=new lc(t,o);n.push(s)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),s=new lc(t,o),n.push(s))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),lc=function(t,e){this.record=t,this.view=e},hc=function(){function t(t,e){this._viewContainer=t,this._context=new fc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){dc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){dc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),fc=function(){this.$implicit=null,this.ngIf=null};function dc(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+St(e)+"'.")}var pc=function(){function t(t,e,n){this._differs=t,this._ngEl=e,this._renderer=n}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var n=l(t.split("."),2),r=n[0],i=n[1];null!=(e=null!=e&&i?""+e+i:e)?this._renderer.setStyle(this._ngEl.nativeElement,r,e):this._renderer.removeStyle(this._ngEl.nativeElement,r)},t}(),yc=function(){},mc=new pt("DocumentToken"),gc="browser",vc="server";function bc(t){return t===vc}var wc=new N(function(t){return t.complete()});function _c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=t[t.length-1];switch(P(i)?t.pop():i=void 0,t.length){case 0:return function(t){return t?function(t){return new N(function(e){return t.schedule(function(){return e.complete()})})}(t):wc}(i);case 1:return i?W(t,i):(n=t[0],(r=new N(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return W(t,i)}}function Ec(t){return function(t){return new N(function(e){return{unsubscribe:t.onSnapshot(e)}})}(t).pipe(ft())}function Tc(t){return Ec(t).pipe(H(function(t){return{payload:t,type:"query"}}))}function Cc(t,e){return function(n){return n.lift(new Sc(t,e))}}var Sc=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ic(t,this.predicate,this.thisArg))},t}(),Ic=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(k);function xc(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new kc(t,e,n))}}var kc=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new Ac(t,this.accumulator,this.seed,this.hasSeed))},t}(),Ac=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(k);function Dc(t){return Tc(t).pipe(H(function(t){return t.payload.docChanges().map(function(t){return{type:t.type,payload:t}})}))}var Nc=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(S))),Oc=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),Pc=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(function(t){function e(n,r){void 0===r&&(r=Oc.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(Oc)))(Nc),Rc=(new pt("angularfire2.realtimeDatabaseURL"),function(){function t(t,e){this.zone=t,this.platformId=e}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.runGuarded(function(){return Pc.schedule.apply(Pc,t)})},t.prototype.keepUnstableUntilFirst=function(t){return bc(this.platformId)?new N(function(e){var n=function(){},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(function(t){"scheduled"===r.state&&r.invoke(),e.next(t)},function(t){"scheduled"===r.state&&r.invoke(),e.error(t)},function(){"scheduled"===r.state&&r.invoke(),e.complete()})}):t},t.prototype.runOutsideAngular=function(t){var e=this;return new N(function(n){return e.zone.runOutsideAngular(function(){return t.subscribe(function(t){return e.zone.run(function(){return n.next(t)})},function(t){return e.zone.run(function(){return n.error(t)})},function(){return e.zone.run(function(){return n.complete()})})})})},t}()),Mc=function(t){return function(e){return new N(function(n){return e.subscribe(function(e){return t.run(function(){return n.next(e)})},function(e){return t.run(function(){return n.error(e)})},function(){return t.run(function(){return n.complete()})})})}},Lc=n("Wcq6"),Fc=n.n(Lc),jc=new pt("angularfire2.app.options"),Vc=new pt("angularfire2.app.nameOrConfig"),qc=function(){};function Bc(t,e){var n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",Fc.a.apps.filter(function(t){return t&&t.name===n.name})[0]||Fc.a.initializeApp(t,n)}new At;var Uc=function(){function t(){}var e;return e=t,t.initializeApp=function(t,n){return{ngModule:e,providers:[{provide:jc,useValue:t},{provide:Vc,useValue:n}]}},t}(),zc=function(){function t(t,e,n){this.ref=t,this.query=e,this.afs=n}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Dc(this.query))).pipe(H(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),Cc(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Dc(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(xc(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),n=function(t,e){return Tc(t).pipe(H(function(t){return t.payload.docChanges()}),xc(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":null!=t[e.oldIndex]&&t[e.oldIndex].doc.id!=e.doc.id||(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.id==e.doc.id&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]),H(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(){var t=Tc(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(H(function(t){return t.payload.docs.map(function(t){return t.data()})}))},t.prototype.get=function(t){return G(this.query.get(t)).pipe(Mc(this.afs.scheduler.zone))},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new Hc(this.ref.doc(t),this.afs)},t}(),Hc=function(){function t(t,e){this.ref=t,this.afs=e}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=Yc(this.ref.collection(t),e);return new zc(n.ref,n.query,this.afs)},t.prototype.snapshotChanges=function(){var t=Ec(this.ref).pipe(H(function(t){return{payload:t,type:"value"}})),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)},t.prototype.valueChanges=function(){return this.snapshotChanges().pipe(H(function(t){return t.payload.data()}))},t.prototype.get=function(t){return G(this.ref.get(t)).pipe(Mc(this.afs.scheduler.zone))},t}(),Qc=new pt("angularfire2.enableFirestorePersistence"),Kc=new pt("angularfire2.firestore.persistenceSettings"),Wc=new pt("angularfire2.firestore.settings"),Gc={timestampsInSnapshots:!0};function Yc(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var Xc=function(){function t(t,e,n,r,i,o,s){var a=this;this.scheduler=new Rc(o,i),this.firestore=o.runOutsideAngular(function(){var n=Bc(t,e).firestore();return n.settings(r||Gc),n}),this.persistenceEnabled$=n&&function(t){return t===gc}(i)?o.runOutsideAngular(function(){try{return G(a.firestore.enablePersistence(s).then(function(){return!0},function(){return!1}))}catch(t){return _c(!1)}}):_c(!1)}return t.prototype.collection=function(t,e){var n=Yc("string"==typeof t?this.firestore.collection(t):t,e);return new zc(n.ref,n.query,this)},t.prototype.doc=function(t){var e;return e="string"==typeof t?this.firestore.doc(t):t,new Hc(e,this)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},s([a(0,kt(jc)),a(1,At()),a(1,kt(Vc)),a(2,At()),a(2,kt(Qc)),a(3,At()),a(3,kt(Wc)),a(4,kt(ke)),a(6,At()),a(6,kt(Kc))],t)}(),Jc=(n("6Joi"),function(){function t(){}var e;return e=t,t.enablePersistence=function(t){return{ngModule:e,providers:[{provide:Qc,useValue:!0},{provide:Kc,useValue:t}]}},t}()),Zc=function(){function t(t){this.angularFirestore=t,this.projects=t.collection("projects")}return t.prototype.all=function(){return this.angularFirestore.collection("about-me").valueChanges()},t.prototype.getProjects=function(){return this.angularFirestore.collection("projects").valueChanges()},t.prototype.synchronizeWithBehance=function(t){this.projects.doc(""+t.id).set(t).catch(console.log)},t.ngInjectableDef=dt({factory:function(){return new t($t(Xc))},token:t,providedIn:"root"}),t}(),$c=function(){this.project=0},tl=function(){function t(t,e){var n=this;this.firebaseService=t,this.globals=e,this.sendProject=new Xe,this.coverSelected=0,this.title="LOADING",this.description="LOADING",this.firebaseService.getProjects().subscribe(function(t){n.projects=t,n.projects.reverse(),n.title=n.projects[n.coverSelected].name,n.description=n.projects[n.coverSelected].description})}return t.prototype.ngOnInit=function(){this.coverSelected=this.globals.project},t.prototype.onResize=function(t){},t.prototype.left=function(){var t=this.cover._results,e=this.coverSelected;this.coverSelected--;var n=0===this.coverSelected?t.length-1:this.coverSelected-1;this.coverSelected<0&&(this.coverSelected=t.length-1,n=t.length-2),Tu.to(t[this.coverSelected].nativeElement,.25,{left:0,ease:Eu.c.easeOut}),Tu.to(t[e].nativeElement,.25,{left:"-100%",ease:Eu.c.easeOut}),Tu.to(t[n].nativeElement,0,{left:"100%"}),this.changeProject(e,this.coverSelected)},t.prototype.right=function(){var t=this.cover._results,e=this.coverSelected;this.coverSelected++;var n=this.coverSelected===t.length-1?0:this.coverSelected+1;this.coverSelected>t.length-1&&(this.coverSelected=0,n=1),Tu.to(t[this.coverSelected].nativeElement,.25,{left:0,ease:Eu.c.easeOut}),Tu.to(t[e].nativeElement,.25,{left:"100%",ease:Eu.c.easeOut}),Tu.to(t[n].nativeElement,0,{left:"-100%"}),this.changeProject(e,this.coverSelected)},t.prototype.changeProject=function(t,e){this.globals.project=e;var n=this.dots._results;this.title=this.projects[e].name,this.description=this.projects[e].description,n[t].nativeElement.style.opacity=.3,n[e].nativeElement.style.opacity=1},t.prototype.goToProject=function(){var t=this;Tu.to(this.containerElement.nativeElement,.5,{opacity:0,ease:Eu.c.easeOut}),this.sendProject.emit(this.projects[this.coverSelected]),setTimeout(function(){t.sendProject.emit(t.projects[t.coverSelected])},1e3)},t.prototype.ngAfterViewInit=function(){var t=this;Tu.fromTo(this.containerCovers.nativeElement,1,{transform:"scale(0)",opacity:0},{transform:"scale(1)",opacity:1,ease:Wu.easeOut}).eventCallback("onComplete",function(){t.cover._results[t.coverSelected].nativeElement.style.left="0",t.changeProject(0,t.globals.project),Tu.fromTo(t.squares._results[0].nativeElement,1,{y:"-50px",opacity:0},{y:"0",opacity:1,ease:Wu.easeOut}),Tu.fromTo(t.squares._results[1].nativeElement,1,{y:"50px",opacity:0},{y:"0",opacity:1,ease:Wu.easeOut}),Tu.fromTo(t.containerDots.nativeElement,1,{opacity:0},{opacity:1,ease:Eu.c.easeOut}),Tu.fromTo(t.bigLineMobile.nativeElement,.5,{width:0,marginLeft:"-40%",opacity:0},{width:"90%",marginLeft:0,opacity:1,ease:Eu.c.easeOut}),Tu.fromTo(t.bigLine.nativeElement,.5,{width:0,marginLeft:"-40%",opacity:0},{width:"80%",marginLeft:0,opacity:1,ease:Eu.c.easeOut}).eventCallback("onComplete",function(){Tu.fromTo(t.titleElement.nativeElement,.5,{x:"-50px",opacity:0},{x:0,opacity:1,ease:Eu.c.easeOut}),Tu.fromTo(t.tinyLineElement.nativeElement,.5,{width:"0",opacity:0},{width:"30px",opacity:1,ease:Eu.c.easeOut}),Tu.fromTo(t.descriptionElement.nativeElement,.5,{x:"50px",opacity:0},{x:0,opacity:1,ease:Eu.c.easeOut}).eventCallback("onComplete",function(){Tu.fromTo(t.buttonElement.nativeElement,.5,{y:"50px",opacity:0},{y:0,opacity:1,ease:Eu.c.easeOut}).eventCallback("onComplete",function(){t.changeProject(0,t.globals.project)})})})})},t.prototype.coversFinished=function(t){},t}(),el=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:30px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:center}.container-content[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:row;justify-content:center;align-items:center}.line[_ngcontent-%COMP%]{width:calc(100% - 210px);height:1px;background-color:#fff;position:absolute;z-index:0}.container-cover[_ngcontent-%COMP%]{width:50%;max-width:50%;height:50%;z-index:1;padding-left:70px;padding-right:15px;display:flex;flex-direction:row;justify-content:flex-end;align-items:center}.container-cover-content[_ngcontent-%COMP%]{width:360px;height:360px;position:relative}.container-cover-style-elements[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background-color:red}.container-arrows[_ngcontent-%COMP%]{position:absolute;width:100%;max-width:100%;height:100%;display:flex;flex-direction:row;justify-content:space-between;box-sizing:border-box;align-items:center}.icon-arrow[_ngcontent-%COMP%]{position:relative;z-index:3}.icon-arrow[_ngcontent-%COMP%]:hover{cursor:pointer}.icon-back[_ngcontent-%COMP%]{margin-left:-10px}.icon-next[_ngcontent-%COMP%]{margin-right:-10px}.container-squares[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;display:flex;flex-direction:row;justify-content:space-between}.square[_ngcontent-%COMP%]{background-color:#fff;z-index:2}.square[_ngcontent-%COMP%]:nth-child(1){width:20px;height:20px;margin-left:-10px;margin-top:-10px}.square[_ngcontent-%COMP%]:nth-child(2){width:30px;height:30px;align-self:flex-end;margin-right:-15px;margin-bottom:-10px}.container-imgs[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;box-shadow:0 0 20px 0 #000;z-index:1;transition:.2s;background:url(https://loading.io/spinners/flat-ball/lg.flat-bouncing-circle-loading-icon.gif) center/50px no-repeat #32343f;overflow:hidden}.cover[_ngcontent-%COMP%]{width:100%;height:100%;background-size:cover;position:absolute;background-position:center;z-index:0;top:0;left:-100%}.cover[_ngcontent-%COMP%]:last-child{left:100%}.container-dots[_ngcontent-%COMP%]{display:flex;flex-direction:row;-webkit-transform:translateY(30px);transform:translateY(30px);justify-content:center}.dot[_ngcontent-%COMP%]{width:7px;height:7px;background-color:#fff;border-radius:50%;margin-left:5px;margin-right:5px;-ms-grid-row-align:center;align-self:center;-ms-grid-column-align:center;justify-self:center;opacity:.3}.dot[_ngcontent-%COMP%]:nth-child(1){opacity:1}.container-info[_ngcontent-%COMP%]{width:50%;max-width:50%;height:100%;display:flex;flex-direction:column;z-index:0;padding-right:70px;padding-left:15px}.container-title[_ngcontent-%COMP%]{width:100%;max-width:100%;height:50%;display:flex;flex-direction:column;justify-content:flex-end;word-break:break-word}h4[_ngcontent-%COMP%]{padding-bottom:10px;box-sizing:border-box;text-transform:uppercase}.container-description[_ngcontent-%COMP%]{max-width:100%;height:50%;display:flex;flex-direction:column;padding-top:20px;box-sizing:border-box}.container-description-content[_ngcontent-%COMP%]{max-width:100vw;display:flex;flex-direction:row;min-height:50px}.tiny-line[_ngcontent-%COMP%]{width:30px;height:1px;background-color:#fff;margin-top:10px;margin-right:10px}button[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:100%;font-weight:400;font-style:italic;font-size:14px;letter-spacing:.2em;transition:.2s;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;align-self:center;outline:0;border:none;color:#000;box-shadow:0 0 20px 0 rgba(0,0,0,.5)}button[_ngcontent-%COMP%]:focus{outline:0;border:none}button[_ngcontent-%COMP%]:hover{cursor:pointer}p[_ngcontent-%COMP%]{font-size:15px;font-weight:200;font-style:italic;line-height:30px}.container-cover[_ngcontent-%COMP%], .container-dots[_ngcontent-%COMP%], .line[_ngcontent-%COMP%], .square[_ngcontent-%COMP%], .tiny-line[_ngcontent-%COMP%], button[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{opacity:0}.line.mobile[_ngcontent-%COMP%]{display:none}.line.desktop[_ngcontent-%COMP%]{display:block}@media only screen and (max-width:900px){.container[_ngcontent-%COMP%]{padding:0}.container-cover-content[_ngcontent-%COMP%]{width:260px;height:260px}}@media only screen and (max-width:768px){.container[_ngcontent-%COMP%]{width:100%;height:100%}.line.desktop[_ngcontent-%COMP%]{display:none}.line.mobile[_ngcontent-%COMP%]{display:block}.line[_ngcontent-%COMP%]{width:100%;-webkit-transform:translateY(-130px);transform:translateY(-130px)}.container-content[_ngcontent-%COMP%]{flex-direction:column;height:auto;justify-content:center;align-items:center}.container-cover[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;min-height:calc(50vh - 40px);padding-left:0;padding-right:0;justify-content:center;align-items:flex-end;padding-top:30px;box-sizing:border-box}.container-info[_ngcontent-%COMP%]{width:260px;max-width:260px;justify-content:flex-start;align-items:center;box-sizing:border-box;-webkit-transform:translateY(50px);transform:translateY(50px);padding:0 0 30px}.container-title[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column;justify-content:center;word-break:break-word;text-align:center}.container-description[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;display:flex;padding-top:0;box-sizing:border-box}.container-dots[_ngcontent-%COMP%]{-webkit-transform:translateY(20px);transform:translateY(20px)}button[_ngcontent-%COMP%]{margin-top:-10px}p[_ngcontent-%COMP%]{font-size:12px;font-weight:200;font-style:italic;line-height:24px}.container-description-content[_ngcontent-%COMP%]{min-height:0}}"]],data:{}});function nl(t){return Ro(0,[(t()(),bi(0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function rl(t){return Ro(0,[(t()(),bi(0,0,[[3,0],[5,0],["cover",1]],null,4,"div",[["class","cover"]],null,null,null,null,null)),so(1,278528,null,0,pc,[Gn,Tn,En],{ngStyle:[0,"ngStyle"]},null),Ao(2,{"background-image":0}),(t()(),vi(16777216,null,null,1,null,nl)),so(4,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,t(e,2,0,"url("+e.context.$implicit.covers[404]+")")),t(e,4,0,e.context.last?n.coversFinished(e.context.$implicit):"")},null)}function il(t){return Ro(0,[(t()(),bi(0,0,[[4,0],["dot",1]],null,0,"div",[["class","dot"]],null,null,null,null,null))],null,null)}function ol(t){return Ro(0,[Eo(402653184,1,{containerCovers:0}),Eo(671088640,2,{squares:1}),Eo(671088640,3,{cover:1}),Eo(671088640,4,{dots:1}),Eo(671088640,5,{coverChild:0}),Eo(402653184,6,{containerDots:0}),Eo(402653184,7,{bigLine:0}),Eo(402653184,8,{bigLineMobile:0}),Eo(402653184,9,{titleElement:0}),Eo(402653184,10,{descriptionElement:0}),Eo(402653184,11,{buttonElement:0}),Eo(402653184,12,{tinyLineElement:0}),Eo(402653184,13,{containerElement:0}),(t()(),bi(13,0,null,null,31,"div",[["class","container"]],null,null,null,null,null)),(t()(),bi(14,0,[[13,0],["containerElement",1]],null,30,"div",[["class","container-content"]],null,null,null,null,null)),(t()(),bi(15,0,[[7,0],["bigLine",1]],null,0,"div",[["class","line desktop"]],null,null,null,null,null)),(t()(),bi(16,0,[[1,0],["containerCovers",1]],null,16,"div",[["class","container-cover"]],null,null,null,null,null)),(t()(),bi(17,0,[[8,0],["bigLineMobile",1]],null,0,"div",[["class","line mobile"]],null,null,null,null,null)),(t()(),bi(18,0,null,null,14,"div",[["class","container-cover-content"]],null,null,null,null,null)),(t()(),bi(19,0,null,null,2,"div",[["class","container-squares"]],null,null,null,null,null)),(t()(),bi(20,0,[[2,0],["square",1]],null,0,"div",[["class","square"]],null,null,null,null,null)),(t()(),bi(21,0,[[2,0],["square",1]],null,0,"div",[["class","square"]],null,null,null,null,null)),(t()(),bi(22,0,null,null,4,"div",[["class","container-arrows"]],null,null,null,null,null)),(t()(),bi(23,0,null,null,1,"div",[["class","figure icon-arrow icon-back"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.left()&&r),r},null,null)),(t()(),bi(24,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_left.png"]],null,null,null,null,null)),(t()(),bi(25,0,null,null,1,"div",[["class","figure icon-arrow icon-next"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.right()&&r),r},null,null)),(t()(),bi(26,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_right.png"]],null,null,null,null,null)),(t()(),bi(27,0,null,null,2,"div",[["class","container-imgs"]],null,null,null,null,null)),(t()(),vi(16777216,null,null,1,null,rl)),so(29,278528,null,0,cc,[In,Sn,Wn],{ngForOf:[0,"ngForOf"]},null),(t()(),bi(30,0,[[6,0],["containerDots",1]],null,2,"div",[["class","container-dots"]],null,null,null,null,null)),(t()(),vi(16777216,null,null,1,null,il)),so(32,278528,null,0,cc,[In,Sn,Wn],{ngForOf:[0,"ngForOf"]},null),(t()(),bi(33,0,null,null,11,"div",[["class","container-info"]],null,null,null,null,null)),(t()(),bi(34,0,null,null,2,"div",[["class","container-title"]],null,null,null,null,null)),(t()(),bi(35,0,[[9,0],["titleElement",1]],null,1,"h4",[],null,null,null,null,null)),(t()(),No(36,null,["",""])),(t()(),bi(37,0,null,null,7,"div",[["class","container-description"]],null,null,null,null,null)),(t()(),bi(38,0,null,null,3,"div",[["class","container-description-content"]],null,null,null,null,null)),(t()(),bi(39,0,[[12,0],["tinyLineElement",1]],null,0,"div",[["class","tiny-line"]],null,null,null,null,null)),(t()(),bi(40,0,[[10,0],["descriptionElement",1]],null,1,"p",[],null,null,null,null,null)),(t()(),No(41,null,["",""])),(t()(),bi(42,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),bi(43,0,[[11,0],["buttonElement",1]],null,1,"button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.goToProject()&&r),r},null,null)),(t()(),No(-1,null,["Go"]))],function(t,e){var n=e.component;t(e,29,0,n.projects),t(e,32,0,n.projects)},function(t,e){var n=e.component;t(e,36,0,n.title),t(e,41,0,n.description)})}var sl=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;Tu.fromTo(this.h3Child.nativeElement,.25,{y:"-50px",opacity:0},{y:0,opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.lineOneChild.nativeElement,.25,{y:"-50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.h1Child.nativeElement,.25,{y:"-50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.lineTwoChild.nativeElement,.25,{y:"-50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.pOneChild.nativeElement,.25,{y:"-50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.lineThreeChild.nativeElement,.25,{y:"-50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.iconsChildren.nativeElement,.25,{y:"50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.namesChildren.nativeElement,.25,{y:"50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){Tu.fromTo(t.footer.nativeElement,.25,{y:"50px",opacity:0},{y:"0",opacity:1}).eventCallback("onComplete",function(){})})})})})})})})})},t}(),al=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;flex-direction:column;justify-content:center;padding-top:30px;padding-bottom:30px;box-sizing:border-box}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;text-align:center}h1[_ngcontent-%COMP%]{font-size:125px;font-weight:600;letter-spacing:-.02em;line-height:100px;margin:0}h3[_ngcontent-%COMP%]{font-size:50px;font-weight:400;letter-spacing:.08em;font-style:italic;line-height:50px}h6[_ngcontent-%COMP%]{font-size:15px;font-weight:400;letter-spacing:.08em;line-height:0}footer[_ngcontent-%COMP%]{font-size:10px;font-weight:200;letter-spacing:.08em;font-style:italic;line-height:12px}p[_ngcontent-%COMP%]{font-size:15px;font-weight:200;font-style:italic;line-height:40px}.container-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:-35px}.container-names[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container-names[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){margin-right:40px}.container-names[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){margin-left:40px}.line[_ngcontent-%COMP%]{width:1px;background-color:#fff}.line-one[_ngcontent-%COMP%]{margin-bottom:10px;height:30px}.line-two[_ngcontent-%COMP%]{height:60px}.line-three[_ngcontent-%COMP%]{height:80px}a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.tweenMaxAnim[_ngcontent-%COMP%]{opacity:0}@media only screen and (max-width:900px){h1[_ngcontent-%COMP%]{font-size:90px;font-weight:600;letter-spacing:-.02em;line-height:100px;margin:0}h3[_ngcontent-%COMP%]{font-size:30px;font-weight:400;letter-spacing:.08em;font-style:italic;line-height:50px}h6[_ngcontent-%COMP%]{font-size:15px;font-weight:400;letter-spacing:.08em;line-height:0}footer[_ngcontent-%COMP%]{font-size:10px;font-weight:200;letter-spacing:.08em;font-style:italic;line-height:12px}}@media only screen and (max-width:768px){.container[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);padding:10px}p[_ngcontent-%COMP%]{font-size:12px;font-weight:200;font-style:italic;line-height:24px}h1[_ngcontent-%COMP%]{font-size:75px;font-weight:600;letter-spacing:-.02em;line-height:75px;margin:0}.line-one[_ngcontent-%COMP%]{height:20px}.line-two[_ngcontent-%COMP%]{height:40px}.line-three[_ngcontent-%COMP%]{height:60px}}"]],data:{}});function ul(t){return Ro(0,[Eo(402653184,1,{h3Child:0}),Eo(402653184,2,{lineOneChild:0}),Eo(402653184,3,{h1Child:0}),Eo(402653184,4,{lineTwoChild:0}),Eo(402653184,5,{pOneChild:0}),Eo(402653184,6,{lineThreeChild:0}),Eo(402653184,7,{iconsChildren:0}),Eo(402653184,8,{namesChildren:0}),Eo(402653184,9,{footer:0}),(t()(),bi(9,0,null,null,45,"div",[["class","container"]],null,null,null,null,null)),(t()(),bi(10,0,null,null,44,"div",[],null,null,null,null,null)),(t()(),bi(11,0,[[1,0],["h3Child",1]],null,1,"h3",[["class","tweenMaxAnim"]],null,null,null,null,null)),(t()(),No(-1,null,["Thanks!"])),(t()(),bi(13,0,[[2,0],["lineOneChild",1]],null,0,"div",[["class","line line-one tweenMaxAnim"]],null,null,null,null,null)),(t()(),bi(14,0,[[3,0],["h1Child",1]],null,1,"h1",[["class","tweenMaxAnim"]],null,null,null,null,null)),(t()(),No(-1,null,["LET\u2019S TALK"])),(t()(),bi(16,0,[[4,0],["lineTwoChild",1]],null,0,"div",[["class","line line-two tweenMaxAnim"]],null,null,null,null,null)),(t()(),bi(17,0,[[5,0],["pOneChild",1]],null,1,"P",[["class","tweenMaxAnim"]],null,null,null,null,null)),(t()(),No(-1,null,["And create something wonderful together!"])),(t()(),bi(19,0,[[6,0],["lineThreeChild",1]],null,0,"div",[["class","line line-three tweenMaxAnim"]],null,null,null,null,null)),(t()(),bi(20,0,[[7,0],["iconsChildren",1]],null,9,"div",[["class","container-icons tweenMaxAnim"]],null,null,null,null,null)),(t()(),bi(21,0,null,null,2,"a",[["href","https://www.linkedin.com/in/raymicfc/"],["target","_blank"]],null,null,null,null,null)),(t()(),bi(22,0,null,null,1,"figure",[],null,null,null,null,null)),(t()(),bi(23,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_linkdn.png"]],null,null,null,null,null)),(t()(),bi(24,0,null,null,2,"a",[["href","https://dribbble.com/raymicfc"],["target","_blank"]],null,null,null,null,null)),(t()(),bi(25,0,null,null,1,"figure",[],null,null,null,null,null)),(t()(),bi(26,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_dribbble.png"]],null,null,null,null,null)),(t()(),bi(27,0,null,null,2,"a",[["href","https://www.behance.net/raymicfc"],["target","_blank"]],null,null,null,null,null)),(t()(),bi(28,0,null,null,1,"figure",[],null,null,null,null,null)),(t()(),bi(29,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_behance.png"]],null,null,null,null,null)),(t()(),bi(30,0,[[8,0],["namesChildren",1]],null,11,"div",[["class","container-names tweenMaxAnim"]],null,null,null,null,null)),(t()(),bi(31,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),bi(32,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),No(-1,null,["DESIGNED BY"])),(t()(),bi(34,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),No(-1,null,["Raymi farinango"])),(t()(),bi(36,0,null,null,5,"a",[["href","https://jacksonjao.github.io/"],["target","_blank"]],null,null,null,null,null)),(t()(),bi(37,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),bi(38,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),No(-1,null,["DEVELOPED BY"])),(t()(),bi(40,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),No(-1,null,["Jhon Osorio"])),(t()(),bi(42,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),bi(43,0,[[9,0],["footer",1]],null,11,"footer",[["class","tweenMaxAnim"]],null,null,null,null,null)),(t()(),No(-1,null,["\xa9 RAYMI FARINANGO Portfolio. "])),(t()(),bi(45,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),bi(46,0,null,null,1,"a",[["href","mailto:raymi.fc@gmail.com?Subject=Hello%20Raymi"],["target","_top"]],null,null,null,null,null)),(t()(),No(-1,null,["raymi.fc@gmail.com"])),(t()(),bi(48,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),No(-1,null,[" (+57) 3147775799"])),(t()(),bi(50,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),bi(51,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),No(-1,null,[" All rights reserved."])),(t()(),bi(53,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),No(-1,null,[" 2018"]))],null,null)}var cl=function(){function t(t){this.sanitizer=t}return t.prototype.transform=function(t,e){switch(e){case"html":return this.sanitizer.bypassSecurityTrustHtml(t);case"style":return this.sanitizer.bypassSecurityTrustStyle(t);case"script":return this.sanitizer.bypassSecurityTrustScript(t);case"url":return this.sanitizer.bypassSecurityTrustUrl(t);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(t);default:throw new Error("Invalid safe type specified: "+e)}},t}(),ll=null;function hl(){return ll}var fl,dl={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},pl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};bt.Node&&(fl=bt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var ml,gl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,ll||(ll=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,h(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return dl},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return fl.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&yl.hasOwnProperty(e)&&(e=yl[e]))}return pl[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=vl||(vl=document.querySelector("base"))?vl.getAttribute("href"):null;return null==n?null:(e=n,ml||(ml=document.createElement("a")),ml.setAttribute("href",e),"/"===ml.pathname.charAt(0)?ml.pathname:"/"+ml.pathname)},e.prototype.resetBaseElement=function(){vl=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return ac(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return i(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),vl=null,bl=mc;function wl(){return!!window.history.pushState}var _l=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return i(e,t),e.prototype._init=function(){this.location=hl().getLocation(),this._history=hl().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return hl().getBaseHref(this._doc)},e.prototype.onPopState=function(t){hl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){hl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){wl()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){wl()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},s([a(0,kt(bl)),u("design:paramtypes",[Object])],e)}($u),El=new pt("TRANSITION_ID"),Tl=[{provide:Ee,useFactory:function(t,e,n){return function(){n.get(Te).donePromise.then(function(){var n=hl();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[El,bl,Ft],multi:!0}],Cl=function(){function t(){}return t.init=function(){var e;e=new t,un=e},t.prototype.addToWindow=function(t){bt.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},bt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},bt.getAllAngularRootElements=function(){return t.getAllRootElements()},bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(function(t){var e=bt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?hl().isShadowRoot(e)?this.findTestabilityInTree(t,hl().getHost(e),!0):this.findTestabilityInTree(t,hl().parentElement(e),!0):null},t}();function Sl(t,e){"undefined"!=typeof COMPILED&&COMPILED||((bt.ng=bt.ng||{})[t]=e)}var Il={ApplicationRef:vn,NgZone:Je};function xl(t){return Dn(t)}var kl=new pt("EventManagerPlugins"),Al=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},s([a(0,kt(kl))],t)}(),Dl=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=hl().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),Nl=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Ol=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return i(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return hl().remove(t)})},s([a(0,kt(bl))],e)}(Nl),Pl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rl=/%COMP%/g,Ml="_nghost-%COMP%",Ll="_ngcontent-%COMP%";function Fl(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Fl(t,i,n):(i=i.replace(Rl,t),n.push(i))}return n}function jl(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Vl=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new ql(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ee.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Hl(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case ee.Native:case ee.ShadowDom:return new Ql(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Fl(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),ql=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Pl[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=Pl[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Pl[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&_n.DashCase?t.style.setProperty(e,n,r&_n.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&_n.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Ul(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Ul(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jl(n)):this.eventManager.addEventListener(t,e,jl(n))},t}(),Bl="@".charCodeAt(0);function Ul(t,e){if(t.charCodeAt(0)===Bl)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var zl,Hl=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=Fl(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=Ll.replace(Rl,r.id),i.hostAttr=Ml.replace(Rl,r.id),i}return i(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(ql),Ql=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===ee.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Fl(i.id,i.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],o.shadowRoot.appendChild(u)}return o}return i(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(ql),Kl="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Wl=Kl("addEventListener"),Gl=Kl("removeEventListener"),Yl={},Xl="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Kl("BLACK_LISTED_EVENTS")]&&(zl={});var Jl=function(t){return!!zl&&zl.hasOwnProperty(t)},Zl=function(t){var e=Yl[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Xl];o++){var s;(s=i[o]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},$l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.ngZone=n,r&&bc(r)||i.patchEvent(),i}return i(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Xl]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=n;if(!t[Wl]||Je.isInAngularZone()&&!Jl(e))t.addEventListener(e,i,!1);else{var o=Yl[e];o||(o=Yl[e]=Kl("ANGULAR"+e+"FALSE"));var s=t[o],a=s&&s.length>0;s||(s=t[o]=[]);var u=Jl(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:u,handler:i});else{for(var c=!1,l=0;l<s.length;l++)if(s[l].handler===i){c=!0;break}c||s.push({zone:u,handler:i})}a||t[Wl](e,Zl,!1)}return function(){return r.removeEventListener(t,e,i)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Gl];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Yl[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,Zl,!1]):t.removeEventListener.apply(t,[e,n,!1])},s([a(0,kt(bl)),a(2,At()),a(2,kt(ke))],e)}(Dl),th={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},eh=new pt("HammerGestureConfig"),nh=new pt("HammerLoader"),rh=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),ih=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return i(e,t),e.prototype.supports=function(t){return!(!th.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,s=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});o||(s=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}}),function(){s()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),s=function(t){i.runGuarded(function(){n(t)})};return o.on(e,s),function(){o.off(e,s),"function"==typeof o.destroy&&o.destroy()}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},s([a(0,kt(bl)),a(1,kt(eh)),a(3,At()),a(3,kt(nh))],e)}(Dl),oh=["alt","control","meta","shift"],sh={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ah=function(t){function e(e){return t.call(this,e)||this}var n;return i(e,t),n=e,e.prototype.supports=function(t){return null!=n.parseEventName(t)},e.prototype.addEventListener=function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return hl().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(oh.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var s={};return s.domEventName=r,s.fullKey=o,s},e.getEventFullKey=function(t){var e="",n=hl().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),oh.forEach(function(r){r!=n&&(0,sh[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},n=s([a(0,kt(bl))],e)}(Dl),uh=function(){},ch=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return i(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case Ir.NONE:return e;case Ir.HTML:return e instanceof hh?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=null;try{lr=lr||new ir(t);var r=e?String(e):"";n=lr.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);var s=new br,a=s.sanitizeChildren(Tr(n)||n);return fn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}finally{if(n)for(var u=Tr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(e)));case Ir.STYLE:return e instanceof fh?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Sr);return e&&ar(e[1])===e[1]||t.match(Cr)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(fn()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case Ir.SCRIPT:if(e instanceof dh)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Ir.URL:return e instanceof yh||e instanceof ph?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),ar(String(e)));case Ir.RESOURCE_URL:if(e instanceof yh)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof lh)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new hh(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new fh(t)},e.prototype.bypassSecurityTrustScript=function(t){return new dh(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new ph(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new yh(t)},s([a(0,kt(bl))],e)}(uh),lh=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(lh),fh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Style"},e}(lh),dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"Script"},e}(lh),ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"URL"},e}(lh),yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(lh),mh=pn(Zn,"browser",[{provide:ke,useValue:gc},{provide:xe,useValue:function(){gl.makeCurrent(),Cl.init()},multi:!0},{provide:$u,useClass:_l,deps:[bl]},{provide:bl,useFactory:function(){return document},deps:[]}]);function gh(){return new ce}var vh=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var e;return e=t,t.withServerTransition=function(t){return{ngModule:e,providers:[{provide:Ce,useValue:t.appId},{provide:El,useExisting:Ce},Tl]}},e=s([a(0,At()),a(0,Nt()),a(0,kt(e))],t)}();"undefined"!=typeof window&&window;var bh=function(){function t(){this.imageQ="disp",this.returnGallery=new Xe,this.video="https://www.youtube.com/embed/CD-E-LDc384",this.qImage()}return t.prototype.qImage=function(){this.innerWidth=window.innerWidth,this.imageQ=this.innerWidth<800?"disp":this.innerWidth<1600?"max_1200":this.innerWidth<2500?"max_1920":"max_3840"},t.prototype.ngOnInit=function(){},t.prototype.onResize=function(t){this.qImage()},t.prototype.closeProject=function(){var t=this;Tu.to(this.containerElement.nativeElement,.25,{opacity:0,ease:Wu.easeOut}),this.returnGallery.emit("GALLERY"),setTimeout(function(){t.returnGallery.emit("GALLERY")},1e3)},t.prototype.ngAfterViewInit=function(){var t=this;Tu.fromTo(this.containerImages.nativeElement,.5,{y:"100vh",opacity:0},{y:0,opacity:1,ease:Wu.easeOut}).eventCallback("onComplete",function(){Tu.to(t.tinyLine.nativeElement,.5,{width:"33px",opacity:1,ease:Eu.c.easeOut}),Tu.to(t.bigLine.nativeElement,.5,{width:"80%",opacity:1,ease:Eu.c.easeOut}),Tu.fromTo(t.title.nativeElement,.5,{transform:"translateY(-100px)"},{opacity:1,transform:"translateY(0px)",ease:Eu.c.easeOut}),Tu.to(t.description.nativeElement,.5,{opacity:1,ease:Eu.c.easeOut})})},t}(),wh=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;text-align:center;padding-top:30px;background:url(https://loading.io/spinners/flat-ball/lg.flat-bouncing-circle-loading-icon.gif) center/50px no-repeat #32343f;box-sizing:border-box}.container-content[_ngcontent-%COMP%]{width:100%;display:flex;text-align:center;flex-direction:column;align-items:center}h4[_ngcontent-%COMP%]{box-sizing:border-box;text-transform:uppercase;padding-left:30px;padding-right:30px}p[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}.line[_ngcontent-%COMP%]{height:1px;background-color:#fff;margin-top:10px;margin-bottom:10px;opacity:0}.icon[_ngcontent-%COMP%]{width:24px;right:0;margin-right:30px;position:fixed}.icon[_ngcontent-%COMP%]:hover{cursor:pointer}figure.project[_ngcontent-%COMP%]{width:100%;margin:0;padding:0;min-height:100%}img[_ngcontent-%COMP%]{width:100%;display:block}.container-images[_ngcontent-%COMP%]{width:100%;margin-top:30px;min-height:100%;box-shadow:0 0 20px 0 #000;background-color:red}.video[_ngcontent-%COMP%]{padding:40% 0 0;margin-top:20px;margin-bottom:20px;position:relative;box-sizing:border-box}.text[_ngcontent-%COMP%]{padding-right:14.3%;padding-left:14.3%;box-sizing:border-box}iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}"]],data:{}});function _h(t){return Ro(0,[(t()(),bi(0,0,null,null,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,e.parent.context.$implicit.sizes[e.component.imageQ])})}function Eh(t){return Ro(0,[(t()(),bi(0,0,null,null,2,"div",[["class","video"]],null,null,null,null,null)),(t()(),bi(1,0,null,null,1,"iframe",[["allowfullscreen",""],["frameborder","0"],["height","600"],["mozallowfullscreen",""],["webkitallowfullscreen",""],["width","800"]],[[8,"src",5]],null,null,null,null)),ko(2,2)],null,function(t,e){t(e,1,0,Ur(e,1,0,t(e,2,0,Wi(e.parent.parent.parent,0),e.parent.context.$implicit.embed.split("src=")[1].split(" ")[0].substr(1).slice(0,-1),"resourceUrl")))})}function Th(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"div",[["class","text"]],[[8,"innerHTML",1]],null,null,null,null)),ko(1,2)],null,function(t,e){t(e,0,0,Ur(e,0,0,t(e,1,0,Wi(e.parent.parent.parent,0),e.parent.context.$implicit.text,"html")))})}function Ch(t){return Ro(0,[(t()(),bi(0,0,null,null,6,"figure",[["class","project"]],null,null,null,null,null)),(t()(),vi(16777216,null,null,1,null,_h)),so(2,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null),(t()(),vi(16777216,null,null,1,null,Eh)),so(4,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null),(t()(),vi(16777216,null,null,1,null,Th)),so(6,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,"image"==e.context.$implicit.type),t(e,4,0,"embed"==e.context.$implicit.type),t(e,6,0,"text"==e.context.$implicit.type)},null)}function Sh(t){return Ro(0,[(t()(),bi(0,0,[[6,0],["containerElement",1]],null,14,"div",[["class","container"]],null,null,null,null,null)),(t()(),bi(1,0,null,null,13,"div",[["class","container-content"]],null,null,null,null,null)),(t()(),bi(2,0,[[4,0],["title",1]],null,1,"h4",[["style","opacity: 0"]],null,null,null,null,null)),(t()(),No(3,null,[""," "])),(t()(),bi(4,0,[[2,0],["tinyLine",1]],null,0,"div",[["class","line"],["style","{width: 0; opacity: 0}"]],null,null,null,null,null)),(t()(),bi(5,0,[[5,0],["description",1]],null,1,"p",[["style","opacity: 0"]],null,null,null,null,null)),(t()(),No(6,null,[" "," "])),(t()(),bi(7,0,[[3,0],["bigLine",1]],null,0,"div",[["class","line"],["style","{width: 0; opacity: 0}"]],null,null,null,null,null)),(t()(),bi(8,0,[[1,0],["containerImages",1]],null,4,"div",[["class","container-images"]],null,null,null,null,null)),so(9,278528,null,0,pc,[Gn,Tn,En],{ngStyle:[0,"ngStyle"]},null),Ao(10,{background:0}),(t()(),vi(16777216,null,null,1,null,Ch)),so(12,278528,null,0,cc,[In,Sn,Wn],{ngForOf:[0,"ngForOf"]},null),(t()(),bi(13,0,null,null,1,"figure",[["class","icon"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeProject()&&r),r},null,null)),(t()(),bi(14,0,null,null,0,"img",[["alt",""],["src","assets/img/icon_close.svg"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,9,0,t(e,10,0,"#"+n.project.styles.background.color)),t(e,12,0,n.project.modules)},function(t,e){var n=e.component;t(e,3,0,n.project.name),t(e,6,0,n.project.description)})}function Ih(t){return Ro(0,[(e=0,n=cl,r=[uh],ao(-1,e|=16,null,0,n,n,r)),Eo(671088640,1,{containerImages:0}),Eo(671088640,2,{tinyLine:0}),Eo(671088640,3,{bigLine:0}),Eo(671088640,4,{title:0}),Eo(671088640,5,{description:0}),Eo(671088640,6,{containerElement:0}),Eo(402653184,7,{ifrobj:0}),(t()(),vi(16777216,null,null,1,null,Sh)),so(9,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,9,0,e.component.project)},null);var e,n,r}var xh=n("ouIz"),kh=n.n(xh),Ah=function(){},Dh=function(){},Nh=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,h(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),Oh=function(){function t(){}return t.prototype.encodeKey=function(t){return Ph(t)},t.prototype.encodeValue=function(t){return Ph(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function Ph(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Rh=function(){function t(t){void 0===t&&(t={});var e,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Oh,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),i=l(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),o=i[0],s=i[1],a=r.get(o)||[];a.push(s),r.set(o,a)}),r)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];i.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function Mh(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Lh(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Fh(t){return"undefined"!=typeof FormData&&t instanceof FormData}var jh=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Nh),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var s=e.indexOf("?");this.urlWithParams=e+(-1===s?"?":s<e.length-1?"&":"")+o}}else this.params=new Rh,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:Mh(this.body)||Lh(this.body)||Fh(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:Fh(this.body)?null:Lh(this.body)?this.body.type||null:Mh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(c=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},c)),new t(n,r,o,{params:c,headers:u,reportProgress:a,responseType:i,withCredentials:s})},t}(),Vh=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),qh=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new Nh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),Bh=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Vh.ResponseHeader,n}return i(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(qh),Uh=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Vh.Response,n.body=void 0!==e.body?e.body:null,n}return i(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(qh),zh=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return i(e,t),e}(qh);function Hh(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Qh=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof jh)r=t;else{var o;o=n.headers instanceof Nh?n.headers:new Nh(n.headers);var s=void 0;n.params&&(s=n.params instanceof Rh?n.params:new Rh({fromObject:n.params})),r=new jh(t,e,void 0!==n.body?n.body:null,{headers:o,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var a=_c(r).pipe(Y(function(t){return i.handler.handle(t)},void 0,1));if(t instanceof jh||"events"===n.observe)return a;var u=a.pipe(Cc(function(t){return t instanceof Uh}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(H(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(H(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(H(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(H(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new Rh).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Hh(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Hh(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Hh(n,e))},t}(),Kh=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),Wh=new pt("HTTP_INTERCEPTORS"),Gh=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),Yh=0,Xh=function(){},Jh=function(){function t(t,e){this.callbackMap=t,this.document=e}return t.prototype.nextCallback=function(){return"ng_jsonp_callback_"+Yh++},t.prototype.handle=function(t){var e=this;if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");return new N(function(n){var r=e.nextCallback(),i=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"="+r+"$1"),o=e.document.createElement("script");o.src=i;var s=null,a=!1,u=!1;e.callbackMap[r]=function(t){delete e.callbackMap[r],u||(s=t,a=!0)};var c=function(){o.parentNode&&o.parentNode.removeChild(o),delete e.callbackMap[r]},l=function(t){u||(c(),a?(n.next(new Uh({body:s,status:200,statusText:"OK",url:i})),n.complete()):n.error(new zh({url:i,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")})))},h=function(t){u||(c(),n.error(new zh({error:t,status:0,statusText:"JSONP Error",url:i})))};return o.addEventListener("load",l),o.addEventListener("error",h),e.document.body.appendChild(o),n.next({type:Vh.Sent}),function(){u=!0,o.removeEventListener("load",l),o.removeEventListener("error",h),c()}})},s([a(1,kt(mc))],t)}(),Zh=function(){function t(t){this.jsonp=t}return t.prototype.intercept=function(t,e){return"JSONP"===t.method?this.jsonp.handle(t):e.handle(t)},t}(),$h=/^\)\]\}',?\n/,tf=function(){},ef=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),nf=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new N(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var s=t.serializeBody(),a=null,u=function(){if(null!==a)return a;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Nh(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return a=new Bh({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,s=e.statusText,a=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace($h,"");try{c=""!==c?JSON.parse(c):null}catch(t){c=h,l&&(l=!1,c={error:t,text:c})}}l?(n.next(new Uh({body:c,headers:i,status:o,statusText:s,url:a||void 0})),n.complete()):n.error(new zh({error:c,headers:i,status:o,statusText:s,url:a||void 0}))},l=function(t){var e=new zh({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(e)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Vh.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:Vh.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",f),null!==s&&r.upload&&r.upload.addEventListener("progress",d)),r.send(s),n.next({type:Vh.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==s&&r.upload&&r.upload.removeEventListener("progress",d)),r.abort()}})},t}(),rf=new pt("XSRF_COOKIE_NAME"),of=new pt("XSRF_HEADER_NAME"),sf=function(){},af=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ac(t,this.cookieName),this.lastCookieString=t),this.lastToken},s([a(0,kt(mc)),a(1,kt(ke)),a(2,kt(rf))],t)}(),uf=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},s([a(1,kt(of))],t)}(),cf=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(Wh,[]);this.chain=e.reduceRight(function(t,e){return new Kh(t,e)},this.backend)}return this.chain.handle(t)},t}();function lf(){return"object"==typeof window?window:{}}var hf=function(){function t(){}var e;return e=t,t.disable=function(){return{ngModule:e,providers:[{provide:uf,useClass:Gh}]}},t.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:rf,useValue:t.cookieName}:[],t.headerName?{provide:of,useValue:t.headerName}:[]]}},t}(),ff=function(){},df=function(){},pf=function(){function t(t,e){this.httpClient=t,this.firebaseService=e,this.behance=new kh.a({apiKey:"u8897rZilTJ7TWx56Uw5wMfT3v7NSOCq"})}return t.prototype.synchronizeWithFirebase=function(){var t=this;this.behance.userProjects("raymicfc").then(function(e){e.projects.map(function(e){t.behance.project(e.id).then(function(e){var n=e.project,r={id:n.id,name:n.name,description:n.description,modules:[],covers:n.covers,url:n.url,styles:{background:{color:n.styles.background.color}}};n.modules.map(function(t){"image"===t.type&&r.modules.push({type:t.type,text:"",embed:"",sizes:t.sizes}),"embed"===t.type&&r.modules.push({type:t.type,text:"",embed:t.embed,sizes:[]}),"text"===t.type&&r.modules.push({type:t.type,text:t.text,embed:"",sizes:[]})}),console.log(r),t.firebaseService.synchronizeWithBehance(r)})})},function(t){console.log(t)})},t.ngInjectableDef=dt({factory:function(){return new t($t(Qh),$t(Zc))},token:t,providedIn:"root"}),t}(),yf=function(){function t(t){this.valueChange=new Xe}return t.prototype.ngOnInit=function(){},t.prototype.handleclick=function(t,e){this.lineAnimation(e),this.valueChange.emit(t)},t.prototype.lineAnimation=function(t){t.className+=" active",this.backupElement?this.backupElement!==t&&(this.backupElement.className="line ",this.backupElement=t):this.backupElement=t},t.prototype.ngAfterViewInit=function(){this.lineAnimation(this.RAYMI.nativeElement),this.valueChange.emit("RAYMI")},t}(),mf=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:156px;min-width:156px;z-index:1;border-right:1px solid #fff;min-height:100%;display:flex;flex-direction:column;align-items:center;text-align:center}figure[_ngcontent-%COMP%]{width:36px;margin-top:76px}nav[_ngcontent-%COMP%]{list-style:none;margin-top:71px;display:flex;flex-direction:column;box-sizing:border-box}a[_ngcontent-%COMP%]{font-size:9px;color:#fff;font-weight:600;transition:2s;height:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box}span[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:hover{cursor:pointer}.line[_ngcontent-%COMP%]{width:0;height:1px;background-color:#fff;transition:.2s}.active[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width:768px){.container[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #fff;border-right:none;flex-direction:row;justify-content:space-between;align-items:center;padding-left:10%;padding-right:10%;box-sizing:border-box}nav[_ngcontent-%COMP%]{flex-direction:row;height:80px;justify-content:center;align-items:center;margin-top:0;box-sizing:border-box}figure[_ngcontent-%COMP%]{width:36px;margin-top:0;box-sizing:border-box;padding-top:4px;margin-left:15px}a[_ngcontent-%COMP%]{margin-bottom:0}span[_ngcontent-%COMP%]{box-sizing:border-box;margin-right:15px}a[_ngcontent-%COMP%]:last-child{margin-right:0}}"]],data:{}});function gf(t){return Ro(0,[Eo(402653184,1,{RAYMI:0}),(t()(),bi(1,0,null,null,17,"div",[["class","container"]],null,null,null,null,null)),so(2,278528,null,0,pc,[Gn,Tn,En],{ngStyle:[0,"ngStyle"]},null),Ao(3,{width:0}),(t()(),bi(4,0,null,null,1,"figure",[],null,null,null,null,null)),(t()(),bi(5,0,null,null,0,"img",[["alt",""],["src","assets/img/logo.svg"]],null,null,null,null,null)),(t()(),bi(6,0,null,null,12,"nav",[],null,null,null,null,null)),(t()(),bi(7,0,null,null,3,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.handleclick("RAYMI",Wi(t,10))&&r),r},null,null)),(t()(),bi(8,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),No(-1,null,["RAYMI"])),(t()(),bi(10,0,[[1,0],["RAYMI",1]],null,0,"div",[["class","line"]],null,null,null,null,null)),(t()(),bi(11,0,null,null,3,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.handleclick("GALLERY",Wi(t,14))&&r),r},null,null)),(t()(),bi(12,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),No(-1,null,["GALLERY"])),(t()(),bi(14,0,[["GALLERY",1]],null,0,"div",[["class","line"]],null,null,null,null,null)),(t()(),bi(15,0,null,null,3,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.handleclick("MORE",Wi(t,18))&&r),r},null,null)),(t()(),bi(16,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),No(-1,null,["MORE"])),(t()(),bi(18,0,[["MORE",1]],null,0,"div",[["class","line"]],null,null,null,null,null))],function(t,e){t(e,2,0,t(e,3,0,e.component.width))},null)}var vf=Qr({encapsulation:0,styles:[[".container[_ngcontent-%COMP%]{width:100vw;min-height:100vh;min-width:320px;display:flex;flex-direction:row;background:linear-gradient(to right,#22232b,#282a33,#2c2e38) #22232b}.container-views[_ngcontent-%COMP%]{flex-direction:row;width:100%;min-height:100%;z-index:0}@media only screen and (max-width:768px){.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container-views[_ngcontent-%COMP%]{flex-direction:column}}"]],data:{}});function bf(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"app-introduction",[],null,null,null,Zu,Ju)),so(1,4308992,null,0,Xu,[],null,null)],function(t,e){t(e,1,0)},null)}function wf(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"app-gallery",[],null,[[null,"sendProject"],["window","resize"]],function(t,e,n){var r=!0,i=t.component;return"window:resize"===e&&(r=!1!==Wi(t,1).onResize(n)&&r),"sendProject"===e&&(i.openProject(n),r=!1!==(i.project=n)&&r),r},ol,el)),so(1,4308992,null,0,tl,[Zc,$c],null,{sendProject:"sendProject"})],function(t,e){t(e,1,0)},null)}function _f(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"app-more",[],null,null,null,ul,al)),so(1,4308992,null,0,sl,[],null,null)],function(t,e){t(e,1,0)},null)}function Ef(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"app-project",[],null,[[null,"returnGallery"],["window","resize"]],function(t,e,n){var r=!0,i=t.component;return"window:resize"===e&&(r=!1!==Wi(t,1).onResize(n)&&r),"returnGallery"===e&&(r=!1!==i.closeProject(n)&&r),r},Ih,wh)),so(1,4308992,null,0,bh,[],{project:[0,"project"]},{returnGallery:"returnGallery"})],function(t,e){t(e,1,0,e.component.project)},null)}function Tf(t){return Ro(0,[(t()(),bi(0,0,null,null,11,"div",[["class","container"]],null,null,null,null,null)),(t()(),bi(1,0,null,null,1,"app-menu",[],null,[[null,"valueChange"]],function(t,e,n){var r=!0;return"valueChange"===e&&(r=!1!==t.component.menuSelected(n)&&r),r},gf,mf)),so(2,4308992,null,0,yf,[pf],null,{valueChange:"valueChange"}),(t()(),bi(3,0,null,null,8,"div",[["class","container-views"]],null,null,null,null,null)),(t()(),vi(16777216,null,null,1,null,bf)),so(5,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null),(t()(),vi(16777216,null,null,1,null,wf)),so(7,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null),(t()(),vi(16777216,null,null,1,null,_f)),so(9,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null),(t()(),vi(16777216,null,null,1,null,Ef)),so(11,16384,null,0,hc,[In,Sn],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0),t(e,5,0,n.isIntroduction),t(e,7,0,n.isGallery),t(e,9,0,n.isMore),t(e,11,0,n.isProject)},null)}var Cf=function(t,e,n,r,i,o){return new Fi("app-root",Yu,function(t){return Ro(0,[(t()(),bi(0,0,null,null,1,"app-root",[],null,null,null,Tf,vf)),so(1,49152,null,0,Yu,[],null,null)],null,null)},{},{},[])}(),Sf=function(t,e,n){return new Bs(Gu,[Yu],function(t){return function(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===le&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Br(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}([ki(512,Be,Ue,[[8,[Cf]],[3,Be],He]),ki(5120,$n,nr,[[3,$n]]),ki(4608,oc,sc,[$n,[2,ic]]),ki(4608,Oe,Oe,[]),ki(5120,Ce,Se,[]),ki(5120,Wn,tr,[]),ki(5120,Gn,er,[]),ki(4608,uh,ch,[mc]),ki(6144,xr,null,[uh]),ki(4608,eh,rh,[]),ki(5120,kl,function(t,e,n,r,i,o,s,a){return[new $l(t,e,n),new ah(r),new ih(i,o,s,a)]},[mc,Je,ke,mc,mc,eh,De,[2,nh]]),ki(4608,Al,Al,[kl,Je]),ki(135680,Ol,Ol,[mc]),ki(4608,Vl,Vl,[Al,Ol]),ki(6144,wn,null,[Vl]),ki(6144,Nl,null,[Ol]),ki(4608,sn,sn,[Je]),ki(4608,Xc,Xc,[jc,[2,Vc],[2,Qc],[2,Wc],ke,Je,[2,Kc]]),ki(4608,sf,af,[mc,ke,rf]),ki(4608,uf,uf,[sf,of]),ki(5120,Xh,lf,[]),ki(4608,Jh,Jh,[Xh,mc]),ki(5120,Wh,function(t,e){return[t,new Zh(e)]},[uf,Jh]),ki(4608,ef,ef,[]),ki(6144,tf,null,[ef]),ki(4608,nf,nf,[tf]),ki(6144,Dh,null,[nf]),ki(4608,Ah,cf,[Dh,Ft]),ki(4608,Qh,Qh,[Ah]),ki(5120,qc,Bc,[jc,[2,Vc]]),ki(4608,$c,$c,[]),ki(4608,pf,pf,[Qh,Zc]),ki(1073742336,yc,yc,[]),ki(1024,ce,gh,[]),ki(1024,Ee,function(t){return[(e=t,Sl("probe",xl),Sl("coreTokens",o({},Il,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return xl})];var e},[[2,dn]]),ki(512,Te,Te,[[2,Ee]]),ki(131584,vn,vn,[Je,De,Ft,ce,Be,Te]),ki(1073742336,rr,rr,[vn]),ki(1073742336,vh,vh,[[3,vh]]),ki(1073742336,Jc,Jc,[]),ki(1073742336,hf,hf,[]),ki(1073742336,ff,ff,[]),ki(1073742336,df,df,[]),ki(1073742336,Uc,Uc,[]),ki(1073742336,Gu,Gu,[]),ki(256,le,!0,[]),ki(256,jc,{apiKey:"AIzaSyAVCvBjymBuN5NyRnA5cfLNAWN39S8P2eQ",authDomain:"portfolio-32fea.firebaseapp.com",databaseURL:"https://portfolio-32fea.firebaseio.com",projectId:"portfolio-32fea",storageBucket:"portfolio-32fea.appspot.com",messagingSenderId:"902323711717"},[]),ki(256,Vc,void 0,[]),ki(256,rf,"XSRF-TOKEN",[]),ki(256,of,"X-XSRF-TOKEN",[])])})}();(function(){if(ln)throw new Error("Cannot enable prod mode after platform setup.");cn=!1})(),mh().bootstrapModuleFactory(Sf).catch(function(t){return console.log(t)})},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+7AZ"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!=a&&(r.push(s<<4&240|a>>2),64!=u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),f=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},d=Error.captureStackTrace,p=function(){return function(t,e){if(this.code=t,this.message=e,d)d(this,y.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="FirebaseError";var y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var o=new p(i,n=this.serviceName+": "+n+" ("+i+").");for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(o[s]=e[s]);return o},t}();function m(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},v=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return v(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},_=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){this.blockSize=-1}),E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function T(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.assert=o,e.assertionError=s,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=f,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=y,e.FirebaseError=p,e.patchCapture=function(t){var e=d;return d=t,e},e.jsonEval=m,e.stringify=function(t){return JSON.stringify(t)},e.decode=g,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=g(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=v,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return v(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=_,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.errorPrefix=C,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}}},[[2,0]]]);